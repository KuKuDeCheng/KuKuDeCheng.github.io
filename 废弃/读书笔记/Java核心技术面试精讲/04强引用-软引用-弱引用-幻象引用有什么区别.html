<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.46" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zhangchengk.github.io/%E5%BA%9F%E5%BC%83/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E7%B2%BE%E8%AE%B2/04%E5%BC%BA%E5%BC%95%E7%94%A8-%E8%BD%AF%E5%BC%95%E7%94%A8-%E5%BC%B1%E5%BC%95%E7%94%A8-%E5%B9%BB%E8%B1%A1%E5%BC%95%E7%94%A8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html"><meta property="og:site_name" content="Panda诚的博客"><meta property="og:title" content="强引用-软引用-弱引用-幻象引用有什么区别"><meta property="og:type" content="article"><meta property="og:image" content="https://zhangchengk.github.io/"><meta property="og:updated_time" content="2023-07-19T12:37:43.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="强引用-软引用-弱引用-幻象引用有什么区别"><meta property="article:author" content="张诚"><meta property="article:published_time" content="2021-02-27T00:00:00.000Z"><meta property="article:modified_time" content="2023-07-19T12:37:43.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><meta name="referrer" content="no-referrer"><link rel="icon" href="/logo.png"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>强引用-软引用-弱引用-幻象引用有什么区别 | Panda诚的博客</title><meta name="description" content="古来圣贤皆贫贱 何况我辈孤且直">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.cc6c27f0.css">
    <link rel="modulepreload" href="/assets/app.17aaeba5.js"><link rel="modulepreload" href="/assets/04强引用-软引用-弱引用-幻象引用有什么区别.html.2fd47dbc.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/04强引用-软引用-弱引用-幻象引用有什么区别.html.f25cdf9c.js"><link rel="prefetch" href="/assets/index.html.0fcae25a.js"><link rel="prefetch" href="/assets/001-编译NIFI源码.html.c496243e.js"><link rel="prefetch" href="/assets/002-NIFI自定义开发规范.html.61d8c3a1.js"><link rel="prefetch" href="/assets/003-Processor的一些方法.html.a2b16c2e.js"><link rel="prefetch" href="/assets/004-自定义Processor.html.9271631a.js"><link rel="prefetch" href="/assets/005-自定义ExpressionLanguage.html.ad33e143.js"><link rel="prefetch" href="/assets/006-NIFI启动源码.html.3ea3f3bf.js"><link rel="prefetch" href="/assets/007-在HTTP模式下开启权限模块.html.9aec8b47.js"><link rel="prefetch" href="/assets/008-JettyServer源码.html.472255c7.js"><link rel="prefetch" href="/assets/009-NiFi源码.html.3a8c4dd7.js"><link rel="prefetch" href="/assets/010-nifi注解.html.9daf0e7e.js"><link rel="prefetch" href="/assets/011-Debezium详细嵌入NIFI.html.582e8382.js"><link rel="prefetch" href="/assets/RunNiFi源码.html.50c06419.js"><link rel="prefetch" href="/assets/nifi-env-sh.html.7e84946c.js"><link rel="prefetch" href="/assets/nifi-sh-start.html.f31bbd2e.js"><link rel="prefetch" href="/assets/nifi-sh.html.08d29b28.js"><link rel="prefetch" href="/assets/000-ApacheNIFI历史.html.806a551a.js"><link rel="prefetch" href="/assets/001-NiFi术语.html.582292c1.js"><link rel="prefetch" href="/assets/002-带你体验ApacheNIFI.html.681ba0d3.js"><link rel="prefetch" href="/assets/003-NIFI入门.html.7e110846.js"><link rel="prefetch" href="/assets/004-数据抽取的常见方法.html.6d006b7c.js"><link rel="prefetch" href="/assets/005-基于增量字段同步数据.html.35b70ea1.js"><link rel="prefetch" href="/assets/006-NIFI各个NAR包功能概述.html.f21ae8f4.js"><link rel="prefetch" href="/assets/007-Nar包加载机制源码解读.html.b84fdf9d.js"><link rel="prefetch" href="/assets/008-Nar包下的MANIFEST.MF.html.ba4d3f9c.js"><link rel="prefetch" href="/assets/009-Apache NIFI类资源隔离机制.html.c4a257fc.js"><link rel="prefetch" href="/assets/010-Apache NIFI Processor情况.html.a6552e04.js"><link rel="prefetch" href="/assets/011-理解connection.html.fea18d6d.js"><link rel="prefetch" href="/assets/012-理解maxThread设置.html.69d32085.js"><link rel="prefetch" href="/assets/013-RunDuration理解.html.7b0ef0c6.js"><link rel="prefetch" href="/assets/014-ContentRepositoryArchiving理解.html.342999f7.js"><link rel="prefetch" href="/assets/015-Controller Services是守护进程.html.329513c6.js"><link rel="prefetch" href="/assets/016-NIFI调度.html.1c5cb3ab.js"><link rel="prefetch" href="/assets/017-NIFI高可用.html.60faa3c5.js"><link rel="prefetch" href="/assets/018-通过配置优化NiFi性能.html.21761c46.js"><link rel="prefetch" href="/assets/019-NIFI里的数据库连接池.html.892d384e.js"><link rel="prefetch" href="/assets/020-为什么建议使用NIFI里的Record.html.80537fe1.js"><link rel="prefetch" href="/assets/021-NIFI贡献代码.html.21ff3b9f.js"><link rel="prefetch" href="/assets/022-NIFI开启HTTPS.html.efc1feb7.js"><link rel="prefetch" href="/assets/023-ExecuteScript脚本教程.html.51b0d91b.js"><link rel="prefetch" href="/assets/024-内容存储库原理.html.bc869787.js"><link rel="prefetch" href="/assets/025-FlowFile存储库原理.html.cc042d20.js"><link rel="prefetch" href="/assets/026-预写日志(WAL).html.cffdea77.js"><link rel="prefetch" href="/assets/027-Provenance存储库原理.html.ec904ccd.js"><link rel="prefetch" href="/assets/028-NIFI架构.html.8854ade8.js"><link rel="prefetch" href="/assets/029-NIFI事务原理.html.e77f76b5.js"><link rel="prefetch" href="/assets/030-数据库字段类型.html.783d7846.js"><link rel="prefetch" href="/assets/031-1.14.html.8663ef1f.js"><link rel="prefetch" href="/assets/032-CaptureChangeMySQL.html.dfe5a778.js"><link rel="prefetch" href="/assets/033-流程告警.html.de388c03.js"><link rel="prefetch" href="/assets/034-JWT.html.d628ed27.js"><link rel="prefetch" href="/assets/037-MySQL全字段测试.html.22dd89c8.js"><link rel="prefetch" href="/assets/01-输入输出流.html.3cb7129d.js"><link rel="prefetch" href="/assets/02-File.html.83ffda0d.js"><link rel="prefetch" href="/assets/03-缓冲流BufferedInputStream与BufferedOutputStream.html.78fc1e00.js"><link rel="prefetch" href="/assets/04-缓冲流BufferedReader与BufferedWriter.html.e006a52e.js"><link rel="prefetch" href="/assets/05-转换流InputStreamReader与OutputStreamWriter.html.fc8a10e3.js"><link rel="prefetch" href="/assets/06-ByteArrayInputStream与ByteArrayOutputStream.html.0bbd0cfd.js"><link rel="prefetch" href="/assets/07-CommonsIO2.5-FileUtils.html.638b2e2f.js"><link rel="prefetch" href="/assets/ByteArrayOutputStream.html.6957a084.js"><link rel="prefetch" href="/assets/Java SPI机制.html.42fc5241.js"><link rel="prefetch" href="/assets/Java8_JVM内存模型.html.de707242.js"><link rel="prefetch" href="/assets/Java中atomic包中的原子操作类总结.html.4fdd73c9.js"><link rel="prefetch" href="/assets/Java中的锁.html.e2f8bc99.js"><link rel="prefetch" href="/assets/Java内存模型原理.html.e95a2195.js"><link rel="prefetch" href="/assets/Java反射.html.4ecbdec6.js"><link rel="prefetch" href="/assets/Java导入语句中不宜使用通配符.html.74d2db2d.js"><link rel="prefetch" href="/assets/Java类加载器.html.17f2c707.js"><link rel="prefetch" href="/assets/Java里带标签的break和continue.html.46ca85e0.js"><link rel="prefetch" href="/assets/Jvm-dump-jstack-jmap-jstat.html.3bb54971.js"><link rel="prefetch" href="/assets/java注解.html.19e9a712.js"><link rel="prefetch" href="/assets/web的发展历史.html.be5afdd1.js"><link rel="prefetch" href="/assets/代码设计原理.html.9168676e.js"><link rel="prefetch" href="/assets/使用List.html.5749f733.js"><link rel="prefetch" href="/assets/偏向锁批量重偏向与批量撤销.html.92547243.js"><link rel="prefetch" href="/assets/到底什么是classpath.html.ed6ac9ea.js"><link rel="prefetch" href="/assets/动手体验JVM中Class对象的唯一性.html.81d4153d.js"><link rel="prefetch" href="/assets/多线程基础知识总结.html.85c727bd.js"><link rel="prefetch" href="/assets/打印Java对象头.html.53828c35.js"><link rel="prefetch" href="/assets/深入了解Java锁.html.31c337c9.js"><link rel="prefetch" href="/assets/相对路径与绝对路径去读取文件.html.6dabf159.js"><link rel="prefetch" href="/assets/类加载机制.html.3f3fe5df.js"><link rel="prefetch" href="/assets/线程通信.html.01ba9d14.js"><link rel="prefetch" href="/assets/让你彻底理解Synchronized.html.15a8ae9e.js"><link rel="prefetch" href="/assets/JsonJolt教程.html.1bb06cba.js"><link rel="prefetch" href="/assets/JsonJolt教程英文版.html.4e28289e.js"><link rel="prefetch" href="/assets/使用jolt替换值.html.08bb93eb.js"><link rel="prefetch" href="/assets/001Spring基础知识.html.aae1ddd6.js"><link rel="prefetch" href="/assets/002Bean定义常见错误.html.e14a6e38.js"><link rel="prefetch" href="/assets/003依赖注入常见错误上.html.ee865dd6.js"><link rel="prefetch" href="/assets/004依赖注入常见错误下.html.11ee7b02.js"><link rel="prefetch" href="/assets/005Bean生命周期常见错误.html.605393fe.js"><link rel="prefetch" href="/assets/intro.html.67565d0d.js"><link rel="prefetch" href="/assets/qq.html.8fe9c932.js"><link rel="prefetch" href="/assets/wechat.html.ed99719d.js"><link rel="prefetch" href="/assets/001-管理OracleRedoLog.html.2edd7960.js"><link rel="prefetch" href="/assets/BIT的字节序.html.310c94f0.js"><link rel="prefetch" href="/assets/Oracle12cLogMiner分析Redo日志文件.html.5c9d01f9.js"><link rel="prefetch" href="/assets/基于水印的CDC框架.html.34611ca0.js"><link rel="prefetch" href="/assets/01-进程与线程基本概念.html.2de5cb5c.js"><link rel="prefetch" href="/assets/02-Java多线程入门类和接口.html.61f473d2.js"><link rel="prefetch" href="/assets/03-线程组和线程优先级.html.10956f92.js"><link rel="prefetch" href="/assets/04-Java线程的状态及主要转化方法.html.57fc3555.js"><link rel="prefetch" href="/assets/05-Java线程间的通信.html.1dad9615.js"><link rel="prefetch" href="/assets/06-Java内存模型基础知识.html.ef809786.js"><link rel="prefetch" href="/assets/07-重排序与happens-before.html.36eca085.js"><link rel="prefetch" href="/assets/08-volatitle.html.d6d7c7bb.js"><link rel="prefetch" href="/assets/09-synchronized与锁.html.2b8762d7.js"><link rel="prefetch" href="/assets/10-CAS与原子操作.html.1d9f0cc5.js"><link rel="prefetch" href="/assets/11-AQS.html.2fd5c3e2.js"><link rel="prefetch" href="/assets/12-线程池原理.html.1aa5d301.js"><link rel="prefetch" href="/assets/13-阻塞队列.html.c3fc8ad8.js"><link rel="prefetch" href="/assets/14-锁接口和类.html.fb7e52ba.js"><link rel="prefetch" href="/assets/15-并发容器集合.html.81c82bf3.js"><link rel="prefetch" href="/assets/16-CopyOnWrite容器.html.63194b5b.js"><link rel="prefetch" href="/assets/17-通信工具类.html.6082e9dc.js"><link rel="prefetch" href="/assets/18-Fork_Join框架.html.e77d4a29.js"><link rel="prefetch" href="/assets/19-Java8Stream并行计算原理.html.0d62da55.js"><link rel="prefetch" href="/assets/20-计划任务.html.0d355ed5.js"><link rel="prefetch" href="/assets/深入浅出Java多线程.html.c268f98b.js"><link rel="prefetch" href="/assets/sf.html.8f305e05.js"><link rel="prefetch" href="/assets/二叉搜索树的前驱和后继节点.html.a0101f40.js"><link rel="prefetch" href="/assets/什么是红黑树.html.724a2226.js"><link rel="prefetch" href="/assets/冒泡排序.html.5256122d.js"><link rel="prefetch" href="/assets/十大经典排序算法最强总结.html.dbd3826f.js"><link rel="prefetch" href="/assets/基于Java实现红黑树的基本操作.html.a601a58b.js"><link rel="prefetch" href="/assets/并查集.html.2bdbf229.js"><link rel="prefetch" href="/assets/01-命名风格.html.cbe54c3a.js"><link rel="prefetch" href="/assets/02-常量定义.html.0e347c9f.js"><link rel="prefetch" href="/assets/03-代码格式.html.e2fc3243.js"><link rel="prefetch" href="/assets/04-OOP规约.html.019473ea.js"><link rel="prefetch" href="/assets/05-日期时间.html.b8feee5f.js"><link rel="prefetch" href="/assets/06-集合处理.html.2f3397b2.js"><link rel="prefetch" href="/assets/07-并发处理.html.c5062a71.js"><link rel="prefetch" href="/assets/08-控制语句.html.9b863553.js"><link rel="prefetch" href="/assets/09-注释规约.html.e731dc15.js"><link rel="prefetch" href="/assets/10-其它.html.db65550b.js"><link rel="prefetch" href="/assets/11-错误码.html.e9f27e99.js"><link rel="prefetch" href="/assets/12-异常处理.html.1284aa38.js"><link rel="prefetch" href="/assets/13-日志规约.html.06be32ad.js"><link rel="prefetch" href="/assets/14-单元测试.html.8f113221.js"><link rel="prefetch" href="/assets/15-安全规约.html.eb2c57f4.js"><link rel="prefetch" href="/assets/16-建表规约.html.5916c17f.js"><link rel="prefetch" href="/assets/17-索引规约.html.cb5ce999.js"><link rel="prefetch" href="/assets/18-SQL语句.html.1700f3e4.js"><link rel="prefetch" href="/assets/19-ORM映射.html.66a6c2a0.js"><link rel="prefetch" href="/assets/20-应用分层.html.b213eda8.js"><link rel="prefetch" href="/assets/21-二方库依赖.html.36d8083c.js"><link rel="prefetch" href="/assets/22-服务器.html.54a98a94.js"><link rel="prefetch" href="/assets/23-设计规约.html.e8dd5d11.js"><link rel="prefetch" href="/assets/24-专有名词解释.html.a2eceb00.js"><link rel="prefetch" href="/assets/25-错误码列表.html.ad5511e8.js"><link rel="prefetch" href="/assets/手抄版.html.7673c2e6.js"><link rel="prefetch" href="/assets/综合.html.5c9e6804.js"><link rel="prefetch" href="/assets/HikariCP文档简译.html.1c91be7d.js"><link rel="prefetch" href="/assets/linux之如何清理磁盘空间.html.a44a5572.js"><link rel="prefetch" href="/assets/linux如何启动nginx.html.20cfd331.js"><link rel="prefetch" href="/assets/linux安装jdk8.html.114cf345.js"><link rel="prefetch" href="/assets/linux查看crontab任务执行情况.html.19e55921.js"><link rel="prefetch" href="/assets/安装yum.html.405de94f.js"><link rel="prefetch" href="/assets/Maven-Mirror配置.html.f90a0d42.js"><link rel="prefetch" href="/assets/MavenAssembly配置详细解释.html.05104faf.js"><link rel="prefetch" href="/assets/Maven发版名词介绍.html.2e89642b.js"><link rel="prefetch" href="/assets/POM文件中依赖的版本锁定.html.26a2f776.js"><link rel="prefetch" href="/assets/clean-compile-build-install-package.html.f0357f96.js"><link rel="prefetch" href="/assets/maven-assembly-plugin的使用.html.4660ced5.js"><link rel="prefetch" href="/assets/maven压缩解压使jar文件损坏.html.e9d4c6c6.js"><link rel="prefetch" href="/assets/maven打包去除版本号.html.61c2c3ec.js"><link rel="prefetch" href="/assets/maven打包重命名jar.html.6e861834.js"><link rel="prefetch" href="/assets/maven的dependency参数.html.d1a6d977.js"><link rel="prefetch" href="/assets/Gitee Pages自动部署.html.13d33a32.js"><link rel="prefetch" href="/assets/Git切换远程仓库.html.ae02814b.js"><link rel="prefetch" href="/assets/Mac的Mat打开失败解决方案.html.2f101643.js"><link rel="prefetch" href="/assets/MySQL不要再使用UTF-8了.html.98599b69.js"><link rel="prefetch" href="/assets/MySQL创建触发器.html.9121067c.js"><link rel="prefetch" href="/assets/MySQL字段类型.html.1f5eb008.js"><link rel="prefetch" href="/assets/java.sql.Types的具体对应值jdbcType.html.83a47d2f.js"><link rel="prefetch" href="/assets/sqlserver对应Java中的数据类型.html.4835352e.js"><link rel="prefetch" href="/assets/互联网术语.html.cc6e8ef8.js"><link rel="prefetch" href="/assets/什么是乐观锁_什么是悲观锁.html.08758091.js"><link rel="prefetch" href="/assets/大数据的4v.html.93e8234e.js"><link rel="prefetch" href="/assets/字体颜色工具.html.fba6f193.js"><link rel="prefetch" href="/assets/按位置读取ResultSet比按名称快.html.f12ffc21.js"><link rel="prefetch" href="/assets/无效的列索引.html.bd68e51c.js"><link rel="prefetch" href="/assets/普罗米修斯安装MAC版.html.42a181e1.js"><link rel="prefetch" href="/assets/深入HTTPS加解密原理.html.d1610297.js"><link rel="prefetch" href="/assets/编码和编码格式.html.e624af3c.js"><link rel="prefetch" href="/assets/聊聊HTTPS和SSL_TLS协议.html.9331609e.js"><link rel="prefetch" href="/assets/docker介绍.html.4c9c8ace.js"><link rel="prefetch" href="/assets/安装k8s.html.3a393ace.js"><link rel="prefetch" href="/assets/CAS底层原理.html.1ea842a1.js"><link rel="prefetch" href="/assets/Contended.html.aae79969.js"><link rel="prefetch" href="/assets/Java动态代理.html.d291b50b.js"><link rel="prefetch" href="/assets/从硬件层面理解memorybarrier.html.db8092b0.js"><link rel="prefetch" href="/assets/技术路线图.html.fb687e2f.js"><link rel="prefetch" href="/assets/磁盘原理介绍.html.baef1ada.js"><link rel="prefetch" href="/assets/类加载器.html.e59a5a66.js"><link rel="prefetch" href="/assets/锁.html.4256142b.js"><link rel="prefetch" href="/assets/哪些操作导致了上下文切换.html.d3536139.js"><link rel="prefetch" href="/assets/如何优化多线程上下文切换.html.00e6b096.js"><link rel="prefetch" href="/assets/如何用协程来优化多线程业务.html.607afd25.js"><link rel="prefetch" href="/assets/操作系统缓存.html.78cd9467.js"><link rel="prefetch" href="/assets/进程线程上下文切换会用掉你多少CPU.html.687153f4.js"><link rel="prefetch" href="/assets/security排查.html.2c03ae44.js"><link rel="prefetch" href="/assets/1innoDB 如何解决幻读.html.6d216335.js"><link rel="prefetch" href="/assets/1简单说一下 Mysql 的事务隔离级别.html.604e2e24.js"><link rel="prefetch" href="/assets/2MySQL行锁、临键锁、间隙锁.html.0c0d9198.js"><link rel="prefetch" href="/assets/3MySQL事务实现原理.html.c1e4c9c8.js"><link rel="prefetch" href="/assets/4Mysql 索引的优点和缺点.html.d644383b.js"><link rel="prefetch" href="/assets/5Mysql为什么使用B_Tree作为索引结构.html.0967fd00.js"><link rel="prefetch" href="/assets/6什么是聚集索引和非聚集索引.html.edaf6cd4.js"><link rel="prefetch" href="/assets/7索引什么时候失效.html.899acbef.js"><link rel="prefetch" href="/assets/Spring 中 BeanFactory 和 FactoryBean 的区别.html.c0bc7e20.js"><link rel="prefetch" href="/assets/如何理解 Spring Boot 中的 Starter.html.33b57937.js"><link rel="prefetch" href="/assets/谈谈你对 Spring IOC 和 DI 的理解.html.9d08d3bd.js"><link rel="prefetch" href="/assets/01谈谈你对Java平台的理解.html.bc79d76f.js"><link rel="prefetch" href="/assets/02Exception和Error有什么区别.html.f85bef08.js"><link rel="prefetch" href="/assets/03谈谈final-finally-finalize有什么不同.html.6c56d927.js"><link rel="prefetch" href="/assets/05String-StringBuffer-StringBuilder有什么区别.html.22a90d5b.js"><link rel="prefetch" href="/assets/1-两数之和.html.148a3d22.js"><link rel="prefetch" href="/assets/2-两数相加.html.f4a539ca.js"><link rel="prefetch" href="/assets/3-无重复字符的最长子串.html.fb0c076a.js"><link rel="prefetch" href="/assets/4-寻找两个有序数组的中位数.html.0c082032.js"><link rel="prefetch" href="/assets/5-最长回文子串.html.07da3ddb.js"><link rel="prefetch" href="/assets/6-Z字形变换.html.cb6c994f.js"><link rel="prefetch" href="/assets/sfxc.html.60bdf7c8.js"><link rel="prefetch" href="/assets/刷二叉搜索树.html.85f2100f.js"><link rel="prefetch" href="/assets/刷平衡二叉树.html.df1e7114.js"><link rel="prefetch" href="/assets/动态规划详解.html.724111ff.js"><link rel="prefetch" href="/assets/回溯算法详解.html.8886ac24.js"><link rel="prefetch" href="/assets/学习算法和刷题的思路指南.html.972aa833.js"><link rel="prefetch" href="/assets/带你刷二叉树.html.b40a3a0d.js"><link rel="prefetch" href="/assets/1Spring的整体架构.html.87c5eff3.js"><link rel="prefetch" href="/assets/2Spring的结构组成.html.ce708588.js"><link rel="prefetch" href="/assets/3容器的基础XmlBeanFactory.html.3d6a959f.js"><link rel="prefetch" href="/assets/4Spring中的FactoryBean.html.0f5378cb.js"><link rel="prefetch" href="/assets/01-冯·诺依曼体系结构.html.b931ee40.js"><link rel="prefetch" href="/assets/02-计算机组成原理应该这么学.html.604a8f5f.js"><link rel="prefetch" href="/assets/03-我们来谈谈性能究竟是什么.html.6d86c145.js"><link rel="prefetch" href="/assets/04-我们该从哪些方面提升性能.html.746e26cb.js"><link rel="prefetch" href="/assets/深入浅出计算机组成原理.html.1d6ac107.js"><link rel="prefetch" href="/assets/01-记忆宫殿的起源.html.c7cdf424.js"><link rel="prefetch" href="/assets/02-记忆宫殿的原理.html.4cca080f.js"><link rel="prefetch" href="/assets/03-记忆宫殿速记体验.html.5391b611.js"><link rel="prefetch" href="/assets/04-机械记忆.html.1f858782.js"><link rel="prefetch" href="/assets/05-逻辑记忆.html.2e2a8fe2.js"><link rel="prefetch" href="/assets/06-图像记忆.html.c92291ca.js"><link rel="prefetch" href="/assets/07-代替法.html.91a1a1ed.js"><link rel="prefetch" href="/assets/08-记忆术起点锁链法.html.236b6c3e.js"><link rel="prefetch" href="/assets/09-固定法.html.8bd9e86e.js"><link rel="prefetch" href="/assets/10-固定法之记忆力测试.html.4f7064c1.js"><link rel="prefetch" href="/assets/11-固定法之地点桩记忆体验.html.20bcc10b.js"><link rel="prefetch" href="/assets/12-固定法之千位数字定位系统.html.60822990.js"><link rel="prefetch" href="/assets/13-固定法之记忆宫殿实战.html.e198c2b1.js"><link rel="prefetch" href="/assets/14-记忆的宏观理论.html.5e1d58bb.js"><link rel="prefetch" href="/assets/15-视觉图像是一切记忆的基础.html.13cb2a26.js"><link rel="prefetch" href="/assets/16-快速记忆的秘密.html.9e0fc3d6.js"><link rel="prefetch" href="/assets/17-什么是联想.html.456ea1d8.js"><link rel="prefetch" href="/assets/18-记忆思维的演变.html.ffbf2933.js"><link rel="prefetch" href="/assets/19-记忆术基本功发散训练.html.492ad793.js"><link rel="prefetch" href="/assets/20-联结的技巧.html.e4d0a604.js"><link rel="prefetch" href="/assets/21-记忆术基本功之逻辑联想法.html.d8d8ec1c.js"><link rel="prefetch" href="/assets/22-记忆术基本功之逻辑推理记忆信息.html.a9d6221e.js"><link rel="prefetch" href="/assets/23-记忆术基本功之故事法.html.61bdf53c.js"><link rel="prefetch" href="/assets/24-记忆术基础训练抽象词汇串联.html.a8f0d741.js"><link rel="prefetch" href="/assets/25-记忆术之词性串联训练.html.28edb592.js"><link rel="prefetch" href="/assets/26-记忆术基本功之归纳简化.html.1b7c825c.js"><link rel="prefetch" href="/assets/27-口诀记忆.html.bb1397e7.js"><link rel="prefetch" href="/assets/28-绘图记忆法.html.20fc2452.js"><link rel="prefetch" href="/assets/29-比喻记忆法.html.14c703fd.js"><link rel="prefetch" href="/assets/30-内视觉出图七要素.html.824653d8.js"><link rel="prefetch" href="/assets/31-创造和加工图像.html.a02e56c4.js"><link rel="prefetch" href="/assets/32-万物皆桩.html.49939956.js"><link rel="prefetch" href="/assets/33-一对一联结训练.html.21866a58.js"><link rel="prefetch" href="/assets/34-记忆初级万能公式.html.e9d5c3e2.js"><link rel="prefetch" href="/assets/35-记忆术的两种核心技巧谐音和逻辑.html.87f23aa9.js"><link rel="prefetch" href="/assets/36-关键词记忆法.html.55c73b6a.js"><link rel="prefetch" href="/assets/37-如何集中注意力.html.6510c391.js"><link rel="prefetch" href="/assets/38-视觉化的窍门.html.7948a5f7.js"><link rel="prefetch" href="/assets/39-意群的逻辑图像转化.html.62b7724f.js"><link rel="prefetch" href="/assets/40-意群图像记忆的步骤.html.b884256f.js"><link rel="prefetch" href="/assets/41-文字编码库.html.90fea43f.js"><link rel="prefetch" href="/assets/42-现实记忆宫殿.html.ed5f8c60.js"><link rel="prefetch" href="/assets/43-虚拟记忆宫殿.html.ff9d83ae.js"><link rel="prefetch" href="/assets/44-随机记忆宫殿.html.69aff499.js"><link rel="prefetch" href="/assets/45-记忆宫殿之人物系统.html.abffa47c.js"><link rel="prefetch" href="/assets/46-五种方法记单词.html.0d2a0353.js"><link rel="prefetch" href="/assets/1简述一下你对线程池的理解.html.6817f514.js"><link rel="prefetch" href="/assets/2线程池如何知道一个线程的任务已经执 行完成.html.b91df263.js"><link rel="prefetch" href="/assets/3Java 官方提供了哪几种线程池，分别有 什么特点？.html.3fdf85db.js"><link rel="prefetch" href="/assets/0怎么理解线程安全.html.af9399fa.js"><link rel="prefetch" href="/assets/1ConcurrentHashMap 底层具体实现.html.15e588ec.js"><link rel="prefetch" href="/assets/2谈一下 CAS 机制.html.3f6e9a68.js"><link rel="prefetch" href="/assets/3谈谈 AQS 是怎么回事.html.120fc2b8.js"><link rel="prefetch" href="/assets/4ReentrantLock 是如何实现锁公平和非 公平性的.html.7a8015ab.js"><link rel="prefetch" href="/assets/DCL 单例模式设计为什么需要 volatile 修饰实例对象.html.4e741010.js"><link rel="prefetch" href="/assets/SimpleDateFormat 是线程安全的吗.html.80803128.js"><link rel="prefetch" href="/assets/wait 和 sleep 是否会触发锁的释放以及 CPU 资源的释放.html.4ae02600.js"><link rel="prefetch" href="/assets/一个线程两次调用 start()，会出现什 么问题.html.bfcf59d7.js"><link rel="prefetch" href="/assets/404.html.ebf25b44.js"><link rel="prefetch" href="/assets/index.html.2e0b4132.js"><link rel="prefetch" href="/assets/index.html.c36f22c4.js"><link rel="prefetch" href="/assets/index.html.66f2a5c9.js"><link rel="prefetch" href="/assets/index.html.6d501d9d.js"><link rel="prefetch" href="/assets/index.html.5de2e56d.js"><link rel="prefetch" href="/assets/index.html.72905fb5.js"><link rel="prefetch" href="/assets/index.html.2a314b55.js"><link rel="prefetch" href="/assets/index.html.6f1fe3f6.js"><link rel="prefetch" href="/assets/index.html.e4619cbd.js"><link rel="prefetch" href="/assets/index.html.c8d14614.js"><link rel="prefetch" href="/assets/index.html.44e40c7d.js"><link rel="prefetch" href="/assets/index.html.db8ea907.js"><link rel="prefetch" href="/assets/index.html.9eaa2298.js"><link rel="prefetch" href="/assets/index.html.a2fa5af7.js"><link rel="prefetch" href="/assets/index.html.bb15c424.js"><link rel="prefetch" href="/assets/index.html.0d05725d.js"><link rel="prefetch" href="/assets/index.html.4eaac003.js"><link rel="prefetch" href="/assets/index.html.59d21196.js"><link rel="prefetch" href="/assets/index.html.f3a717f9.js"><link rel="prefetch" href="/assets/index.html.45b79d3a.js"><link rel="prefetch" href="/assets/index.html.c2e82826.js"><link rel="prefetch" href="/assets/index.html.efd5d7be.js"><link rel="prefetch" href="/assets/index.html.aaeb789f.js"><link rel="prefetch" href="/assets/index.html.3d51cf46.js"><link rel="prefetch" href="/assets/index.html.b94ffc24.js"><link rel="prefetch" href="/assets/index.html.a7ed61b6.js"><link rel="prefetch" href="/assets/index.html.6d0aa9c2.js"><link rel="prefetch" href="/assets/index.html.a9b8fd24.js"><link rel="prefetch" href="/assets/index.html.88d67a57.js"><link rel="prefetch" href="/assets/index.html.27492764.js"><link rel="prefetch" href="/assets/index.html.b9d31689.js"><link rel="prefetch" href="/assets/index.html.aafecb06.js"><link rel="prefetch" href="/assets/index.html.e439dcec.js"><link rel="prefetch" href="/assets/index.html.12614e6e.js"><link rel="prefetch" href="/assets/index.html.1b6d1b29.js"><link rel="prefetch" href="/assets/index.html.d18333bc.js"><link rel="prefetch" href="/assets/index.html.003623a2.js"><link rel="prefetch" href="/assets/index.html.d35c0591.js"><link rel="prefetch" href="/assets/001-编译NIFI源码.html.80ec433a.js"><link rel="prefetch" href="/assets/002-NIFI自定义开发规范.html.e90b95ec.js"><link rel="prefetch" href="/assets/003-Processor的一些方法.html.7aafc335.js"><link rel="prefetch" href="/assets/004-自定义Processor.html.07a9a1c4.js"><link rel="prefetch" href="/assets/005-自定义ExpressionLanguage.html.52349c4e.js"><link rel="prefetch" href="/assets/006-NIFI启动源码.html.a45bdcdb.js"><link rel="prefetch" href="/assets/007-在HTTP模式下开启权限模块.html.8340811a.js"><link rel="prefetch" href="/assets/008-JettyServer源码.html.c0405556.js"><link rel="prefetch" href="/assets/009-NiFi源码.html.f56b2a0c.js"><link rel="prefetch" href="/assets/010-nifi注解.html.593392af.js"><link rel="prefetch" href="/assets/011-Debezium详细嵌入NIFI.html.1d9c777d.js"><link rel="prefetch" href="/assets/RunNiFi源码.html.b29fc617.js"><link rel="prefetch" href="/assets/nifi-env-sh.html.c7d00d8b.js"><link rel="prefetch" href="/assets/nifi-sh-start.html.907d24b0.js"><link rel="prefetch" href="/assets/nifi-sh.html.e4982064.js"><link rel="prefetch" href="/assets/000-ApacheNIFI历史.html.e75788bc.js"><link rel="prefetch" href="/assets/001-NiFi术语.html.28e29f2e.js"><link rel="prefetch" href="/assets/002-带你体验ApacheNIFI.html.6ebc9329.js"><link rel="prefetch" href="/assets/003-NIFI入门.html.c50e00e4.js"><link rel="prefetch" href="/assets/004-数据抽取的常见方法.html.ce7edb50.js"><link rel="prefetch" href="/assets/005-基于增量字段同步数据.html.3cc71bfa.js"><link rel="prefetch" href="/assets/006-NIFI各个NAR包功能概述.html.0962770d.js"><link rel="prefetch" href="/assets/007-Nar包加载机制源码解读.html.88564f87.js"><link rel="prefetch" href="/assets/008-Nar包下的MANIFEST.MF.html.4c977db9.js"><link rel="prefetch" href="/assets/009-Apache NIFI类资源隔离机制.html.ea309ff6.js"><link rel="prefetch" href="/assets/010-Apache NIFI Processor情况.html.d8f2d1d6.js"><link rel="prefetch" href="/assets/011-理解connection.html.407c3819.js"><link rel="prefetch" href="/assets/012-理解maxThread设置.html.060d1f81.js"><link rel="prefetch" href="/assets/013-RunDuration理解.html.cc6add3b.js"><link rel="prefetch" href="/assets/014-ContentRepositoryArchiving理解.html.19d24d81.js"><link rel="prefetch" href="/assets/015-Controller Services是守护进程.html.11475108.js"><link rel="prefetch" href="/assets/016-NIFI调度.html.17475e25.js"><link rel="prefetch" href="/assets/017-NIFI高可用.html.3dfa7841.js"><link rel="prefetch" href="/assets/018-通过配置优化NiFi性能.html.e2a103d7.js"><link rel="prefetch" href="/assets/019-NIFI里的数据库连接池.html.d818b439.js"><link rel="prefetch" href="/assets/020-为什么建议使用NIFI里的Record.html.8ab19970.js"><link rel="prefetch" href="/assets/021-NIFI贡献代码.html.cbf5b8de.js"><link rel="prefetch" href="/assets/022-NIFI开启HTTPS.html.27217983.js"><link rel="prefetch" href="/assets/023-ExecuteScript脚本教程.html.519c0e81.js"><link rel="prefetch" href="/assets/024-内容存储库原理.html.db9d4fec.js"><link rel="prefetch" href="/assets/025-FlowFile存储库原理.html.d816825e.js"><link rel="prefetch" href="/assets/026-预写日志(WAL).html.a6baaa8d.js"><link rel="prefetch" href="/assets/027-Provenance存储库原理.html.44a9ed4d.js"><link rel="prefetch" href="/assets/028-NIFI架构.html.ee312cce.js"><link rel="prefetch" href="/assets/029-NIFI事务原理.html.95142daf.js"><link rel="prefetch" href="/assets/030-数据库字段类型.html.11ae692f.js"><link rel="prefetch" href="/assets/031-1.14.html.cd843d87.js"><link rel="prefetch" href="/assets/032-CaptureChangeMySQL.html.6c483c98.js"><link rel="prefetch" href="/assets/033-流程告警.html.82c9632a.js"><link rel="prefetch" href="/assets/034-JWT.html.674d3912.js"><link rel="prefetch" href="/assets/037-MySQL全字段测试.html.6013c6f9.js"><link rel="prefetch" href="/assets/01-输入输出流.html.22527688.js"><link rel="prefetch" href="/assets/02-File.html.5b6656cb.js"><link rel="prefetch" href="/assets/03-缓冲流BufferedInputStream与BufferedOutputStream.html.49c344e9.js"><link rel="prefetch" href="/assets/04-缓冲流BufferedReader与BufferedWriter.html.d398e3a8.js"><link rel="prefetch" href="/assets/05-转换流InputStreamReader与OutputStreamWriter.html.afcda8ba.js"><link rel="prefetch" href="/assets/06-ByteArrayInputStream与ByteArrayOutputStream.html.f6a54112.js"><link rel="prefetch" href="/assets/07-CommonsIO2.5-FileUtils.html.e7dcaacf.js"><link rel="prefetch" href="/assets/ByteArrayOutputStream.html.cb4897db.js"><link rel="prefetch" href="/assets/Java SPI机制.html.aca35f1b.js"><link rel="prefetch" href="/assets/Java8_JVM内存模型.html.5b1d5dbf.js"><link rel="prefetch" href="/assets/Java中atomic包中的原子操作类总结.html.939d24fe.js"><link rel="prefetch" href="/assets/Java中的锁.html.c2677419.js"><link rel="prefetch" href="/assets/Java内存模型原理.html.f704cd1f.js"><link rel="prefetch" href="/assets/Java反射.html.2476927c.js"><link rel="prefetch" href="/assets/Java导入语句中不宜使用通配符.html.5c0498ad.js"><link rel="prefetch" href="/assets/Java类加载器.html.dc50e746.js"><link rel="prefetch" href="/assets/Java里带标签的break和continue.html.3a23691a.js"><link rel="prefetch" href="/assets/Jvm-dump-jstack-jmap-jstat.html.8802d161.js"><link rel="prefetch" href="/assets/java注解.html.fcd95189.js"><link rel="prefetch" href="/assets/web的发展历史.html.193df572.js"><link rel="prefetch" href="/assets/代码设计原理.html.139fc7eb.js"><link rel="prefetch" href="/assets/使用List.html.2f4552fd.js"><link rel="prefetch" href="/assets/偏向锁批量重偏向与批量撤销.html.c32d3889.js"><link rel="prefetch" href="/assets/到底什么是classpath.html.8f8d648b.js"><link rel="prefetch" href="/assets/动手体验JVM中Class对象的唯一性.html.03895a5f.js"><link rel="prefetch" href="/assets/多线程基础知识总结.html.5b3e7c9a.js"><link rel="prefetch" href="/assets/打印Java对象头.html.cb7de361.js"><link rel="prefetch" href="/assets/深入了解Java锁.html.7299bf05.js"><link rel="prefetch" href="/assets/相对路径与绝对路径去读取文件.html.8f3a17f0.js"><link rel="prefetch" href="/assets/类加载机制.html.e28a4f48.js"><link rel="prefetch" href="/assets/线程通信.html.903d2665.js"><link rel="prefetch" href="/assets/让你彻底理解Synchronized.html.f40d36d7.js"><link rel="prefetch" href="/assets/JsonJolt教程.html.97fc4940.js"><link rel="prefetch" href="/assets/JsonJolt教程英文版.html.b960dfd3.js"><link rel="prefetch" href="/assets/使用jolt替换值.html.6121bc70.js"><link rel="prefetch" href="/assets/001Spring基础知识.html.7e85fe8f.js"><link rel="prefetch" href="/assets/002Bean定义常见错误.html.caf96802.js"><link rel="prefetch" href="/assets/003依赖注入常见错误上.html.0f7be454.js"><link rel="prefetch" href="/assets/004依赖注入常见错误下.html.671f9284.js"><link rel="prefetch" href="/assets/005Bean生命周期常见错误.html.e7938875.js"><link rel="prefetch" href="/assets/intro.html.58f57861.js"><link rel="prefetch" href="/assets/qq.html.71c63e26.js"><link rel="prefetch" href="/assets/wechat.html.daa7cc30.js"><link rel="prefetch" href="/assets/001-管理OracleRedoLog.html.688597ba.js"><link rel="prefetch" href="/assets/BIT的字节序.html.b0f0814b.js"><link rel="prefetch" href="/assets/Oracle12cLogMiner分析Redo日志文件.html.7ed2878e.js"><link rel="prefetch" href="/assets/基于水印的CDC框架.html.9ab85b2b.js"><link rel="prefetch" href="/assets/01-进程与线程基本概念.html.291c4809.js"><link rel="prefetch" href="/assets/02-Java多线程入门类和接口.html.3ca5bd3c.js"><link rel="prefetch" href="/assets/03-线程组和线程优先级.html.c4d99fc2.js"><link rel="prefetch" href="/assets/04-Java线程的状态及主要转化方法.html.409cc64d.js"><link rel="prefetch" href="/assets/05-Java线程间的通信.html.70a2c6bb.js"><link rel="prefetch" href="/assets/06-Java内存模型基础知识.html.9c70ac91.js"><link rel="prefetch" href="/assets/07-重排序与happens-before.html.5b84f5f8.js"><link rel="prefetch" href="/assets/08-volatitle.html.bf5748f6.js"><link rel="prefetch" href="/assets/09-synchronized与锁.html.2f3e774b.js"><link rel="prefetch" href="/assets/10-CAS与原子操作.html.9c438690.js"><link rel="prefetch" href="/assets/11-AQS.html.20d260a2.js"><link rel="prefetch" href="/assets/12-线程池原理.html.8a7e3225.js"><link rel="prefetch" href="/assets/13-阻塞队列.html.2ea8e872.js"><link rel="prefetch" href="/assets/14-锁接口和类.html.22b7b132.js"><link rel="prefetch" href="/assets/15-并发容器集合.html.b39f7140.js"><link rel="prefetch" href="/assets/16-CopyOnWrite容器.html.1360d191.js"><link rel="prefetch" href="/assets/17-通信工具类.html.3cb728d6.js"><link rel="prefetch" href="/assets/18-Fork_Join框架.html.d8b9b111.js"><link rel="prefetch" href="/assets/19-Java8Stream并行计算原理.html.a108311b.js"><link rel="prefetch" href="/assets/20-计划任务.html.13338662.js"><link rel="prefetch" href="/assets/深入浅出Java多线程.html.c2c327f5.js"><link rel="prefetch" href="/assets/sf.html.59bd64f3.js"><link rel="prefetch" href="/assets/二叉搜索树的前驱和后继节点.html.d06afedd.js"><link rel="prefetch" href="/assets/什么是红黑树.html.679b87e1.js"><link rel="prefetch" href="/assets/冒泡排序.html.3e121f12.js"><link rel="prefetch" href="/assets/十大经典排序算法最强总结.html.036e5ad3.js"><link rel="prefetch" href="/assets/基于Java实现红黑树的基本操作.html.ad6b0a81.js"><link rel="prefetch" href="/assets/并查集.html.cd6d0c5a.js"><link rel="prefetch" href="/assets/01-命名风格.html.0a9c79c5.js"><link rel="prefetch" href="/assets/02-常量定义.html.83350231.js"><link rel="prefetch" href="/assets/03-代码格式.html.4678e0fe.js"><link rel="prefetch" href="/assets/04-OOP规约.html.84df3e26.js"><link rel="prefetch" href="/assets/05-日期时间.html.05f80703.js"><link rel="prefetch" href="/assets/06-集合处理.html.a561f5bf.js"><link rel="prefetch" href="/assets/07-并发处理.html.303819e4.js"><link rel="prefetch" href="/assets/08-控制语句.html.114509cc.js"><link rel="prefetch" href="/assets/09-注释规约.html.3bdb710c.js"><link rel="prefetch" href="/assets/10-其它.html.4c2834db.js"><link rel="prefetch" href="/assets/11-错误码.html.169b45c9.js"><link rel="prefetch" href="/assets/12-异常处理.html.e6007482.js"><link rel="prefetch" href="/assets/13-日志规约.html.fec97b00.js"><link rel="prefetch" href="/assets/14-单元测试.html.fbc4a5bf.js"><link rel="prefetch" href="/assets/15-安全规约.html.6144a16a.js"><link rel="prefetch" href="/assets/16-建表规约.html.a1b5af8f.js"><link rel="prefetch" href="/assets/17-索引规约.html.311c82f1.js"><link rel="prefetch" href="/assets/18-SQL语句.html.62d2fa2f.js"><link rel="prefetch" href="/assets/19-ORM映射.html.a2d5ea0d.js"><link rel="prefetch" href="/assets/20-应用分层.html.80021f2c.js"><link rel="prefetch" href="/assets/21-二方库依赖.html.58aa6ec3.js"><link rel="prefetch" href="/assets/22-服务器.html.e64030f4.js"><link rel="prefetch" href="/assets/23-设计规约.html.3ad0ae60.js"><link rel="prefetch" href="/assets/24-专有名词解释.html.26db68ed.js"><link rel="prefetch" href="/assets/25-错误码列表.html.57305f5e.js"><link rel="prefetch" href="/assets/手抄版.html.87538c25.js"><link rel="prefetch" href="/assets/综合.html.b52b5b3b.js"><link rel="prefetch" href="/assets/HikariCP文档简译.html.a63836b1.js"><link rel="prefetch" href="/assets/linux之如何清理磁盘空间.html.171ce7c4.js"><link rel="prefetch" href="/assets/linux如何启动nginx.html.0cd59b4d.js"><link rel="prefetch" href="/assets/linux安装jdk8.html.a847bcae.js"><link rel="prefetch" href="/assets/linux查看crontab任务执行情况.html.95c7a3e1.js"><link rel="prefetch" href="/assets/安装yum.html.a1b6ba75.js"><link rel="prefetch" href="/assets/Maven-Mirror配置.html.5db93e1e.js"><link rel="prefetch" href="/assets/MavenAssembly配置详细解释.html.f72077c5.js"><link rel="prefetch" href="/assets/Maven发版名词介绍.html.b835e2a9.js"><link rel="prefetch" href="/assets/POM文件中依赖的版本锁定.html.ffe088f5.js"><link rel="prefetch" href="/assets/clean-compile-build-install-package.html.dbc41b69.js"><link rel="prefetch" href="/assets/maven-assembly-plugin的使用.html.982d28c7.js"><link rel="prefetch" href="/assets/maven压缩解压使jar文件损坏.html.cc49194f.js"><link rel="prefetch" href="/assets/maven打包去除版本号.html.8ecb7265.js"><link rel="prefetch" href="/assets/maven打包重命名jar.html.ff32f0ea.js"><link rel="prefetch" href="/assets/maven的dependency参数.html.7ad13cf9.js"><link rel="prefetch" href="/assets/Gitee Pages自动部署.html.062d95a7.js"><link rel="prefetch" href="/assets/Git切换远程仓库.html.40c4bdc0.js"><link rel="prefetch" href="/assets/Mac的Mat打开失败解决方案.html.3e60515b.js"><link rel="prefetch" href="/assets/MySQL不要再使用UTF-8了.html.c23e400a.js"><link rel="prefetch" href="/assets/MySQL创建触发器.html.c9d3df34.js"><link rel="prefetch" href="/assets/MySQL字段类型.html.afe0b083.js"><link rel="prefetch" href="/assets/java.sql.Types的具体对应值jdbcType.html.7e47a4c4.js"><link rel="prefetch" href="/assets/sqlserver对应Java中的数据类型.html.67a0011c.js"><link rel="prefetch" href="/assets/互联网术语.html.5c837097.js"><link rel="prefetch" href="/assets/什么是乐观锁_什么是悲观锁.html.943dbe21.js"><link rel="prefetch" href="/assets/大数据的4v.html.67b7b118.js"><link rel="prefetch" href="/assets/字体颜色工具.html.0942198d.js"><link rel="prefetch" href="/assets/按位置读取ResultSet比按名称快.html.7989a9ec.js"><link rel="prefetch" href="/assets/无效的列索引.html.0def8bf0.js"><link rel="prefetch" href="/assets/普罗米修斯安装MAC版.html.753755b5.js"><link rel="prefetch" href="/assets/深入HTTPS加解密原理.html.17eb1ed9.js"><link rel="prefetch" href="/assets/编码和编码格式.html.275c2331.js"><link rel="prefetch" href="/assets/聊聊HTTPS和SSL_TLS协议.html.e3c7b594.js"><link rel="prefetch" href="/assets/docker介绍.html.bfc46e74.js"><link rel="prefetch" href="/assets/安装k8s.html.cad0e0b6.js"><link rel="prefetch" href="/assets/CAS底层原理.html.2dea41ce.js"><link rel="prefetch" href="/assets/Contended.html.2adf75eb.js"><link rel="prefetch" href="/assets/Java动态代理.html.bb0da948.js"><link rel="prefetch" href="/assets/从硬件层面理解memorybarrier.html.5031b1a1.js"><link rel="prefetch" href="/assets/技术路线图.html.26b0e7f7.js"><link rel="prefetch" href="/assets/磁盘原理介绍.html.a06752ac.js"><link rel="prefetch" href="/assets/类加载器.html.c8d8c9fd.js"><link rel="prefetch" href="/assets/锁.html.0b8e7d61.js"><link rel="prefetch" href="/assets/哪些操作导致了上下文切换.html.d9fc9a28.js"><link rel="prefetch" href="/assets/如何优化多线程上下文切换.html.7301ec49.js"><link rel="prefetch" href="/assets/如何用协程来优化多线程业务.html.bbe5aa98.js"><link rel="prefetch" href="/assets/操作系统缓存.html.30335371.js"><link rel="prefetch" href="/assets/进程线程上下文切换会用掉你多少CPU.html.f8faefd4.js"><link rel="prefetch" href="/assets/security排查.html.6b848b34.js"><link rel="prefetch" href="/assets/1innoDB 如何解决幻读.html.1f05f6c7.js"><link rel="prefetch" href="/assets/1简单说一下 Mysql 的事务隔离级别.html.161ea6d1.js"><link rel="prefetch" href="/assets/2MySQL行锁、临键锁、间隙锁.html.4327756b.js"><link rel="prefetch" href="/assets/3MySQL事务实现原理.html.ca4fbbf4.js"><link rel="prefetch" href="/assets/4Mysql 索引的优点和缺点.html.4e0a7ace.js"><link rel="prefetch" href="/assets/5Mysql为什么使用B_Tree作为索引结构.html.ebc6e586.js"><link rel="prefetch" href="/assets/6什么是聚集索引和非聚集索引.html.8527ca0a.js"><link rel="prefetch" href="/assets/7索引什么时候失效.html.9488e478.js"><link rel="prefetch" href="/assets/Spring 中 BeanFactory 和 FactoryBean 的区别.html.0ed58684.js"><link rel="prefetch" href="/assets/如何理解 Spring Boot 中的 Starter.html.18431bff.js"><link rel="prefetch" href="/assets/谈谈你对 Spring IOC 和 DI 的理解.html.e381b371.js"><link rel="prefetch" href="/assets/01谈谈你对Java平台的理解.html.b5baf6cc.js"><link rel="prefetch" href="/assets/02Exception和Error有什么区别.html.daa61d89.js"><link rel="prefetch" href="/assets/03谈谈final-finally-finalize有什么不同.html.79da6007.js"><link rel="prefetch" href="/assets/05String-StringBuffer-StringBuilder有什么区别.html.1fba0ced.js"><link rel="prefetch" href="/assets/1-两数之和.html.61de8cdd.js"><link rel="prefetch" href="/assets/2-两数相加.html.d2a254c4.js"><link rel="prefetch" href="/assets/3-无重复字符的最长子串.html.b3009cb0.js"><link rel="prefetch" href="/assets/4-寻找两个有序数组的中位数.html.fffadd5d.js"><link rel="prefetch" href="/assets/5-最长回文子串.html.d153c6c1.js"><link rel="prefetch" href="/assets/6-Z字形变换.html.f90ca812.js"><link rel="prefetch" href="/assets/sfxc.html.13afeeca.js"><link rel="prefetch" href="/assets/刷二叉搜索树.html.15427557.js"><link rel="prefetch" href="/assets/刷平衡二叉树.html.115d64ff.js"><link rel="prefetch" href="/assets/动态规划详解.html.c27332da.js"><link rel="prefetch" href="/assets/回溯算法详解.html.6d2d7d4b.js"><link rel="prefetch" href="/assets/学习算法和刷题的思路指南.html.a185c8ea.js"><link rel="prefetch" href="/assets/带你刷二叉树.html.d032b2f3.js"><link rel="prefetch" href="/assets/1Spring的整体架构.html.7736b3e3.js"><link rel="prefetch" href="/assets/2Spring的结构组成.html.1588112c.js"><link rel="prefetch" href="/assets/3容器的基础XmlBeanFactory.html.a293c00f.js"><link rel="prefetch" href="/assets/4Spring中的FactoryBean.html.f891410e.js"><link rel="prefetch" href="/assets/01-冯·诺依曼体系结构.html.3f3cc644.js"><link rel="prefetch" href="/assets/02-计算机组成原理应该这么学.html.5cc0d956.js"><link rel="prefetch" href="/assets/03-我们来谈谈性能究竟是什么.html.f093c5bd.js"><link rel="prefetch" href="/assets/04-我们该从哪些方面提升性能.html.75e0bb1a.js"><link rel="prefetch" href="/assets/深入浅出计算机组成原理.html.b217209c.js"><link rel="prefetch" href="/assets/01-记忆宫殿的起源.html.e213df77.js"><link rel="prefetch" href="/assets/02-记忆宫殿的原理.html.5c6620a0.js"><link rel="prefetch" href="/assets/03-记忆宫殿速记体验.html.282b9d23.js"><link rel="prefetch" href="/assets/04-机械记忆.html.bc0ddc96.js"><link rel="prefetch" href="/assets/05-逻辑记忆.html.62c08283.js"><link rel="prefetch" href="/assets/06-图像记忆.html.d8d6762b.js"><link rel="prefetch" href="/assets/07-代替法.html.ca0857a9.js"><link rel="prefetch" href="/assets/08-记忆术起点锁链法.html.0daa8274.js"><link rel="prefetch" href="/assets/09-固定法.html.9eb98337.js"><link rel="prefetch" href="/assets/10-固定法之记忆力测试.html.7a578944.js"><link rel="prefetch" href="/assets/11-固定法之地点桩记忆体验.html.ede75160.js"><link rel="prefetch" href="/assets/12-固定法之千位数字定位系统.html.1332c75b.js"><link rel="prefetch" href="/assets/13-固定法之记忆宫殿实战.html.47e30dca.js"><link rel="prefetch" href="/assets/14-记忆的宏观理论.html.baf2b836.js"><link rel="prefetch" href="/assets/15-视觉图像是一切记忆的基础.html.3de5b62f.js"><link rel="prefetch" href="/assets/16-快速记忆的秘密.html.3b10f85e.js"><link rel="prefetch" href="/assets/17-什么是联想.html.5586b672.js"><link rel="prefetch" href="/assets/18-记忆思维的演变.html.c3774dbd.js"><link rel="prefetch" href="/assets/19-记忆术基本功发散训练.html.aac7d683.js"><link rel="prefetch" href="/assets/20-联结的技巧.html.7cb782ee.js"><link rel="prefetch" href="/assets/21-记忆术基本功之逻辑联想法.html.0dbdbc34.js"><link rel="prefetch" href="/assets/22-记忆术基本功之逻辑推理记忆信息.html.8d754313.js"><link rel="prefetch" href="/assets/23-记忆术基本功之故事法.html.ef97f34d.js"><link rel="prefetch" href="/assets/24-记忆术基础训练抽象词汇串联.html.3d8ad373.js"><link rel="prefetch" href="/assets/25-记忆术之词性串联训练.html.4711a891.js"><link rel="prefetch" href="/assets/26-记忆术基本功之归纳简化.html.e6bdc38f.js"><link rel="prefetch" href="/assets/27-口诀记忆.html.aff4c244.js"><link rel="prefetch" href="/assets/28-绘图记忆法.html.a5d46859.js"><link rel="prefetch" href="/assets/29-比喻记忆法.html.8c3c7ffe.js"><link rel="prefetch" href="/assets/30-内视觉出图七要素.html.bb3211f6.js"><link rel="prefetch" href="/assets/31-创造和加工图像.html.2b4af3f0.js"><link rel="prefetch" href="/assets/32-万物皆桩.html.9543cf05.js"><link rel="prefetch" href="/assets/33-一对一联结训练.html.e2427b2b.js"><link rel="prefetch" href="/assets/34-记忆初级万能公式.html.79fb16b9.js"><link rel="prefetch" href="/assets/35-记忆术的两种核心技巧谐音和逻辑.html.0f854b87.js"><link rel="prefetch" href="/assets/36-关键词记忆法.html.b1d770a1.js"><link rel="prefetch" href="/assets/37-如何集中注意力.html.d0be9865.js"><link rel="prefetch" href="/assets/38-视觉化的窍门.html.8d364261.js"><link rel="prefetch" href="/assets/39-意群的逻辑图像转化.html.e31e4511.js"><link rel="prefetch" href="/assets/40-意群图像记忆的步骤.html.4250bbbf.js"><link rel="prefetch" href="/assets/41-文字编码库.html.4ded01b4.js"><link rel="prefetch" href="/assets/42-现实记忆宫殿.html.50304942.js"><link rel="prefetch" href="/assets/43-虚拟记忆宫殿.html.42bb5a3c.js"><link rel="prefetch" href="/assets/44-随机记忆宫殿.html.875b2c63.js"><link rel="prefetch" href="/assets/45-记忆宫殿之人物系统.html.54a9a8c7.js"><link rel="prefetch" href="/assets/46-五种方法记单词.html.286f13da.js"><link rel="prefetch" href="/assets/1简述一下你对线程池的理解.html.f2192bb4.js"><link rel="prefetch" href="/assets/2线程池如何知道一个线程的任务已经执 行完成.html.fe26d7a7.js"><link rel="prefetch" href="/assets/3Java 官方提供了哪几种线程池，分别有 什么特点？.html.38c44650.js"><link rel="prefetch" href="/assets/0怎么理解线程安全.html.27781d10.js"><link rel="prefetch" href="/assets/1ConcurrentHashMap 底层具体实现.html.2580c161.js"><link rel="prefetch" href="/assets/2谈一下 CAS 机制.html.ef22db2c.js"><link rel="prefetch" href="/assets/3谈谈 AQS 是怎么回事.html.af3bf30e.js"><link rel="prefetch" href="/assets/4ReentrantLock 是如何实现锁公平和非 公平性的.html.52ef7035.js"><link rel="prefetch" href="/assets/DCL 单例模式设计为什么需要 volatile 修饰实例对象.html.15201490.js"><link rel="prefetch" href="/assets/SimpleDateFormat 是线程安全的吗.html.74b5d1c4.js"><link rel="prefetch" href="/assets/wait 和 sleep 是否会触发锁的释放以及 CPU 资源的释放.html.d04a24f9.js"><link rel="prefetch" href="/assets/一个线程两次调用 start()，会出现什 么问题.html.345156de.js"><link rel="prefetch" href="/assets/404.html.a27f751c.js"><link rel="prefetch" href="/assets/index.html.ec1ae2ea.js"><link rel="prefetch" href="/assets/index.html.fbbd6da4.js"><link rel="prefetch" href="/assets/index.html.2bee8d7d.js"><link rel="prefetch" href="/assets/index.html.25224641.js"><link rel="prefetch" href="/assets/index.html.032347ba.js"><link rel="prefetch" href="/assets/index.html.3aeee098.js"><link rel="prefetch" href="/assets/index.html.9688f9ca.js"><link rel="prefetch" href="/assets/index.html.e8a2650a.js"><link rel="prefetch" href="/assets/index.html.9d5b36c5.js"><link rel="prefetch" href="/assets/index.html.4bafbcf4.js"><link rel="prefetch" href="/assets/index.html.13f15f72.js"><link rel="prefetch" href="/assets/index.html.3c02e928.js"><link rel="prefetch" href="/assets/index.html.0f058727.js"><link rel="prefetch" href="/assets/index.html.cc05f7a7.js"><link rel="prefetch" href="/assets/index.html.0991aadd.js"><link rel="prefetch" href="/assets/index.html.ab2a9d1c.js"><link rel="prefetch" href="/assets/index.html.bc5b6eb3.js"><link rel="prefetch" href="/assets/index.html.1d9be89d.js"><link rel="prefetch" href="/assets/index.html.0fd0c5c6.js"><link rel="prefetch" href="/assets/index.html.2766bdae.js"><link rel="prefetch" href="/assets/index.html.0d135fa5.js"><link rel="prefetch" href="/assets/index.html.866a42c6.js"><link rel="prefetch" href="/assets/index.html.af9400ba.js"><link rel="prefetch" href="/assets/index.html.ad944c4f.js"><link rel="prefetch" href="/assets/index.html.0988247e.js"><link rel="prefetch" href="/assets/index.html.b1901e06.js"><link rel="prefetch" href="/assets/index.html.44244dc1.js"><link rel="prefetch" href="/assets/index.html.ceeb04f2.js"><link rel="prefetch" href="/assets/index.html.e47f88eb.js"><link rel="prefetch" href="/assets/index.html.92756e53.js"><link rel="prefetch" href="/assets/index.html.8dfd9a94.js"><link rel="prefetch" href="/assets/index.html.b15ba957.js"><link rel="prefetch" href="/assets/index.html.51b95569.js"><link rel="prefetch" href="/assets/index.html.8f0c0ae5.js"><link rel="prefetch" href="/assets/index.html.94cd816b.js"><link rel="prefetch" href="/assets/index.html.f0264cc3.js"><link rel="prefetch" href="/assets/index.html.f0e0378b.js"><link rel="prefetch" href="/assets/404.ac39b40d.js"><link rel="prefetch" href="/assets/Layout.a93cddbb.js"><link rel="prefetch" href="/assets/Slide.b1311b31.js"><link rel="prefetch" href="/assets/Blog.50829e45.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.308e684a.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.0cec5e87.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.92018b73.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/panda.gif" alt="Panda诚的博客"><!----><span class="site-name hide-in-pad">Panda诚的博客</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="Home"><span class="icon iconfont icon-home" style=""></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/timeline/" class="nav-link" aria-label="时间轴"><span class="icon iconfont icon-date" style=""></span>时间轴<!----></a></div><div class="nav-item hide-in-mobile"><a href="/tag/" class="nav-link" aria-label="Tags"><span class="icon iconfont icon-tag" style=""></span>Tags<!----></a></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/zhangchengk" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  数据库CDC</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  ApacheNIFI教程</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  ApacheNIFI开发</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  Spring常见错误</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  IO流(java)</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  JAVA</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">🐼  JOLT</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->强引用-软引用-弱引用-幻象引用有什么区别</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">张诚</span></span><span property="author" content="张诚"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2021年2月27日</span><meta property="datePublished" content="2021-02-27T00:00:00.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category8 clickable" role="navigation">极客时间核心技术面试精讲</li><meta property="articleSection" content="极客时间核心技术面试精讲"></ul></span><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 10 分钟</span><meta property="timeRequired" content="PT10M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%BA%9F%E5%BC%83/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E7%B2%BE%E8%AE%B2/04%E5%BC%BA%E5%BC%95%E7%94%A8-%E8%BD%AF%E5%BC%95%E7%94%A8-%E5%BC%B1%E5%BC%95%E7%94%A8-%E5%B9%BB%E8%B1%A1%E5%BC%95%E7%94%A8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html#典型回答" class="router-link-active router-link-exact-active toc-link level2">典型回答</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%BA%9F%E5%BC%83/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E7%B2%BE%E8%AE%B2/04%E5%BC%BA%E5%BC%95%E7%94%A8-%E8%BD%AF%E5%BC%95%E7%94%A8-%E5%BC%B1%E5%BC%95%E7%94%A8-%E5%B9%BB%E8%B1%A1%E5%BC%95%E7%94%A8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html#考点分析" class="router-link-active router-link-exact-active toc-link level2">考点分析</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%BA%9F%E5%BC%83/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E7%B2%BE%E8%AE%B2/04%E5%BC%BA%E5%BC%95%E7%94%A8-%E8%BD%AF%E5%BC%95%E7%94%A8-%E5%BC%B1%E5%BC%95%E7%94%A8-%E5%B9%BB%E8%B1%A1%E5%BC%95%E7%94%A8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html#知识扩展" class="router-link-active router-link-exact-active toc-link level2">知识扩展</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><p>在 Java 语言中，除了原始数据类型的变量，其他所有都是所谓的引用类型，指向各种不同的对象，理解引用对于掌握 Java 对象生命周期和 JVM 内部相关机制非常有帮助。</p><p>今天我要问你的问题是，强引用、软引用、弱引用、幻象引用有什么区别？具体使用场景是什么？</p><h2 id="典型回答" tabindex="-1"><a class="header-anchor" href="#典型回答" aria-hidden="true">#</a> 典型回答</h2><p>不同的引用类型，主要体现的是对象不同的可达性（reachable）状态和对垃圾收集的影响。</p><p>所谓强引用（“Strong” Reference），就是我们最常见的普通对象引用，只要还有强引用指向一个对象，就能表明对象还“活着”，垃圾收集器不会碰这种对象。对于一个普通的对象，如果没有其他的引用关系，只要超过了引用的作用域或者显式地将相应（强）引用赋值为 null，就是可以被垃圾收集的了，当然具体回收时机还是要看垃圾收集策略。</p><p>软引用（SoftReference），是一种相对强引用弱化一些的引用，可以让对象豁免一些垃圾收集，只有当 JVM 认为内存不足时，才会去试图回收软引用指向的对象。JVM 会确保在抛出 OutOfMemoryError 之前，清理软引用指向的对象。软引用通常用来实现内存敏感的缓存，如果还有空闲内存，就可以暂时保留缓存，当内存不足时清理掉，这样就保证了使用缓存的同时，不会耗尽内存。</p><p>弱引用（WeakReference）并不能使对象豁免垃圾收集，仅仅是提供一种访问在弱引用状态下对象的途径。这就可以用来构建一种没有特定约束的关系，比如，维护一种非强制性的映射关系，如果试图获取时对象还在，就使用它，否则重现实例化。它同样是很多缓存实现的选择。</p><p>对于幻象引用，有时候也翻译成虚引用，你不能通过它访问对象。幻象引用仅仅是提供了一种确保对象被 finalize 以后，做某些事情的机制，比如，通常用来做所谓的 Post-Mortem 清理机制，我在专栏上一讲中介绍的 Java 平台自身 Cleaner 机制等，也有人利用幻象引用监控对象的创建和销毁。</p><h2 id="考点分析" tabindex="-1"><a class="header-anchor" href="#考点分析" aria-hidden="true">#</a> 考点分析</h2><p>这道面试题，属于既偏门又非常高频的一道题目。说它偏门，是因为在大多数应用开发中，很少直接操作各种不同引用，虽然我们使用的类库、框架可能利用了其机制。它被频繁问到，是因为这是一个综合性的题目，既考察了我们对基础概念的理解，也考察了对底层对象生命周期、垃圾收集机制等的掌握。</p><p>充分理解这些引用，对于我们设计可靠的缓存等框架，或者诊断应用 OOM 等问题，会很有帮助。比如，诊断 MySQL connector-j 驱动在特定模式下（useCompression=true）的内存泄漏问题，就需要我们理解怎么排查幻象引用的堆积问题。</p><h2 id="知识扩展" tabindex="-1"><a class="header-anchor" href="#知识扩展" aria-hidden="true">#</a> 知识扩展</h2><ol><li>对象可达性状态流转分析</li></ol><p>首先，请你看下面流程图，我这里简单总结了对象生命周期和不同可达性状态，以及不同状态可能的改变关系，可能未必 100% 严谨，来阐述下可达性的变化。</p><p><img src="/assets/3.d4b7c393.png" alt="" loading="lazy"></p><p>我来解释一下上图的具体状态，这是 Java 定义的不同可达性级别（reachability level），具体如下：</p><ul><li><p>强可达（Strongly Reachable），就是当一个对象可以有一个或多个线程可以不通过各种引用访问到的情况。比如，我们新创建一个对象，那么创建它的线程对它就是强可达。</p></li><li><p>软可达（Softly Reachable），就是当我们只能通过软引用才能访问到对象的状态。</p></li><li><p>弱可达（Weakly Reachable），类似前面提到的，就是无法通过强引用或者软引用访问，只能通过弱引用访问时的状态。这是十分临近 finalize 状态的时机，当弱引用被清除的时候，就符合 finalize 的条件了。</p></li><li><p>幻象可达（Phantom Reachable），上面流程图已经很直观了，就是没有强、软、弱引用关联，并且 finalize 过了，只有幻象引用指向这个对象的时候。</p></li><li><p>当然，还有一个最后的状态，就是不可达（unreachable），意味着对象可以被清除了。</p></li></ul><p>判断对象可达性，是 JVM 垃圾收集器决定如何处理对象的一部分考虑。</p><p>所有引用类型，都是抽象类 java.lang.ref.Reference 的子类，你可能注意到它提供了 get() 方法：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApUAAAApCAMAAABTGCKyAAAA8FBMVEXu7u////+xdjNVlNHQlFT/uZ9KZ4JKe6/Q////0JNVOHSx/////7F0OFST0P//0q9lZ4JKZ5+z//81drH//9aZe4JKZ5GZ0v+zj4KZua///8B/Z4JlpNb/sXQ1OHT/s31HR0dHR2KZ0P/QmWJHfbOzfUd9s////9CZYkfQpJF0ODN0sf//0JliR2JHR33//7N9R0fQmX1iR0dimdBiR32ZfZl/uf81V5P//9GTVzNHYpmZ0LOZfUezmWKZs5limbN9s9Cz0Jl9s7N9Ypl9R31iYpnQ/9BifbOZYn1VOFR/pK9Kj8B9R2JHfZnQ/7PQs31mB/qhAAAEkUlEQVR42u2aeXvTRhDGMaTGHCWpuQKESiDJdiDEahZo6x6cLW05+v2/TedcrRLbhMeFWOR9/4g00l569rczu+OcOQNBEARBUAfVg6B1E6iEQCUEgUoIVEIQqIRAJQSBSghUQhCohCBQCYHKz6Sz5/jvxjlM3Gmg8pu+6PxgvUd74eIlvlz+9gpmDlSerDa3vhumrpKuVzFzpyKCX7t+4+Z6DGm7f+PWFq2P23dkmfCFtJP6yLvfXzotE5Tl9+4fr2SR5+VKXVX5aMXBjif5ym2sJ5W75rWVRr8KlRHGyw8edoOpKhetQsveI6Oy2B8uKzetR70f7q/GlBG1dxAWDebx0jFk+8Pxk8FXSOW16wTgNtG4yyBu958mEXzjR/vin37uynknY0/XmmWm53jSkpHK49K7OpXzF1j5cSqL2eB/GejaUXn7DiG4SRF8u+8+svNUjielxOI8D0Qo+84iJ68yIZMC9C91Pvs1n/2mLpW8q4VsLUmT+PsBldZQziHSXKbVHNgjbp0KaCf0jLqgYKrmtM6fWWzlRpvBNLGfX44nz6UUlQm9pisZEVtkMpXehFTcf3FABnVAI5HIoBcaCRWj5qiFaL6sfYR5AJXr4Sv5jr2fekCKdTTvgd/tD6evBgUTynNGszp9PUx95QGTF9THFITD3h8Do5Zr/snEs48SF+SdEAqhV4zcHE/opuKma2qoCE05YUugsVKZsB90JXG7vHHgEbmvFI9aBN/1zgZ7b6TVyspLP/x505pg/mvYmLwQy276ynYEb0DtdXJfqZ6B50r9JU3RYSp1jgpBZiTP50TwymYzDZFa07AfiRk7UYaiKT1x01a/KSfdhKQUv+IbbzeyW5Ue50NrI+k7Xq4gq4PGIm36okrNuHy6etrZ3OIrD0rOO4zohb+vtPKWHfGV4io5yEkQXE4lO5glVLJ/bFNZ6HkqiBk7UYai6VQqjcmLnnPDZOm+0vD0djMfj1NJb8pDVNqZbiRfkfkBzz60ZXaWSnKU/X88M9R/66DupPnKjc7kK2VSJQjWIWVtEZUyxWEhlWnuxah0TJXKkJ5NonmUysTfLaDSt69HqOQtondqVLoHFyq9gn1oy/xUKtdKu0rjEd3VjWWHfttp9pU+qx+jspnIeVQmHKod5ziWSxhqRd0kgieILYrg3u6RCN7sACKVcduRfoXdtM3OUqmRe2f+y7MPu+UqjbBKDsk8KxLJ6PDADirL5+wrOdi/i0Bwyda+ctRkZ7TmeMI1qYaedqwTY8jNSKWehMqmnJ92+MF4wsOMpx1r10GiWhUDRgeYpqryOK1LHZaedmTB+bGubVpjfmDrGJU7va9DlWZBJNeSWTq9kEf09z3lbyxDQ+VmH2q+LZK8CZfMOK/Cr/+VnVuVewT33A7HdEu4lD27xKxOZls6b0huy/iinRmqOHejKaIQ25W36vBzPx3F7JRV9EeVt2P5Je2hMUeFF6MPWfaTFf6TDZqTTg8nOwBQCR1C8sng+D8/gUroi6VYT9hVgkpoDQUqIVAJQaASApUQBCohUAlBX4hKCIIgCII6qP8A4IBAvFDKeb0AAAAASUVORK5CYII=" alt="" loading="lazy"></p><p>除了幻象引用（因为 get 永远返回 null），如果对象还没有被销毁，都可以通过 get 方法获取原有对象。这意味着，利用软引用和弱引用，我们可以将访问到的对象，重新指向强引用，也就是人为的改变了对象的可达性状态！这也是为什么我在上面图里有些地方画了双向箭头。</p><p>所以，对于软引用、弱引用之类，垃圾收集器可能会存在二次确认的问题，以保证处于弱引用状态的对象，没有改变为强引用。</p><p>但是，你觉得这里有没有可能出现什么问题呢？</p><p>不错，如果我们错误的保持了强引用（比如，赋值给了 static 变量），那么对象可能就没有机会变回类似弱引用的可达性状态了，就会产生内存泄漏。所以，检查弱引用指向对象是否被垃圾收集，也是诊断是否有特定内存泄漏的一个思路，如果我们的框架使用到弱引用又怀疑有内存泄漏，就可以从这个角度检查。</p><ol start="2"><li>引用队列（ReferenceQueue）使用</li></ol><p>谈到各种引用的编程，就必然要提到引用队列。我们在创建各种引用并关联到相应对象时，可以选择是否需要关联引用队列，JVM 会在特定时机将引用 enqueue 到队列里，我们可以从队列里获取引用（remove 方法在这里实际是有获取的意思）进行相关后续逻辑。尤其是幻象引用，get 方法只返回 null，如果再不指定引用队列，基本就没有意义了。看看下面的示例代码。利用引用队列，我们可以在对象处于相应状态时（对于幻象引用，就是前面说的被 finalize 了，处于幻象可达状态），执行后期处理逻辑。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">Object</span> counter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReferenceQueue</span> refQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">PhantomReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PhantomReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>counter<span class="token punctuation">,</span> refQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

counter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>

    <span class="token comment">// Remove是一个阻塞方法，可以指定timeout，或者选择一直阻塞</span>

    <span class="token class-name">Reference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> ref <span class="token operator">=</span> refQueue<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">1000L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// do something</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Handle it</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>显式地影响软引用垃圾收集</li></ol><p>前面泛泛提到了引用对垃圾收集的影响，尤其是软引用，到底 JVM 内部是怎么处理它的，其实并不是非常明确。那么我们能不能使用什么方法来影响软引用的垃圾收集呢？</p><p>答案是有的。软引用通常会在最后一次引用后，还能保持一段时间，默认值是根据堆剩余空间计算的（以 M bytes 为单位）。从 Java 1.3.1 开始，提供了 -XX:SoftRefLRUPolicyMSPerMB 参数，我们可以以毫秒（milliseconds）为单位设置。比如，下面这个示例就是设置为 3 秒（3000 毫秒）。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-XX:SoftRefLRUPolicyMSPerMB=3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这个剩余空间，其实会受不同 JVM 模式影响，对于 Client 模式，比如通常的 Windows 32 bit JDK，剩余空间是计算当前堆里空闲的大小，所以更加倾向于回收；而对于 server 模式 JVM，则是根据 -Xmx 指定的最大值来计算。</p><p>本质上，这个行为还是个黑盒，取决于 JVM 实现，即使是上面提到的参数，在新版的 JDK 上也未必有效，另外 Client 模式的 JDK 已经逐步退出历史舞台。所以在我们应用时，可以参考类似设置，但不要过于依赖它。</p><ol start="4"><li>诊断 JVM 引用情况</li></ol><p>如果你怀疑应用存在引用（或 finalize）导致的回收问题，可以有很多工具或者选项可供选择，比如 HotSpot JVM 自身便提供了明确的选项（PrintReferenceGC）去获取相关信息，我指定了下面选项去使用 JDK 8 运行一个样例应用：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintReferenceGC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这是 JDK 8 使用 ParrallelGC 收集的垃圾收集日志，各种引用数量非常清晰。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>0.403: [GC (Allocation Failure) 0.871: [SoftReference, 0 refs, 0.0000393 secs]0.871: [WeakReference, 8 refs, 0.0000138 secs]0.871: [FinalReference, 4 refs, 0.0000094 secs]0.871: [PhantomReference, 0 refs, 0 refs, 0.0000085 secs]0.871: [JNI Weak Reference, 0.0000071 secs][PSYoungGen: 76272K-&gt;10720K(141824K)] 128286K-&gt;128422K(316928K), 0.4683919 secs] [Times: user=1.17 sys=0.03, real=0.47 secs] 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>注意：JDK 9 对 JVM 和垃圾收集日志进行了广泛的重构，类似 PrintGCTimeStamps 和 PrintReferenceGC 已经不再存在，我在专栏后面的垃圾收集主题里会更加系统的阐述。</p><ol start="5"><li>Reachability Fence</li></ol><p>除了我前面介绍的几种基本引用类型，我们也可以通过底层 API 来达到强引用的效果，这就是所谓的设置 reachability fence。</p><p>为什么需要这种机制呢？考虑一下这样的场景，按照 Java 语言规范，如果一个对象没有指向强引用，就符合垃圾收集的标准，有些时候，对象本身并没有强引用，但是也许它的部分属性还在被使用，这样就导致诡异的问题，所以我们需要一个方法，在没有强引用情况下，通知 JVM 对象是在被使用的。说起来有点绕，我们来看看 Java 9 中提供的案例。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>

 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ExternalResource</span><span class="token punctuation">[</span><span class="token punctuation">]</span> externalResourceArray <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

 <span class="token keyword">int</span> myIndex<span class="token punctuation">;</span> <span class="token class-name">Resource</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

     myIndex <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

     externalResourceArray<span class="token punctuation">[</span>myIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

 <span class="token punctuation">}</span>

 <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

     externalResourceArray<span class="token punctuation">[</span>myIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

 <span class="token punctuation">}</span>

 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 <span class="token keyword">try</span> <span class="token punctuation">{</span>

     <span class="token comment">// 需要被保护的代码</span>

     <span class="token keyword">int</span> i <span class="token operator">=</span> myIndex<span class="token punctuation">;</span>

     <span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>externalResourceArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

     <span class="token comment">// 调用reachbilityFence，明确保障对象strongly reachable</span>

     <span class="token class-name">Reference</span><span class="token punctuation">.</span><span class="token function">reachabilityFence</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span>

 <span class="token punctuation">}</span>

 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">ExternalResource</span> ext<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    ext<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span>

<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>方法 action 的执行，依赖于对象的部分属性，所以被特定保护了起来。否则，如果我们在代码中像下面这样调用，那么就可能会出现困扰，因为没有强引用指向我们创建出来的 Resource 对象，JVM 对它进行 finalize 操作是完全合法的。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">Resource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>类似的书写结构，在异步编程中似乎是很普遍的，因为异步编程中往往不会用传统的“执行 -&gt; 返回 -&gt; 使用”的结构。</p><p>在 Java 9 之前，实现类似功能相对比较繁琐，有的时候需要采取一些比较隐晦的小技巧。幸好，java.lang.ref.Reference 给我们提供了新方法，它是 JEP 193: Variable Handles 的一部分，将 Java 平台底层的一些能力暴露出来：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">reachabilityFence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> ref<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在 JDK 源码中，reachabilityFence 大多使用在 Executors 或者类似新的 HTTP/2 客户端代码中，大部分都是异步调用的情况。编程中，可以按照上面这个例子，将需要 reachability 保障的代码段利用 try-finally 包围起来，在 finally 里明确声明对象强可达。</p><p>今天，我总结了 Java 语言提供的几种引用类型、相应可达状态以及对于 JVM 工作的意义，并分析了引用队列使用的一些实际情况，最后介绍了在新的编程模式下，如何利用 API 去保障对象不被意外回收，希望对你有所帮助。</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zhangchengk/edit/main/demo/src/废弃/读书笔记/Java核心技术面试精讲/04强引用-软引用-弱引用-幻象引用有什么区别.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2023/7/19 12:37:43</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: zhangchengk@foxmail.com">zhangcheng</span><!--]--><!--]--></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">读书又笔记</div><div class="copyright">Copyright © 2024 张诚</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.17aaeba5.js" defer></script>
  </body>
</html>
