import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,a as n}from"./app-DPxQZnZ9.js";const l={},h=n(`<p>整个脚本分为三部分，第一部分是确定NIFI各个路径 目录的确定，设置环境变量，第二部分是方法区。第三部分是脚本逻辑代码的入口，初略的根据传参不同区执行不同的方法。以下脚本有详细注释：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 1、查找文件的路径 start</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 由于MacOS X、FreeBSD和其他一些系统缺少gnu readlink，我们使用了基于以下StackOverflow注释http://stackoverflow.com/a/1116890/888876的更可移植的方法</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## 特殊变量 当前脚本的文件名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TARGET_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#跳转到当前脚本所在的目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $TARGET_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## TARGET_FILE=nifi.sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TARGET_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">basename</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $TARGET_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## 遍历(可能的)符号链接链   -L filename，判断文件是否问链接文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-L</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$TARGET_FILE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    TARGET_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $TARGET_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    cd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $TARGET_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    TARGET_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">basename</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $TARGET_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">done</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># pwd -P  显示出实际路径，而非使用连接（link）路径。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PHYS_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">pwd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -P</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 脚本所在目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SCRIPT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$PHYS_DIR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PROGNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">basename</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查找文件的路径 end</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 执行nifi-env.sh  设置了NIFI的目录环境变量</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SCRIPT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/nifi-env.sh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#/2、方法区 start</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">warn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PROGNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}: </span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">$*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">die</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    warn</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">$*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 检测特殊的操作系统，然后做一些特殊操作</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">detectOS</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Cygwin是一个在windows平台上运行的类UNIX模拟环境</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    cygwin</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # AIX，是IBM专有的UNIX操作系统</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    aix</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # AS400是IBM早期推出的商用小型机</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    os400</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Darwin是由苹果电脑于2000年所释出的一个开放原始码操作系统</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    darwin</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    case</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> in</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">        CYGWIN</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            cygwin</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">        AIX</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            aix</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">        OS400</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            os400</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">        Darwin</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            darwin</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            ;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    esac</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # For AIX, set an environment variable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">aix</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">         export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> LDR_CNTRL</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAXDATA</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">0xB0000000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">DSA</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">         echo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">LDR_CNTRL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # In addition to those, go around the linux space and query the widely</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # adopted /etc/os-release to detect linux variants</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-f</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /etc/os-release ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        .</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/os-release</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">unlimitFD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Use the maximum available, or set MAX_FD != -1 to use that</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 判断 \${MAX_FD}有没有被赋值 条件成立则没有赋值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        MAX_FD</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;maximum&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 如果可能的话，提升文件描述符的最大数量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">os400</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">cygwin</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        MAX_FD_LIMIT</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">ulimit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -H</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD_LIMIT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;unlimited&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">$?</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -eq</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;maximum&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">                    # use the system max</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">                    MAX_FD</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD_LIMIT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">                ulimit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev/null</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">                # echo &quot;ulimit -n&quot; \`ulimit -n\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">$?</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -ne</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                    warn</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not set maximum file descriptor limit: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            else</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                warn</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not query system maximum file descriptor limit: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">MAX_FD_LIMIT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 找到要执行的JVM</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">locateJava</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 设置Java虚拟机</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $cygwin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --unix</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --unix</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-r</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /etc/gentoo-release ] ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        JAVA_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">java-config</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --jre-home</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                die</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;JAVA_HOME is not valid: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            JAVA</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/bin/java&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        else</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">            warn</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;JAVA_HOME not set; results may vary&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            JAVA</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            JAVA</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">expr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;.* \\(/.*\\)$&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                die</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;java command not found&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 如果命令是 env, tools.jar classes.jar也加到 classpath</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;tools.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] &amp;&amp; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;classes.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">             warn</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not locate tools.jar or classes.jar. Please set manually to avail all command features.&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 初始化 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 确定是否需要执行特殊的操作系统处理</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    detectOS</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 如果可能的话，不限制文件描述符的数量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    unlimitFD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 找到要执行的JVM</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    locateJava</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 将nifi安装为service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    detectOS</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">darwin</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">cygwin</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;Installing Apache NiFi as a service is not supported on OS X or Cygwin.&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    SVC_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nifi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;x</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        SVC_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # since systemd seems to honour /etc/init.d we don&#39;t still create native systemd services</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # yet...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    initd_dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;/etc/init.d&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    SVC_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">initd_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">initd_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Current user does not have write permissions to \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">initd_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}. Cannot install NiFi as a service.&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># Create the init script, overwriting anything currently present</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">SERVICEDESCRIPTOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    Licensed to the Apache Software Foundation (ASF) under one or more</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    contributor license agreements.  See the NOTICE file distributed with</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    this work for additional information regarding copyright ownership.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    The ASF licenses this file to You under the Apache License, Version 2.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    (the &quot;License&quot;); you may not use this file except in compliance with</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    the License.  You may obtain a copy of the License at</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#       http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    Unless required by applicable law or agreed to in writing, software</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    See the License for the specific language governing permissions and</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#    limitations under the License.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"># chkconfig: 2345 20 80</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"># description: Apache NiFi is a dataflow system based on the principles of Flow-Based Programming.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">#</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"># Make use of the configured NIFI_HOME directory and pass service requests to the nifi.sh executable</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">NIFI_HOME=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">bin_dir=</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{NIFI_HOME}/bin</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nifi_executable=</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{bin_dir}/nifi.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{nifi_executable} &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">@&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">SERVICEDESCRIPTOR</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_FILE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not create service file \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_FILE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Provide the user execute access on the file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> u+x</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_FILE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # If SLES or OpenSuse...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;opensuse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;sles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc.d/rc2.d/S65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/init.d/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc.d/rc2.d/S65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not create link /etc/rc.d/rc2.d/S65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc.d/rc2.d/K65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/init.d/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc.d/rc2.d/K65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not create link /etc/rc.d/rc2.d/K65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Service \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} installed&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Anything other fallback to the old approach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc2.d/S65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/init.d/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc2.d/S65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not create link /etc/rc2.d/S65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc2.d/K65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/init.d/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/etc/rc2.d/K65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Could not create link /etc/rc2.d/K65\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Service \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SVC_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} installed&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_CONF_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/conf&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_CONF</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/bootstrap.conf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_LIBS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/lib/bootstrap/*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 运行NiFi时使用的用户名。此值将在Windows上被忽略。在bootstrap.conf中 run.as= 配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    run_as_user</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;^\\s*run.as&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> cut</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;=&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 如果以用户身份运行与启动流程相同，则忽略此配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">whoami</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        unset</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run_as_user</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $cygwin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">            echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;The run.as option is not supported in a Cygwin environment. Exiting.&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">            exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        NIFI_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        NIFI_LOG_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_LOG_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        NIFI_PID_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_PID_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        BOOTSTRAP_CONF</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        BOOTSTRAP_CONF_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        BOOTSTRAP_LIBS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_LIBS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_LIBS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            TOOLS_JAR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cygpath</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --path</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">};\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> !</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> id</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">                echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;The specified run.as user \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} does not exist. Exiting.&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">                exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}:\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_LIBS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">TOOLS_JAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}:\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Java home: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;NiFi home: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Bootstrap Config File: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    #在后台运行&#39;start&#39;，因为进程将继续运行，监视NiFi。所有其他命令都将很快终止，所以要等待它们</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    #设置目录的参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # java程序启动参数 -D 在System类中通过getProperties()得到的一串系统属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_LOG_PARAMS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;-Dorg.apache.nifi.bootstrap.config.log.dir=&#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_LOG_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_PID_PARAMS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;-Dorg.apache.nifi.bootstrap.config.pid.dir=&#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_PID_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_CONF_PARAMS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;-Dorg.apache.nifi.bootstrap.config.file=&#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # 去掉一下注釋就允许调试NIFI进程 (或者在bootstrap.conf中取消注释)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    #BOOTSTRAP_DEBUG_PARAMS=&quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    BOOTSTRAP_DIR_PARAMS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_LOG_PARAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_PID_PARAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CONF_PARAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    run_nifi_cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">JAVA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&#39; -cp &#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_CLASSPATH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&#39; -Xms12m -Xmx24m \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_DIR_PARAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_DEBUG_PARAMS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">BOOTSTRAP_JAVA_OPTS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} org.apache.nifi.bootstrap.RunNiFi </span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$@</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      # 为运行提供SCRIPT_DIR并执行ni -env。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">      run_nifi_cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;sudo -u \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_as_user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} sh -c </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SCRIPT_DIR=&#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SCRIPT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&#39; &amp;&amp; . &#39;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SCRIPT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}/nifi-env.sh&#39; &amp;&amp; \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_nifi_cmd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;run&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      # 使用exec将PID切换到RunNiFi java进程，而不是将其作为子进程( 前台运行nifi，Ctrl-C就停止NIFI)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      # exec命令 用于调用并执行指令的命令。exec命令通常用在shell脚本程序中，可以调用其他的命令。如果在当前终端中使用命令，则当指定的命令执行完毕后会立即退出终端。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">      run_nifi_cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;exec \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_nifi_cmd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Linux eval命令用于重新运算求出参数的内容。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # eval可读取一连串的参数，然后再依参数本身的特性来执行。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ( </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">eval</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;cd \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} &amp;&amp; \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_nifi_cmd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp; )</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> /dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> 1&gt;&amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">-</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        eval</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;cd \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">NIFI_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">} &amp;&amp; \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">run_nifi_cmd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    EXIT_STATUS</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">$?</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">   # 稍等(3秒)，等待日志记录完成，然后回显新行。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">   # 我们这样做是为了避免在运行命令后，日志在控制台被吐出来，然后返回给用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    sleep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    init</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    run</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$@</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 方法区 end</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 3、入口 start</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ==========================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 判断 $1 第一个参数是什么 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 其中install 将nifi安装为service </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># start 启动</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># stop 停止</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># run</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># status </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># dump</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># env</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># restart 重启</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># $@ 传全部参数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">case</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> in</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">    install</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$@</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">    start</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">stop</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">run</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">status</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">dump</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">env</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        main</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">$@</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        init</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        run</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;stop&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        run</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;start&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">    *)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Usage nifi {start|stop|run|restart|status|dump|install}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">esac</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),k=[h];function t(p,e){return a(),i("div",null,k)}const y=s(l,[["render",t],["__file","nifi-sh.html.vue"]]),g=JSON.parse('{"path":"/ApacheNIFI%E5%BC%80%E5%8F%91/nifi-sh.html","title":"nifi.sh 脚本解读","lang":"zh-CN","frontmatter":{"title":"nifi.sh 脚本解读","date":"2020-05-21T00:00:00.000Z","category":"ApacheNIFI开发","tag":"NIFI","order":14,"description":"整个脚本分为三部分，第一部分是确定NIFI各个路径 目录的确定，设置环境变量，第二部分是方法区。第三部分是脚本逻辑代码的入口，初略的根据传参不同区执行不同的方法。以下脚本有详细注释：","head":[["meta",{"property":"og:url","content":"https://zhangchengk.github.io/ApacheNIFI%E5%BC%80%E5%8F%91/nifi-sh.html"}],["meta",{"property":"og:site_name","content":"Panda诚的博客"}],["meta",{"property":"og:title","content":"nifi.sh 脚本解读"}],["meta",{"property":"og:description","content":"整个脚本分为三部分，第一部分是确定NIFI各个路径 目录的确定，设置环境变量，第二部分是方法区。第三部分是脚本逻辑代码的入口，初略的根据传参不同区执行不同的方法。以下脚本有详细注释："}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-27T13:31:00.000Z"}],["meta",{"property":"article:author","content":"Panda诚"}],["meta",{"property":"article:tag","content":"NIFI"}],["meta",{"property":"article:published_time","content":"2020-05-21T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-27T13:31:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"nifi.sh 脚本解读\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-05-21T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-27T13:31:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Panda诚\\",\\"url\\":\\"https://zhangchengk.github.io/about/intro.html\\"}]}"]]},"headers":[],"git":{"createdTime":1719488402000,"updatedTime":1719495060000,"contributors":[{"name":"zhangcheng","email":"zhangchengk@yonyou.com","commits":2}]},"readingTime":{"minutes":6.05,"words":1816},"filePathRelative":"ApacheNIFI开发/nifi-sh.md","localizedDate":"2020年5月21日","excerpt":"<p>整个脚本分为三部分，第一部分是确定NIFI各个路径 目录的确定，设置环境变量，第二部分是方法区。第三部分是脚本逻辑代码的入口，初略的根据传参不同区执行不同的方法。以下脚本有详细注释：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">#!/bin/sh</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 1、查找文件的路径 start</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 由于MacOS X、FreeBSD和其他一些系统缺少gnu readlink，我们使用了基于以下StackOverflow注释http://stackoverflow.com/a/1116890/888876的更可移植的方法</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">## 特殊变量 当前脚本的文件名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TARGET_FILE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">#跳转到当前脚本所在的目录</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">cd</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> $(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">dirname</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $TARGET_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">## TARGET_FILE=nifi.sh</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TARGET_FILE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">basename</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $TARGET_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">## 遍历(可能的)符号链接链   -L filename，判断文件是否问链接文件</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">while</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-L</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">$TARGET_FILE</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">do</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    TARGET_FILE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">readlink</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $TARGET_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    cd</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> $(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">dirname</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $TARGET_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    TARGET_FILE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">basename</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $TARGET_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">done</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># pwd -P  显示出实际路径，而非使用连接（link）路径。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">PHYS_DIR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">pwd</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -P</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 脚本所在目录</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SCRIPT_DIR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">$PHYS_DIR</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">PROGNAME</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">basename</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$0</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 查找文件的路径 end</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 执行nifi-env.sh  设置了NIFI的目录环境变量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">.</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SCRIPT_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/nifi-env.sh\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">#/2、方法区 start</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">warn</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">PROGNAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}: </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E5C07B\\">$*</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">die</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    warn</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E5C07B\\">$*</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 检测特殊的操作系统，然后做一些特殊操作</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">detectOS</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # Cygwin是一个在windows平台上运行的类UNIX模拟环境</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    cygwin</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # AIX，是IBM专有的UNIX操作系统</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    aix</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # AS400是IBM早期推出的商用小型机</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    os400</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # Darwin是由苹果电脑于2000年所释出的一个开放原始码操作系统</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    darwin</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    case</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">uname</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">)\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> in</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">        CYGWIN</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">*</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            cygwin</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">true</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">            ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">        AIX</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">*</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            aix</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">true</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">            ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">        OS400</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">*</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            os400</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">true</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">            ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">        Darwin</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            darwin</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">true</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">            ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    esac</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # For AIX, set an environment variable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">aix</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">         export</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> LDR_CNTRL</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAXDATA</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">0xB0000000</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">@</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">DSA</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">         echo</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">LDR_CNTRL</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # In addition to those, go around the linux space and query the widely</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # adopted /etc/os-release to detect linux variants</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-f</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> /etc/os-release ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        .</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> /etc/os-release</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">unlimitFD</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # Use the maximum available, or set MAX_FD != -1 to use that</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 判断 ${MAX_FD}有没有被赋值 条件成立则没有赋值</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        MAX_FD</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"maximum\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 如果可能的话，提升文件描述符的最大数量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">os400</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"false\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">cygwin</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"false\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        MAX_FD_LIMIT</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">ulimit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -H</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -n</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD_LIMIT</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> !=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \'unlimited\'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E5C07B\\">$?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> -eq</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">                if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"maximum\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> -o</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"max\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">                    # use the system max</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">                    MAX_FD</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD_LIMIT</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">                fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">                ulimit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -n</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">} </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">&gt;</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> /dev/null</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">                # echo \\"ulimit -n\\" `ulimit -n`</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">                if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E5C07B\\">$?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> -ne</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">                    warn</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not set maximum file descriptor limit: ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">                fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            else</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">                warn</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not query system maximum file descriptor limit: ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">MAX_FD_LIMIT</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 找到要执行的JVM</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">locateJava</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 设置Java虚拟机</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $cygwin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; </span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --unix</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; </span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --unix</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-r</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> /etc/gentoo-release ] ; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        JAVA_HOME</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">java-config</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --jre-home</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> !=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">!</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> -d</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">                die</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"JAVA_HOME is not valid: ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            JAVA</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/bin/java\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        else</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">            warn</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"JAVA_HOME not set; results may vary\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            JAVA</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">type</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> java</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            JAVA</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">expr</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> :</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \'.* \\\\(/.*\\\\)$\'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">                die</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"java command not found\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 如果命令是 env, tools.jar classes.jar也加到 classpath</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$1</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"env\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">  \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; </span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">find</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -H</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -name</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"tools.jar\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">  \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] &amp;&amp; </span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">find</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -H</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -name</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"classes.jar\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">  \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">             warn</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not locate tools.jar or classes.jar. Please set manually to avail all command features.\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 初始化 </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">init</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 确定是否需要执行特殊的操作系统处理</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    detectOS</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 如果可能的话，不限制文件描述符的数量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    unlimitFD</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 找到要执行的JVM</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    locateJava</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$1</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 将nifi安装为service</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">install</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    detectOS</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">darwin</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"true\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">  ] </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">cygwin</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"true\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \'Installing Apache NiFi as a service is not supported on OS X or Cygwin.\'</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    SVC_NAME</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">nifi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"x</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$2</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> !=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"x\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] ; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        SVC_NAME</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$2</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # since systemd seems to honour /etc/init.d we don\'t still create native systemd services</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # yet...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    initd_dir</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\'/etc/init.d\'</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    SVC_FILE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">initd_dir</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">!</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> -w</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">  \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">initd_dir</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Current user does not have write permissions to ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">initd_dir</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}. Cannot install NiFi as a service.\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># Create the init script, overwriting anything currently present</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cat</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> &lt;&lt;</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#ABB2BF\\">SERVICEDESCRIPTOR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> &gt;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#!/bin/sh</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    Licensed to the Apache Software Foundation (ASF) under one or more</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    contributor license agreements.  See the NOTICE file distributed with</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    this work for additional information regarding copyright ownership.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    The ASF licenses this file to You under the Apache License, Version 2.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    (the \\"License\\"); you may not use this file except in compliance with</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    the License.  You may obtain a copy of the License at</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#       http://www.apache.org/licenses/LICENSE-2.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    Unless required by applicable law or agreed to in writing, software</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    distributed under the License is distributed on an \\"AS IS\\" BASIS,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    See the License for the specific language governing permissions and</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#    limitations under the License.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"># chkconfig: 2345 20 80</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"># description: Apache NiFi is a dataflow system based on the principles of Flow-Based Programming.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">#</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"># Make use of the configured NIFI_HOME directory and pass service requests to the nifi.sh executable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">NIFI_HOME=${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">bin_dir=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">\\\\$</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">{NIFI_HOME}/bin</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">nifi_executable=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">\\\\$</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">{bin_dir}/nifi.sh</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">\\\\$</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">{nifi_executable} \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">\\\\$</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">@\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#ABB2BF\\">SERVICEDESCRIPTOR</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">!</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> -f</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_FILE</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not create service file ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_FILE</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # Provide the user execute access on the file</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    chmod</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> u+x</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_FILE</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # If SLES or OpenSuse...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">ID</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"opensuse\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ] </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">ID</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"sles\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        rm</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -f</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc.d/rc2.d/S65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        ln</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -s</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/init.d/${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc.d/rc2.d/S65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> { </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not create link /etc/rc.d/rc2.d/S65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        rm</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -f</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc.d/rc2.d/K65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        ln</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -s</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/init.d/${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc.d/rc2.d/K65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> { </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not create link /etc/rc.d/rc2.d/K65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Service ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} installed\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # Anything other fallback to the old approach</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    else</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        rm</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -f</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc2.d/S65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        ln</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -s</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/init.d/${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc2.d/S65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> { </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not create link /etc/rc2.d/S65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        rm</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -f</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc2.d/K65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        ln</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -s</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/init.d/${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"/etc/rc2.d/K65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> { </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Could not create link /etc/rc2.d/K65${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Service ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SVC_NAME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} installed\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">run</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_CONF_DIR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/conf\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_CONF</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/bootstrap.conf\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_LIBS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/lib/bootstrap/*\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 运行NiFi时使用的用户名。此值将在Windows上被忽略。在bootstrap.conf中 run.as= 配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    run_as_user</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">grep</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \'^\\\\s*run.as\'</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> |</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> cut</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -d</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\'=\'</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -f2</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 如果以用户身份运行与启动流程相同，则忽略此配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">whoami</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">)\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        unset</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> run_as_user</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\"> $cygwin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">            echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"The run.as option is not supported in a Cygwin environment. Exiting.\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">            exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        NIFI_HOME</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        NIFI_LOG_DIR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_LOG_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        NIFI_PID_DIR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_PID_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        BOOTSTRAP_CONF</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        BOOTSTRAP_CONF_DIR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        BOOTSTRAP_LIBS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_LIBS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">};${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_LIBS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            TOOLS_JAR</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">$(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">cygpath</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --path</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> --windows</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">};${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    else</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            if</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> !</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> id</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -u</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> &gt;</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">/dev/null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> 2&gt;&amp;1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">                echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"The specified run.as user ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} does not exist. Exiting.\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">                exit</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">            fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">        BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}:${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_LIBS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">            BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">TOOLS_JAR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}:${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">        fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Java home: ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"NiFi home: ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Bootstrap Config File: ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    #在后台运行\'start\'，因为进程将继续运行，监视NiFi。所有其他命令都将很快终止，所以要等待它们</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    #设置目录的参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # java程序启动参数 -D 在System类中通过getProperties()得到的一串系统属性</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_LOG_PARAMS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"-Dorg.apache.nifi.bootstrap.config.log.dir=\'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_LOG_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\'\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_PID_PARAMS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"-Dorg.apache.nifi.bootstrap.config.pid.dir=\'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_PID_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\'\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_CONF_PARAMS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"-Dorg.apache.nifi.bootstrap.config.file=\'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\'\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # 去掉一下注釋就允许调试NIFI进程 (或者在bootstrap.conf中取消注释)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    #BOOTSTRAP_DEBUG_PARAMS=\\"-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    BOOTSTRAP_DIR_PARAMS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_LOG_PARAMS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_PID_PARAMS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CONF_PARAMS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    run_nifi_cmd</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"\'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">JAVA</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\' -cp \'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_CLASSPATH</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\' -Xms12m -Xmx24m ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_DIR_PARAMS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_DEBUG_PARAMS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">BOOTSTRAP_JAVA_OPTS</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} org.apache.nifi.bootstrap.RunNiFi </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$@</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">-n</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">      # 为运行提供SCRIPT_DIR并执行ni -env。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">      run_nifi_cmd</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"sudo -u ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_as_user</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} sh -c </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">\\\\\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">SCRIPT_DIR=\'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SCRIPT_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\' &amp;&amp; . \'${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">SCRIPT_DIR</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}/nifi-env.sh\' &amp;&amp; ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_nifi_cmd</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">\\\\\\"</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$1</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"run\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">      # 使用exec将PID切换到RunNiFi java进程，而不是将其作为子进程( 前台运行nifi，Ctrl-C就停止NIFI)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">      # exec命令 用于调用并执行指令的命令。exec命令通常用在shell脚本程序中，可以调用其他的命令。如果在当前终端中使用命令，则当指定的命令执行完毕后会立即退出终端。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">      run_nifi_cmd</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"exec ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_nifi_cmd</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # Linux eval命令用于重新运算求出参数的内容。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">    # eval可读取一连串的参数，然后再依参数本身的特性来执行。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$1</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"start\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> ]; </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">then</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        ( </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">eval</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"cd ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} &amp;&amp; ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_nifi_cmd</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> &amp; )</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">&gt;</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> /dev/null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\"> 1&gt;&amp;</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">-</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    else</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        eval</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"cd ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">NIFI_HOME</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">} &amp;&amp; ${</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">run_nifi_cmd</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">    fi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">    EXIT_STATUS</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E5C07B\\">$?</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">   # 稍等(3秒)，等待日志记录完成，然后回显新行。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">   # 我们这样做是为了避免在运行命令后，日志在控制台被吐出来，然后返回给用户</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    sleep</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 3</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">    echo</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    init</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$1</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">    run</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$@</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 方法区 end</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 3、入口 start</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># ==========================</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 判断 $1 第一个参数是什么 </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># 其中install 将nifi安装为service </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># start 启动</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># stop 停止</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># run</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># status </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># dump</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># env</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># restart 重启</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\"># $@ 传全部参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">case</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$1</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> in</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">    install</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        install</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$@</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">    start</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">|</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">stop</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">|</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">run</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">|</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">status</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">|</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">dump</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">|</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">env</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        main</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">$@</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#E06C75\\">    restart</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        init</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        run</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"stop\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">        run</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"start\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">    *)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#56B6C2\\">        echo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> \\"Usage nifi {start|stop|run|restart|status|dump|install}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">        ;;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">esac</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{y as comp,g as data};
