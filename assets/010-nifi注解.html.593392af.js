import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,d as t}from"./app.17aaeba5.js";var e="/assets/1.1c08b5d6.png",p="/assets/2.08056b6a.png",o="/assets/3.220988c9.png";const c={},i=t('<p>\u9605\u8BFB\u8FD9\u7BC7\u6587\u7AE0\u4E4B\u524D\u5982\u679C\u5BF9Java\u6CE8\u89E3\u6CA1\u6709\u4EC0\u4E48\u6DF1\u5165\u4E86\u89E3\uFF0C\u5EFA\u8BAE\u770B\u4E00\u770Bjava\u6CE8\u89E3</p><p>\u5F00\u59CB\u4E4B\u524D\uFF0C\u770B\u4E00\u4E0B\u6E90\u7801\u7ED3\u6784\uFF0Cnifi\u7684\u6CE8\u89E3\u90FD\u662F\u5728nifi-api moudle\u4E2D\u7684\u3002 <img src="'+e+`" alt="" loading="lazy"> \u4ECE\u622A\u56FE\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0Cnifi\u81EA\u5B9A\u4E49\u7684\u6CE8\u89E3\u4E3B\u8981\u67095\u7C7B</p><ul><li>behavior \u884C\u4E3A\u7C7B\uFF0C\u6307\u660E\u4E00\u4E2A\u7EC4\u4EF6\u5E94\u8BE5\u6709\u4EC0\u4E48\u6837\u7684\u884C\u4E3A</li><li>configuration \u914D\u7F6E\u7C7B\uFF0C\u5BF9\u7EC4\u4EF6\u505A\u4E00\u4E9B\u9ED8\u8BA4\u7684\u914D\u7F6E\uFF0C\u6BD4\u5982\u8BF4\u8C03\u5EA6\u65F6\u95F4\uFF0C\u60E9\u7F5A\u65F6\u95F4\u7B49\u7B49</li><li>documentation \u6587\u6863\u7C7B \u6CE8\u89E3\u7684\u5185\u5BB9\u4F1A\u5F62\u6210\u6587\u6863</li><li>lifecycle \u751F\u547D\u5468\u671F\u7C7B \u7528\u5728\u65B9\u6CD5\u4E0A \u6307\u660E\u4EC0\u4E48\u65F6\u5019\u8BE5\u6267\u884C\u8FD9\u4E9Bmethod</li><li>notification \u901A\u77E5\u7C7B \u91CC\u9762\u6CE8\u89E3\u8F83\u5C11\uFF0C\u7528\u4E8E\u96C6\u7FA4\u53D8\u5316\u65F6\u6307\u660E\u9700\u8981\u6267\u884C\u4E00\u4E9B\u65B9\u6CD5</li></ul><p>\u4EE5\u4E0B\u6BCF\u4E2A\u5206\u7C7B\u4E2D\u90FD\u4E3E\u51E0\u4E2A\u5E26\u6E90\u7801\u7684\u6CE8\u89E3\u4F8B\u5B50\uFF0C\u7136\u540E\u5176\u4F59\u6CE8\u89E3\u6211\u89C9\u5F97\u6CA1\u5FC5\u8981\u8BE6\u7EC6\u8BF4\u7684\u53EA\u662F\u7B80\u5355\u8BF4\u660E\u5176\u4F5C\u7528\u3002</p><h2 id="notification" tabindex="-1"><a class="header-anchor" href="#notification" aria-hidden="true">#</a> notification</h2><h3 id="onprimarynodestatechange" tabindex="-1"><a class="header-anchor" href="#onprimarynodestatechange" aria-hidden="true">#</a> OnPrimaryNodeStateChange</h3><p>\u53EA\u6709\u4E00\u4E2A\u6CE8\u89E3 OnPrimaryNodeStateChange</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span> \\\\ \u6CE8\u89E3\u8868\u660E\u8FD9\u4E2A\u6CE8\u89E3\u5E94\u8BE5\u88AB javadoc\u5DE5\u5177\u8BB0\u5F55
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span> \\\\\u7528\u4E8E\u65B9\u6CD5
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span> \\\\\u751F\u547D\u5468\u671F \u8FD0\u884C\u65F6
<span class="token annotation punctuation">@Inherited</span> \\\\\u662F\u96C6\u6210\u7684<span class="token punctuation">(</span>\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u6CE8\u89E3\u4E5F\u88AB\u7EE7\u627F<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnPrimaryNodeStateChange</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6807\u8BB0\u6CE8\u91CA\uFF0C\u7EC4\u4EF6\u53EF\u4EE5\u4F7F\u7528\u8BE5\u6CE8\u91CA\u6307\u793A\u5728\u96C6\u7FA4\u4E2D\u7684\u4E3B\u8282\u70B9\u72B6\u6001\u53D1\u751F\u66F4\u6539\u65F6\u5E94\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u3002</p><h4 id="\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528" aria-hidden="true">#</a> \u5E94\u7528</h4><p>\u6BD4\u5982GetHbase\u5E94\u8BE5\u53EA\u8FD0\u884C\u5728\u4E3B\u8282\u70B9\u4E2D\uFF0C\u5176\u4E2D\u5C31\u6709\u4E00\u4E2A\u65B9\u6CD5,\u5F53\u4E3B\u8282\u70B9\u53D1\u751F\u53D8\u5316\u65F6\u6B63\u5728\u91CD\u65B0\u9009\u4E3E\u65F6\uFF0CjustElectedPrimaryNode\u5C31\u662Ffalse\uFF0C\u8FDB\u800C\u544A\u8BC9\u6267\u884C\u67E5\u8BE2\u6570\u636E\u7684\u65B9\u6CD5\u5148\u4E0D\u8981\u6267\u884C\u67E5\u8BE2\u903B\u8F91\uFF0C\u7B49\u96C6\u7FA4\u4E3B\u8282\u70B9\u786E\u5B9A\u540E\u518D\u7EE7\u7EED\u6267\u884C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@OnPrimaryNodeStateChange</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPrimaryNodeChange</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">PrimaryNodeState</span> newState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        justElectedPrimaryNode <span class="token operator">=</span> <span class="token punctuation">(</span>newState <span class="token operator">==</span> <span class="token class-name">PrimaryNodeState</span><span class="token punctuation">.</span>ELECTED_PRIMARY_NODE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6355\u83B7\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#\u6355\u83B7\u5904\u7406" aria-hidden="true">#</a> \u6355\u83B7\u5904\u7406</h4><p>\u5728FlowController.java\u4E2D\u8FDB\u884C\u5904\u7406\uFF0C\u5176\u4E2D\u6709\u4E00\u4E2A\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u8BBE\u7F6E\u96C6\u7FA4\u4E3B\u8282\u70B9</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrimary</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> primary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">PrimaryNodeState</span> nodeState <span class="token operator">=</span> primary <span class="token operator">?</span> <span class="token class-name">PrimaryNodeState</span><span class="token punctuation">.</span>ELECTED_PRIMARY_NODE <span class="token operator">:</span> <span class="token class-name">PrimaryNodeState</span><span class="token punctuation">.</span>PRIMARY_NODE_REVOKED<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ProcessGroup</span> rootGroup <span class="token operator">=</span> <span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token function">getRootGroupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5FAA\u73AF\u6240\u6709\u7684Processor\uFF0C\u6267\u884C\u88AB\u6CE8\u89E3onPrimaryNodeChange\u6807\u6CE8\u7684\u65B9\u6CD5</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ProcessorNode</span> procNode <span class="token operator">:</span> rootGroup<span class="token punctuation">.</span><span class="token function">findAllProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">NarCloseable</span> narCloseable <span class="token operator">=</span> <span class="token class-name">NarCloseable</span><span class="token punctuation">.</span><span class="token function">withComponentNarLoader</span><span class="token punctuation">(</span>procNode<span class="token punctuation">.</span><span class="token function">getProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> procNode<span class="token punctuation">.</span><span class="token function">getIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">quietlyInvokeMethodsWithAnnotation</span><span class="token punctuation">(</span><span class="token class-name">OnPrimaryNodeStateChange</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> procNode<span class="token punctuation">.</span><span class="token function">getProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nodeState<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ControllerServiceNode</span> serviceNode <span class="token operator">:</span> <span class="token function">getAllControllerServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">NarCloseable</span> narCloseable <span class="token operator">=</span> <span class="token class-name">NarCloseable</span><span class="token punctuation">.</span><span class="token function">withComponentNarLoader</span><span class="token punctuation">(</span>serviceNode<span class="token punctuation">.</span><span class="token function">getControllerServiceImplementation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> serviceNode<span class="token punctuation">.</span><span class="token function">getIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">quietlyInvokeMethodsWithAnnotation</span><span class="token punctuation">(</span><span class="token class-name">OnPrimaryNodeStateChange</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> serviceNode<span class="token punctuation">.</span><span class="token function">getControllerServiceImplementation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nodeState<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ReportingTaskNode</span> reportingTaskNode <span class="token operator">:</span> <span class="token function">getAllReportingTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">NarCloseable</span> narCloseable <span class="token operator">=</span> <span class="token class-name">NarCloseable</span><span class="token punctuation">.</span><span class="token function">withComponentNarLoader</span><span class="token punctuation">(</span>reportingTaskNode<span class="token punctuation">.</span><span class="token function">getReportingTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reportingTaskNode<span class="token punctuation">.</span><span class="token function">getIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">quietlyInvokeMethodsWithAnnotation</span><span class="token punctuation">(</span><span class="token class-name">OnPrimaryNodeStateChange</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> reportingTaskNode<span class="token punctuation">.</span><span class="token function">getReportingTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nodeState<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// update primary</span>
        eventDrivenWorkerQueue<span class="token punctuation">.</span><span class="token function">setPrimary</span><span class="token punctuation">(</span>primary<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// update the heartbeat bean</span>
        <span class="token keyword">final</span> <span class="token class-name">HeartbeatBean</span> oldBean <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heartbeatBeanRef<span class="token punctuation">.</span><span class="token function">getAndSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HeartbeatBean</span><span class="token punctuation">(</span>rootGroup<span class="token punctuation">,</span> primary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Emit a bulletin detailing the fact that the primary node state has changed</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldBean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> oldBean<span class="token punctuation">.</span><span class="token function">isPrimary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> primary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token class-name">String</span> message <span class="token operator">=</span> primary <span class="token operator">?</span> <span class="token string">&quot;This node has been elected Primary Node&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;This node is no longer Primary Node&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token class-name">Bulletin</span> bulletin <span class="token operator">=</span> <span class="token class-name">BulletinFactory</span><span class="token punctuation">.</span><span class="token function">createBulletin</span><span class="token punctuation">(</span><span class="token string">&quot;Primary Node&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Severity</span><span class="token punctuation">.</span>INFO<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            bulletinRepository<span class="token punctuation">.</span><span class="token function">addBulletin</span><span class="token punctuation">(</span>bulletin<span class="token punctuation">)</span><span class="token punctuation">;</span>
            LOG<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="documentation" tabindex="-1"><a class="header-anchor" href="#documentation" aria-hidden="true">#</a> documentation</h2><h3 id="capabilitydescription" tabindex="-1"><a class="header-anchor" href="#capabilitydescription" aria-hidden="true">#</a> CapabilityDescription</h3><p>\u5728\u7EC4\u4EF6\u7C7B\u4E0A\u4F7F\u7528\uFF0C\u8BF4\u660E\u8FD9\u4E2A\u7EC4\u4EF6\u7684\u80FD\u529B\u4F5C\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">CapabilityDescription</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5E94\u7528-1" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528-1" aria-hidden="true">#</a> \u5E94\u7528</h4><p>\u8FD9\u4E2A\u6CE8\u89E3\u5728nifi\u4E2D\u5F88\u5E38\u89C1\uFF0C\u6BD4\u5982\u4E0A\u9762\u63D0\u5230\u7684GetHbase</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@TriggerWhenEmpty</span><span class="token comment">//behavior\u4E2D \u5373\u4F7F\u5DE5\u4F5C\u961F\u5217\u4E3A\u7A7A\u4E5F\u4F1A\u89E6\u53D1\u8C03\u5EA6\uFF0C\u6D41\u7A0B\u7684\u8D77\u59CB\u7EC4\u4EF6</span>
<span class="token annotation punctuation">@TriggerSerially</span><span class="token comment">//behavior onTrigger()\u65B9\u6CD5\u5E76\u53D1\u4E0B\u4E0D\u5B89\u5168  GetHbase \u62C9\u53D6\u6570\u636E\u662F\u5355\u7EBF\u7A0B\u8FD0\u884C</span>
<span class="token annotation punctuation">@InputRequirement</span><span class="token punctuation">(</span><span class="token class-name">InputRequirement<span class="token punctuation">.</span>Requirement</span><span class="token punctuation">.</span>INPUT_FORBIDDEN<span class="token punctuation">)</span><span class="token comment">//behavior \u662F\u5426\u9700\u8981\u4F20\u5165\u8FDE\u63A5\uFF0C\u8FD9\u91CC\u662F\u4E0D\u9700\u8981</span>
<span class="token annotation punctuation">@Tags</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;hbase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ingest&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@CapabilityDescription</span><span class="token punctuation">(</span><span class="token string">&quot;This Processor polls HBase for any records in the specified table. The processor keeps track of the timestamp of the cells that &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;it receives, so that as new records are pushed to HBase, they will automatically be pulled. Each record is output in JSON format, as &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;{\\&quot;row\\&quot;: \\&quot;&lt;row key&gt;\\&quot;, \\&quot;cells\\&quot;: { \\&quot;&lt;column 1 family&gt;:&lt;column 1 qualifier&gt;\\&quot;: \\&quot;&lt;cell 1 value&gt;\\&quot;, \\&quot;&lt;column 2 family&gt;:&lt;column 2 qualifier&gt;\\&quot;: \\&quot;&lt;cell 2 value&gt;\\&quot;, ... }}. &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;For each record received, a Provenance RECEIVE event is emitted with the format hbase://&lt;table name&gt;/&lt;row key&gt;, where &lt;row key&gt; is the UTF-8 encoded value of the row&#39;s key.&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@WritesAttributes</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//behavior \u8F93\u51FA\u6D41\u4E2D\u4F1A\u989D\u5916\u5199\u5165\u7684\u5C5E\u6027</span>
    <span class="token annotation punctuation">@WritesAttribute</span><span class="token punctuation">(</span>attribute <span class="token operator">=</span> <span class="token string">&quot;hbase.table&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;The name of the HBase table that the data was pulled from&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@WritesAttribute</span><span class="token punctuation">(</span>attribute <span class="token operator">=</span> <span class="token string">&quot;mime.type&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Set to application/json to indicate that output is JSON&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//behavior \u7EC4\u4EF6\u4F7F\u7528\u4E86StateManager\uFF0C\u8BE5\u6CE8\u89E3\u89E3\u91CA\u6B64\u7EC4\u4EF6\u5728State\u4EC0\u4E48\u8303\u56F4\u4E2D\u5B58\u50A8\u4E86\u4EC0\u4E48\u4FE1\u606F</span>
<span class="token annotation punctuation">@Stateful</span><span class="token punctuation">(</span>scopes <span class="token operator">=</span> <span class="token class-name">Scope</span><span class="token punctuation">.</span>CLUSTER<span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;After performing a fetching from HBase, stores a timestamp of the last-modified cell that was found. In addition, it stores the ID of the row(s) &quot;</span>
    <span class="token operator">+</span> <span class="token string">&quot;and the value of each cell that has that timestamp as its modification date. This is stored across the cluster and allows the next fetch to avoid duplicating data, even if this Processor is &quot;</span>
    <span class="token operator">+</span> <span class="token string">&quot;run on Primary Node only and the Primary Node changes.&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetHBase</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractProcessor</span> <span class="token keyword">implements</span> <span class="token class-name">VisibilityFetchSupport</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6355\u83B7\u5904\u7406-1" tabindex="-1"><a class="header-anchor" href="#\u6355\u83B7\u5904\u7406-1" aria-hidden="true">#</a> \u6355\u83B7\u5904\u7406</h4><p>\u4E3B\u8981\u6709\u4E09\u4E2A\u6355\u83B7\u5904\u7406\u7684\u5730\u65B9</p><p>\u7B2C\u4E00\u4E2A\u662F\u751F\u6210\u6211\u4EEC\u5E38\u89C1\u7684\u6587\u6863\u91CC\u7EC4\u4EF6\u80FD\u529B\u63CF\u8FF0</p><p>HtmlDocumentationWriter.java \u4E3A\u4E00\u4E2A\u53EF\u914D\u7F6E\u7684\u7EC4\u4EF6\u751F\u6210HTML\u6587\u6863\u3002\u8BE5\u7C7B\u7528\u4E8E\u4E3AControllerService\u548CReportingTask\u751F\u6210\u6587\u6863\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u6CA1\u6709\u5176\u4ED6\u4FE1\u606F\u3002 HtmlProcessorDocumentationWriter.java \u4E3AProcessor\u751F\u6210\u6587\u6863</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HtmlDocumentationWriter</span> <span class="token keyword">implements</span> <span class="token class-name">DocumentationWriter</span> <span class="token punctuation">{</span>
     <span class="token doc-comment comment">/**
     * Gets a description of the ConfigurableComponent using the
     * CapabilityDescription annotation.
     *
     * <span class="token keyword">@param</span> <span class="token parameter">configurableComponent</span> the component to describe
     * <span class="token keyword">@return</span> a description of the configurableComponent
     */</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ConfigurableComponent</span> configurableComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">CapabilityDescription</span> capabilityDescription <span class="token operator">=</span> configurableComponent<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span>
                <span class="token class-name">CapabilityDescription</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>capabilityDescription <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            description <span class="token operator">=</span> capabilityDescription<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            description <span class="token operator">=</span> <span class="token string">&quot;No description provided.&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u989D\u5916\u8BF4\u4E00\u70B9\uFF0C\u8FD9\u4E2AHTML\u6587\u6863\u662F\u4EC0\u4E48\u65F6\u5019\u751F\u6210\u7684\u5462?\u5728\u542F\u52A8jetty\u65F6\uFF0C\u770BJettyServer.java</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">ExtensionManager</span><span class="token punctuation">.</span><span class="token function">discoverExtensions</span><span class="token punctuation">(</span>systemBundle<span class="token punctuation">,</span> bundles<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ExtensionManager</span><span class="token punctuation">.</span><span class="token function">logClassLoaderMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u751F\u6210\u6587\u6863 extensionMapping\u91CC\u9762\u6709\u4E00\u7CFB\u5217\u7EC4\u4EF6class</span>
            <span class="token class-name">DocGenerator</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> extensionMapping<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u800C\u5728DocGenerator.java\u4E2D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * Generates documentation into the work/docs dir specified by
     * NiFiProperties.
     *
     * <span class="token keyword">@param</span> <span class="token parameter">properties</span> to lookup nifi properties
     * <span class="token keyword">@param</span> <span class="token parameter">extensionMapping</span> extension mapping
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">NiFiProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">ExtensionMapping</span> extensionMapping<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">File</span> explodedNiFiDocsDir <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getComponentDocumentationWorkingDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Generating documentation for: &quot;</span> <span class="token operator">+</span> extensionMapping<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; components in: &quot;</span> <span class="token operator">+</span> explodedNiFiDocsDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4E3A\u6BCF\u4E2A\u7EC4\u4EF6\u751F\u6210\u6587\u6863</span>
        <span class="token function">documentConfigurableComponent</span><span class="token punctuation">(</span><span class="token class-name">ExtensionManager</span><span class="token punctuation">.</span><span class="token function">getExtensions</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> explodedNiFiDocsDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">documentConfigurableComponent</span><span class="token punctuation">(</span><span class="token class-name">ExtensionManager</span><span class="token punctuation">.</span><span class="token function">getExtensions</span><span class="token punctuation">(</span><span class="token class-name">ControllerService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> explodedNiFiDocsDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">documentConfigurableComponent</span><span class="token punctuation">(</span><span class="token class-name">ExtensionManager</span><span class="token punctuation">.</span><span class="token function">getExtensions</span><span class="token punctuation">(</span><span class="token class-name">ReportingTask</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> explodedNiFiDocsDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="deprecationnotice" tabindex="-1"><a class="header-anchor" href="#deprecationnotice" aria-hidden="true">#</a> DeprecationNotice</h3><p>\u8B66\u544A\u7EC4\u4EF6\u7684\u5F03\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>

<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DeprecationNotice</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">ConfigurableComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">alternatives</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">reason</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="seealso" tabindex="-1"><a class="header-anchor" href="#seealso" aria-hidden="true">#</a> SeeAlso</h3><p>\u8868\u793A\u6B64\u7EC4\u4EF6\u4E0E\u5217\u51FA\u7684\u7EC4\u4EF6\u76F8\u5173\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SeeAlso</span> <span class="token punctuation">{</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">ConfigurableComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="tags" tabindex="-1"><a class="header-anchor" href="#tags" aria-hidden="true">#</a> Tags</h3><p>\u5C06\u6807\u7B7E(\u5173\u952E\u5B57)\u4E0E\u7EC4\u4EF6\u5173\u8054\u3002\u8FD9\u4E9B\u6807\u8BB0\u4E0D\u5F71\u54CD\u4EFB\u4F55\u65B9\u5F0F\u7684\u7EC4\u4EF6\uFF0C\u4F46\u4F5C\u4E3A\u989D\u5916\u7684\u6587\u6863\uFF0C\u5E76\u53EF\u7528\u4E8E\u6392\u5E8F/\u8FC7\u6EE4\u5668\u5904\u7406\u5668\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Tags</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> configuration</h2><h3 id="defaultschedule" tabindex="-1"><a class="header-anchor" href="#defaultschedule" aria-hidden="true">#</a> DefaultSchedule</h3><p>\u5904\u7406\u5668\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u914D\u7F6E\u8C03\u5EA6\u7B56\u7565\u3001\u5468\u671F\u548C\u5E76\u53D1\u4EFB\u52A1\u6570\u91CF\u7684\u9ED8\u8BA4\u8BBE\u7F6E\u3002ReportingTask\u53EF\u4EE5\u4F7F\u7528\u8BE5\u63A5\u53E3\u914D\u7F6E\u9ED8\u8BA4\u8BBE\u7F6E\u3001\u8BA1\u5212\u7B56\u7565\u548C\u5468\u671F\u3002\u6CE8\u610F\uFF0C\u5982\u679C\u4F7F\u7528@TriggerSerialy\u6CE8\u91CA\uFF0C\u90A3\u4E48\u5E76\u53D1\u4EFB\u52A1\u7684\u6570\u91CF\u5C06\u88AB\u5FFD\u7565</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DefaultSchedule</span> <span class="token punctuation">{</span>

    <span class="token class-name">SchedulingStrategy</span> <span class="token function">strategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span>  <span class="token class-name">SchedulingStrategy</span><span class="token punctuation">.</span>TIMER_DRIVEN<span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">period</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;0 sec&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">concurrentTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="defaultsettings" tabindex="-1"><a class="header-anchor" href="#defaultsettings" aria-hidden="true">#</a> DefaultSettings</h3><p>\u5904\u7406\u5668\u53EF\u4EE5\u7528\u6765\u914D\u7F6E\u4EA7\u91CF\u6301\u7EED\u65F6\u95F4\u3001\u60E9\u7F5A\u6301\u7EED\u65F6\u95F4\u548C\u516C\u544A\u65E5\u5FD7\u7EA7\u522B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DefaultSettings</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">yieldDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;1 sec&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">penaltyDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;30 sec&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">LogLevel</span> <span class="token function">bulletinLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token class-name">LogLevel</span><span class="token punctuation">.</span>WARN<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="behavior" tabindex="-1"><a class="header-anchor" href="#behavior" aria-hidden="true">#</a> behavior</h2><h3 id="dynamicproperties" tabindex="-1"><a class="header-anchor" href="#dynamicproperties" aria-hidden="true">#</a> DynamicProperties</h3><p>\u6307\u660E\u7EC4\u4EF6\u6709\u591A\u4E2A\u52A8\u6001\u5C5E\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DynamicProperties</span> <span class="token punctuation">{</span>

    <span class="token class-name">DynamicProperty</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dynamicproperty" tabindex="-1"><a class="header-anchor" href="#dynamicproperty" aria-hidden="true">#</a> DynamicProperty</h3><p>\u4E00\u4E2A\u53EF\u4EE5\u653E\u5728{@link ConfigurableComponent}\u4E0A\u7684\u6CE8\u91CA\uFF0C\u8868\u660E\u5B83\u652F\u6301\u52A8\u6001\u5C5E\u6027\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DynamicProperty</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token keyword">boolean</span> <span class="token function">supportsExpressionLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ExpressionLanguageScope</span> <span class="token function">expressionLanguageScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token class-name">ExpressionLanguageScope</span><span class="token punctuation">.</span>NONE<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dynamicrelationship" tabindex="-1"><a class="header-anchor" href="#dynamicrelationship" aria-hidden="true">#</a> DynamicRelationship</h3><p>\u652F\u6301\u52A8\u6001Relationship</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DynamicRelationship</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="eventdriven" tabindex="-1"><a class="header-anchor" href="#eventdriven" aria-hidden="true">#</a> EventDriven</h3><p>\u53EF\u4EE5\u653E\u7F6E\u5728\u5904\u7406\u5668\u4E0A\u7684\u6CE8\u91CA\uFF0C\u5B83\u5411\u6846\u67B6\u8868\u660E\u5904\u7406\u5668\u53EF\u4EE5\u6839\u636E\u201C\u4E8B\u4EF6\u201D\u7684\u53D1\u751F(\u4F8B\u5982\uFF0C\u5F53\u4E00\u4E2A\u6D41\u6587\u4EF6\u5728\u4E00\u4E2A\u4F20\u5165\u8FDE\u63A5\u4E2D\u52A0\u5165\u961F\u5217\u65F6)\u88AB\u8C03\u5EA6\u6765\u8FD0\u884C\uFF0C\u800C\u4E0D\u662F\u5468\u671F\u6027\u5730\u88AB\u89E6\u53D1\u3002</p><p>\u6B64\u6CE8\u91CA\u4E0D\u5E94\u4E0E{@link trigger\u4E32\u884C}\u6216{@link TriggerWhenEmpty}\u4E00\u8D77\u4F7F\u7528\u3002\u5982\u679C\u6B64\u6CE8\u91CA\u4E0E\u8FD9\u4E9B\u5176\u4ED6\u6CE8\u91CA\u4E2D\u7684\u4EFB\u4F55\u4E00\u4E2A\u4E00\u8D77\u4F7F\u7528\uFF0C\u5219\u5904\u7406\u5668\u5C06\u4E0D\u80FD\u4EE5\u4E8B\u4EF6\u9A71\u52A8\u6A21\u5F0F\u8C03\u5EA6\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EventDriven</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="inputrequirement" tabindex="-1"><a class="header-anchor" href="#inputrequirement" aria-hidden="true">#</a> InputRequirement</h3><p>\u6307\u660E\u4E00\u4E2A\u7EC4\u4EF7\u662F\u5426\u9700\u8981\u8F93\u5165</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">InputRequirement</span> <span class="token punctuation">{</span>
    <span class="token class-name">Requirement</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">enum</span> <span class="token class-name">Requirement</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5FC5\u987B\u8F93\u5165</span>
        INPUT_REQUIRED<span class="token punctuation">,</span>

        <span class="token comment">//\u5141\u8BB8\u8F93\u5165</span>
        INPUT_ALLOWED<span class="token punctuation">,</span>

        <span class="token comment">//\u4E0D\u8BB8\u8F93\u5165</span>
        INPUT_FORBIDDEN<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="primarynodeonly" tabindex="-1"><a class="header-anchor" href="#primarynodeonly" aria-hidden="true">#</a> PrimaryNodeOnly</h3><p>\u53EA\u5728\u96C6\u7FA4\u4E3B\u8282\u70B9\u5141\u8BB8</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">PrimaryNodeOnly</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="readsattribute" tabindex="-1"><a class="header-anchor" href="#readsattribute" aria-hidden="true">#</a> ReadsAttribute</h3><p>\u6307\u660E\u7EC4\u4EF6\u8BFB\u53D6\u8F93\u5165\u6D41\u7684\u7279\u70B9\u6D41\u5C5E\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ReadsAttribute</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">attribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="readsattributes" tabindex="-1"><a class="header-anchor" href="#readsattributes" aria-hidden="true">#</a> ReadsAttributes</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ReadsAttributes</span> <span class="token punctuation">{</span>

    <span class="token class-name">ReadsAttribute</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="requiresinstanceclassloading" tabindex="-1"><a class="header-anchor" href="#requiresinstanceclassloading" aria-hidden="true">#</a> RequiresInstanceClassLoading</h3><p>\u7EC4\u4EF6\u53EF\u4EE5\u4F7F\u7528\u6B64\u6CE8\u89E3\u6765\u6307\u793A\u6846\u67B6\u5E94\u8BE5\u4E3A\u7EC4\u4EF6\u7684\u6BCF\u4E2A\u5B9E\u4F8B\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u7C7B\u52A0\u8F7D\u5668\uFF0C\u5C06\u7EC4\u4EF6\u7684NARClassLoader\u4E2D\u7684\u6240\u6709\u8D44\u6E90\u590D\u5236\u5230\u4E00\u4E2A\u65B0\u7684\u7C7B\u52A0\u8F7D\u5668\u4E2D\uFF0C\u8FD9\u4E2A\u7C7B\u52A0\u8F7D\u5668\u53EA\u4F1A\u88AB\u7EC4\u4EF6\u7684\u7ED9\u5B9A\u5B9E\u4F8B\u4F7F\u7528\u3002</p><p>\u5982\u679C\u5C06cloneAncestorResources\u8BBE\u7F6E\u4E3Atrue\uFF0C\u5219\u5B9E\u4F8B\u7C7B\u88C5\u5165\u5668\u5C06\u5305\u542B\u7956\u5148\u8D44\u6E90\uFF0C\u76F4\u5230\u7B2C\u4E00\u4E2A\u5305\u542B\u7531\u7EC4\u4EF6\u5F15\u7528\u7684\u63A7\u5236\u5668\u670D\u52A1API\u7684\u7C7B\u88C5\u5165\u5668\uFF0C\u6216\u8005\u76F4\u5230Jetty NAR\u3002</p><p>\u793A\u4F8B#1 - PutHDFS\u5C06\u6B64\u6807\u5FD7\u8BBE\u7F6E\u4E3Atrue\uFF0C\u5E76\u4E14\u4E0D\u5F15\u7528\u4EFB\u4F55\u63A7\u5236\u5668\u670D\u52A1\uFF0C\u56E0\u6B64\u5B83\u5C06\u5305\u542B\u6765\u81EAnifi-hadoop-nar\u3001nifi-hadoop-library-nar\u548Cnifi-standard-services-api-nar\u7684\u8D44\u6E90\uFF0C\u5E76\u505C\u7559\u5728nifi-jetty-nar\u3002</p><p>\u793A\u4F8B#2 - \u5982\u679CPutHDFS\u5F15\u7528\u4E86\u4E00\u4E2ASSLContext\u5E76\u5C06\u8BE5\u6807\u5FD7\u8BBE\u7F6E\u4E3Atrue\uFF0C\u90A3\u4E48\u5B83\u5C06\u5305\u542B\u6765\u81EAnifi-hadoop-nar\u3001nifi-hadoop-library-nar\u7684\u8D44\u6E90\uFF0C\u5E76\u5728nifi-standard-services-api-nar\u4E4B\u524D\u505C\u6B62\u3002</p><p>\u793A\u4F8B#3 - HBaseClientService_1_1_2\u6CA1\u6709\u8BBE\u7F6E\u8FD9\u4E2A\u6807\u5FD7\uFF0C\u56E0\u6B64\u5B83\u9ED8\u8BA4\u4E3Afalse\uFF0C\u56E0\u6B64\u53EA\u5305\u542B\u6765\u81EAnifi-hbase-client-service-1_1_2-nar\u7684\u8D44\u6E90\u3002</p><p>\u6CE8\u610F:\u5728\u4F7F\u7528\u8BE5\u6CE8\u91CA\u65F6\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u7EC4\u4EF6\u7684\u6BCF\u4E2A\u6DFB\u52A0\u5B9E\u4F8B\u90FD\u4F1A\u6BD4\u4E0D\u4F7F\u7528\u8BE5\u6CE8\u91CA\u7684\u7EC4\u4EF6\u589E\u52A0\u66F4\u591A\u7684\u5185\u5B58\u5360\u7528\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RequiresInstanceClassLoading</span> <span class="token punctuation">{</span>

    <span class="token keyword">boolean</span> <span class="token function">cloneAncestorResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="restriction" tabindex="-1"><a class="header-anchor" href="#restriction" aria-hidden="true">#</a> Restriction</h3><p>\u7EC4\u4EF6\u7684\u7279\u5B9A\u9650\u5236\u3002\u6307\u793A\u6240\u9700\u7684\u6743\u9650\u662F\u4EC0\u4E48\u4EE5\u53CA\u4E3A\u4EC0\u4E48\u5B58\u5728\u9650\u5236\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Restriction</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Provides a listing of RequiredPermissions.
     */</span>
    <span class="token class-name">RequiredPermission</span> <span class="token function">requiredPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Provides a explanation of why the component usage is restricted
     */</span>
    <span class="token class-name">String</span> <span class="token function">explanation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="restricted" tabindex="-1"><a class="header-anchor" href="#restricted" aria-hidden="true">#</a> Restricted</h3><p>\u5C06\u7EC4\u4EF6\u7684\u4F7F\u7528\u6807\u8BB0\u4E3A\u4EC5\u9650\u5177\u6709\u63D0\u5347\u6743\u9650\u7684\u7528\u6237\u4F7F\u7528\u3002 {@code Restricted}\u7EC4\u4EF6\u53EF\u4EE5\u7528\u6765\u6267\u884C\u64CD\u4F5C\u5458\u901A\u8FC7NiFi REST API/UI\u63D0\u4F9B\u7684\u4EFB\u610F\u672A\u6D88\u6BD2\u7684\u4EE3\u7801\uFF0C\u4E5F\u53EF\u4EE5\u7528\u6765\u4F7F\u7528NiFi OS\u51ED\u8BC1\u83B7\u53D6\u6216\u4FEE\u6539NiFi\u4E3B\u673A\u7CFB\u7EDF\u4E0A\u7684\u6570\u636E\u3002\u8FD9\u4E9B\u7EC4\u4EF6\u53EF\u4EE5\u7531\u5176\u4ED6\u6388\u6743\u7684NiFi\u7528\u6237\u4F7F\u7528\uFF0C\u4EE5\u8D85\u51FA\u5E94\u7528\u7A0B\u5E8F\u7684\u9884\u671F\u7528\u9014\u3001\u5347\u7EA7\u7279\u6743\uFF0C\u6216\u8005\u53EF\u4EE5\u516C\u5F00\u5173\u4E8ENiFi\u8FDB\u7A0B\u6216\u4E3B\u673A\u7CFB\u7EDF\u5185\u90E8\u7684\u6570\u636E\u3002\u6240\u6709\u8FD9\u4E9B\u529F\u80FD\u90FD\u5E94\u8BE5\u88AB\u8BA4\u4E3A\u662F\u7279\u6743\u7684\uFF0C\u7BA1\u7406\u5458\u5E94\u8BE5\u77E5\u9053\u8FD9\u4E9B\u529F\u80FD\uFF0C\u5E76\u4E3A\u53D7\u4FE1\u4EFB\u7528\u6237\u7684\u5B50\u96C6\u663E\u5F0F\u5730\u542F\u7528\u5B83\u4EEC\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Restricted</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Provides a description of why the component usage is restricted. If using granular
     * restrictions, specific explanations should be set in the Restriction.
     */</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Provides a listing of specific Restrictions. If unspecified, this component will
     * require access to restricted components regardless of restrictions.
     */</span>
    <span class="token class-name">Restriction</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">restrictions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

\u6BD4\u5982<span class="token punctuation">(</span>\u987A\u4FBF\u770B\u770B\u6709\u6CA1\u6709\u5FD8\u8BB0\u4E0A\u6587\u63D0\u5230\u7684\u8FD9\u4E9B\u6CE8\u89E3\u662F\u4EC0\u4E48\u610F\u601D<span class="token punctuation">)</span>
\`\`\`java
<span class="token annotation punctuation">@Tags</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;invoke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;groovy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;python&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jython&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jruby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ruby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lua&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;luaj&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@CapabilityDescription</span><span class="token punctuation">(</span><span class="token string">&quot;Experimental - Invokes a script engine for a Processor defined in the given script. The script must define &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;a valid class that implements the Processor interface, and it must set a variable &#39;processor&#39; to an instance of &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;the class. Processor methods such as onTrigger() will be delegated to the scripted Processor instance. Also any &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;Relationships or PropertyDescriptors defined by the scripted processor will be added to the configuration dialog.  &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;Experimental: Impact of sustained usage not yet verified.&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@DynamicProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;A script engine property to update&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;The value to set it to&quot;</span><span class="token punctuation">,</span>
        expressionLanguageScope <span class="token operator">=</span> <span class="token class-name">ExpressionLanguageScope</span><span class="token punctuation">.</span>FLOWFILE_ATTRIBUTES<span class="token punctuation">,</span>
        description <span class="token operator">=</span> <span class="token string">&quot;Updates a script engine property specified by the Dynamic Property&#39;s key with the value specified by the Dynamic Property&#39;s value&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Stateful</span><span class="token punctuation">(</span>scopes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Scope</span><span class="token punctuation">.</span>LOCAL<span class="token punctuation">,</span> <span class="token class-name">Scope</span><span class="token punctuation">.</span>CLUSTER<span class="token punctuation">}</span><span class="token punctuation">,</span>
        description <span class="token operator">=</span> <span class="token string">&quot;Scripts can store and retrieve state using the State Management APIs. Consult the State Manager section of the Developer&#39;s Guide for more details.&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SeeAlso</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ExecuteScript</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Restricted</span><span class="token punctuation">(</span>
        restrictions <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Restriction</span><span class="token punctuation">(</span>
                        requiredPermission <span class="token operator">=</span> <span class="token class-name">RequiredPermission</span><span class="token punctuation">.</span>EXECUTE_CODE<span class="token punctuation">,</span>
                        explanation <span class="token operator">=</span> <span class="token string">&quot;Provides operator the ability to execute arbitrary code assuming all permissions that Intellin has.&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InvokeScriptedProcessor</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSessionFactoryProcessor</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u7C7B\u7EC4\u4EF6\u5728UI\u4E0A\u4F1A\u6709\u4E00\u4E2A\u7279\u6B8A\u7684\u6807\u8BB0 <img src="`+p+`" alt="" loading="lazy"></p><h3 id="supportsbatching" tabindex="-1"><a class="header-anchor" href="#supportsbatching" aria-hidden="true">#</a> SupportsBatching</h3><p>\u5904\u7406\u5668\u5B9E\u73B0\u53EF\u4EE5\u4F7F\u7528\u6B64\u6CE8\u89E3\u6765\u6307\u793A\u7528\u6237\u5E94\u8BE5\u80FD\u591F\u4E3A\u5904\u7406\u5668\u63D0\u4F9B\u6279\u5904\u7406\u6301\u7EED\u65F6\u95F4\u3002\u5982\u679C\u4E00\u4E2A\u5904\u7406\u5668\u4F7F\u7528\u4E86\u8FD9\u4E2A\u6CE8\u91CA\uFF0C\u90A3\u4E48\u5B83\u5C31\u5141\u8BB8\u6846\u67B6\u5BF9ProcessSession\u8FDB\u884C\u6279\u5904\u7406\u7684\u63D0\u4EA4\uFF0C\u4EE5\u53CA\u5141\u8BB8\u6846\u67B6\u4ECE\u540E\u7EED\u5BF9ProcessSessionFactory.createSession() \u7684\u8C03\u7528\u4E2D\u591A\u6B21\u8FD4\u56DE\u76F8\u540C\u7684ProcessSession</p><p>\u4F7F\u7528\u6B64\u6CE8\u91CA\u65F6\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5BF9ProcessSession.commit()\u7684\u8C03\u7528\u53EF\u80FD\u65E0\u6CD5\u4FDD\u8BC1\u6570\u636E\u5DF2\u5B89\u5168\u5B58\u50A8\u5728NiFi\u7684\u5185\u5BB9\u5B58\u50A8\u5E93\u6216\u6D41\u6587\u4EF6\u5B58\u50A8\u5E93\u4E2D\u3002</p><p>\u56E0\u6B64\uFF0C\u5982\u679C\u5904\u7406\u5668\u662F\u5728\u4ECE\u8FDC\u7A0B\u6570\u636E\u6E90\u5220\u9664\u6570\u636E\u4E4B\u524D\u8C03\u7528ProcessSession.commit()\u6765\u786E\u4FDD\u6570\u636E\u662F\u6301\u4E45\u6027\u7684\uFF0C\u90A3\u4E48\u4E0D\u9002\u5408\u4F7F\u7528\u8FD9\u4E2A\u6CE8\u91CA\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SupportsBatching</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u989D\u5916\u63D0\u4E00\u70B9\uFF0C\u6BD4\u5982SplitText\u6709\u8FD9\u4E2A\u6CE8\u89E3\uFF0C\u90A3\u4E48\u53EF\u4EE5\u914D\u7F6E\u6279\u5904\u7406\u6301\u7EED\u65F6\u95F4\u6765\u63D0\u9AD8\u541E\u5410\u91CF <img src="`+o+`" alt="" loading="lazy"></p><h3 id="sideeffectfree" tabindex="-1"><a class="header-anchor" href="#sideeffectfree" aria-hidden="true">#</a> SideEffectFree</h3><p>\u6807\u8BB0\u6CE8\u91CAProcessor,\u5B9E\u73B0\u53EF\u4EE5\u7528\u6765\u6307\u793A\u5B83\u5BF9flowfile\u7684\u64CD\u4F5C\u53EF\u4EE5\u5B89\u5168\u5730\u8DE8\u8FDB\u7A0B\u4F1A\u8BDD\u91CD\u590D\u3002</p><p>\u5982\u679C\u5904\u7406\u5668\u6709\u8FD9\u4E2A\u6CE8\u91CA\uFF0C\u5E76\u4E14\u5B83\u5141\u8BB8\u6846\u67B6\u7BA1\u7406\u4F1A\u8BDD\u63D0\u4EA4\u548C\u56DE\u6EDA\uFF0C\u90A3\u4E48\u6846\u67B6\u53EF\u4EE5\u9009\u62E9\u5C06\u5904\u7406\u5668\u7684onTrigger\u65B9\u6CD5\u7684ProcessSession\u8D4B\u7ED9\u53E6\u4E00\u4E2A\u5904\u7406\u5668\u7684onTrigger\u65B9\u6CD5\u3002</p><p>\u5B83\u53EF\u4EE5\u77E5\u9053\u5982\u679C\u5931\u8D25\u4EE5\u53CA\u4E00\u7CFB\u5217\u7684\u5904\u7406\u5668\u4F7F\u7528\u76F8\u540C\u7684\u4F1A\u8BDD\u90FD\u53EF\u4EE5\u5B89\u5168\u5730\u56DE\u6EDA,\u6CA1\u6709\u4EFB\u4F55\u4E0D\u826F\u5F71\u54CD\u7684\u5916\u90E8\u670D\u52A1\u4E0D\u80FD\u56DE\u6EDA,\u56E0\u6B64\u6240\u6709\u7684\u6D41\u7A0B\u53EF\u4EE5\u5B89\u5168\u5730\u91CD\u590D(\u9690\u542B\u5E42\u7B49\u884C\u4E3A)\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SideEffectFree</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u6CE8\u91CA\u4F7F\u7528\u7684\u592A\u591A\u4E86\uFF0C\u6BD4\u5982(\u987A\u4FBF\u590D\u4E60\u4E00\u4E0B\u8FD9\u91CC\u9047\u5230\u8FC7\u5F97\u6CE8\u89E3)</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EventDriven</span>
<span class="token annotation punctuation">@SideEffectFree</span>
<span class="token annotation punctuation">@SupportsBatching</span>
<span class="token annotation punctuation">@Tags</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jolt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shiftr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;chainr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;defaultr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;removr&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cardinality&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sort&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@InputRequirement</span><span class="token punctuation">(</span><span class="token class-name">InputRequirement<span class="token punctuation">.</span>Requirement</span><span class="token punctuation">.</span>INPUT_REQUIRED<span class="token punctuation">)</span>
<span class="token annotation punctuation">@WritesAttribute</span><span class="token punctuation">(</span>attribute <span class="token operator">=</span> <span class="token string">&quot;mime.type&quot;</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">&quot;Always set to application/json&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@CapabilityDescription</span><span class="token punctuation">(</span><span class="token string">&quot;Applies a list of Jolt specifications to the flowfile JSON payload. A new FlowFile is created &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;with transformed content and is routed to the &#39;success&#39; relationship. If the JSON transform &quot;</span>
        <span class="token operator">+</span> <span class="token string">&quot;fails, the original FlowFile is routed to the &#39;failure&#39; relationship.&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoltTransformJSON</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractProcessor</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="stateful" tabindex="-1"><a class="header-anchor" href="#stateful" aria-hidden="true">#</a> Stateful</h3><p>\u53EF\u4EE5\u7528\u6765\u6307\u793A\u7EC4\u4EF6\u4F7F\u7528\u4E86StateManager\u7684\u6CE8\u91CA\u3002\u8BE5\u6CE8\u91CA\u5411\u7528\u6237\u63D0\u4F9B\u4E86\u5B58\u50A8\u54EA\u4E9B\u4FE1\u606F\u7684\u63CF\u8FF0\uFF0C\u4EE5\u4FBF\u7528\u6237\u80FD\u591F\u7406\u89E3\u663E\u793A\u7ED9\u4ED6\u4EEC\u7684\u5185\u5BB9\uFF0C\u5E76\u77E5\u9053\u5982\u679C\u4ED6\u4EEC\u9009\u62E9\u6E05\u9664\u72B6\u6001\uFF0C\u4ED6\u4EEC\u5C06\u6E05\u9664\u54EA\u4E9B\u5185\u5BB9\u3002\u6B64\u5916\uFF0C\u5982\u679C\u6CA1\u6709\u6B64\u6CE8\u91CA\uFF0CUI\u5C06\u4E0D\u4F1A\u5411\u7528\u6237\u663E\u793A\u4EFB\u4F55state\u4FE1\u606F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Stateful</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Provides a description of what information is being stored in the <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">StateManager</span></span><span class="token punctuation">}</span>
     */</span>
    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Indicates the Scope(s) associated with the State that is stored and retrieved.
     */</span>
    <span class="token class-name">Scope</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">scopes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="systemresourceconsideration" tabindex="-1"><a class="header-anchor" href="#systemresourceconsideration" aria-hidden="true">#</a> SystemResourceConsideration</h3><p>\u63CF\u8FF0\u7EC4\u4EF6\u7CFB\u7EDF\u8D44\u6E90\u5360\u7528\uFF0C\u6BD4\u5982\u4E00\u4E2A\u7EC4\u4EF6\u53EF\u80FD\u5360\u7528\u5927\u5185\u5B58\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u6CE8\u89E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span><span class="token class-name">SystemResourceConsiderations</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SystemResourceConsideration</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> DEFAULT_DESCRIPTION <span class="token operator">=</span> <span class="token string">&quot;An instance of this component can cause high usage of this system resource.  &quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;Multiple instances or high concurrency settings may result a degradation of performance.&quot;</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * The <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">SystemResource</span></span> SystemResource<span class="token punctuation">}</span> which may be affected by this component.
     */</span>
    <span class="token class-name">SystemResource</span> <span class="token function">resource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * A description of how this component and its configuration may affect system resource usage.
     */</span>
    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> DEFAULT_DESCRIPTION<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="systemresourceconsiderations" tabindex="-1"><a class="header-anchor" href="#systemresourceconsiderations" aria-hidden="true">#</a> SystemResourceConsiderations</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SystemResourceConsiderations</span> <span class="token punctuation">{</span>
    <span class="token class-name">SystemResourceConsideration</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="triggerserially" tabindex="-1"><a class="header-anchor" href="#triggerserially" aria-hidden="true">#</a> TriggerSerially</h3><p>\u6307\u660E\u8BE5\u7EC4\u4EF6onTrigger()\u65B9\u6CD5\u5E76\u53D1\u4E0D\u5B89\u5168</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">TriggerSerially</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="triggerwhenanydestinationavailable" tabindex="-1"><a class="header-anchor" href="#triggerwhenanydestinationavailable" aria-hidden="true">#</a> TriggerWhenAnyDestinationAvailable</h3><p>\u7528\u4E8E\u8C03\u6574\u80CC\u538B\u673A\u5236\uFF0C\u6307\u793A\u5982\u679C\u67D0\u4E2A\u5904\u7406\u5668\u7684\u76EE\u6807\u4E2D\u6709\u4F20\u5165\u6D41\u6587\u4EF6\u7684\u53EF\u7528\u7A7A\u95F4\uFF0C\u5219\u8BE5\u5904\u7406\u5668\u5C06\u88AB\u89E6\u53D1\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u53EA\u6709\u5F53\u6240\u6709\u7684\u76EE\u7684\u5730\u90FD\u62A5\u544A\u5B83\u4EEC\u6709\u53EF\u7528\u7A7A\u95F4\u624D\u89E6\u53D1(\u5373\uFF0C\u6240\u6709\u5BF9\u5916\u8FDE\u63A5\u5747\u672A\u6EE1)\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">TriggerWhenAnyDestinationAvailable</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9E\u9645\u4E0A\u4E5F\u53EA\u6709DistributeLoad\u8FD9\u4E2A\u7EC4\u4EF6\u7528\u4E86\u8FD9\u4E2A\u6CE8\u89E3</p><h3 id="triggerwhenempty" tabindex="-1"><a class="header-anchor" href="#triggerwhenempty" aria-hidden="true">#</a> TriggerWhenEmpty</h3><p>\u6307\u660E\u7EC4\u4EF6\u7684\u5DE5\u4F5C\u961F\u5217(\u4E0A\u6E38)\u53CA\u65F6\u6CA1\u6709\u6570\u636E\uFF0C\u4E5F\u6B63\u5E38\u8C03\u5EA6</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">TriggerWhenEmpty</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BD4\u5982\u90A3\u4E9BList\u3001Get\u7EC4\u4EF6\u7B49\u7B49</p><h3 id="writesattribute" tabindex="-1"><a class="header-anchor" href="#writesattribute" aria-hidden="true">#</a> WritesAttribute</h3><p>\u544A\u8BC9\u7528\u6237\u8BE5\u7EC4\u4EF6\u5411\u8F93\u51FA\u6D41\u5199\u4E86\u90A3\u4E9B\u5C5E\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WritesAttribute</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">attribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="writesattributes" tabindex="-1"><a class="header-anchor" href="#writesattributes" aria-hidden="true">#</a> WritesAttributes</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WritesAttributes</span> <span class="token punctuation">{</span>

    <span class="token class-name">WritesAttribute</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="lifecycle" tabindex="-1"><a class="header-anchor" href="#lifecycle" aria-hidden="true">#</a> lifecycle</h2><h3 id="onadded" tabindex="-1"><a class="header-anchor" href="#onadded" aria-hidden="true">#</a> OnAdded</h3><p>\u6307\u793A\u5728\u5C06\u7EC4\u4EF6\u6DFB\u52A0\u5230\u753B\u5E03\u65F6\u5E94\u8BE5\u8C03\u7528\u7684\u65B9\u6CD5\u3002\u6B64\u65B9\u6CD5\u5C06\u5728\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u6574\u4E2A\u751F\u547D\u5468\u671F\u4E2D\u8C03\u7528\u4E00\u6B21\u3002\u8C03\u7528\u5177\u6709\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u65F6\u4E0D\u5E26\u4EFB\u4F55\u53C2\u6570\uFF0C\u56E0\u4E3A\u6240\u6709\u8BBE\u7F6E\u548C\u5C5E\u6027\u90FD\u53EF\u4EE5\u5047\u5B9A\u4E3A\u9ED8\u8BA4\u503C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnAdded</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6682\u65F6\u6CA1\u4EC0\u4E48\u7EC4\u4EF6\u4F7F\u7528\u5230</p><h3 id="onconfigurationrestored" tabindex="-1"><a class="header-anchor" href="#onconfigurationrestored" aria-hidden="true">#</a> OnConfigurationRestored</h3><p>\u6307\u793A\u5728\u91CD\u65B0\u542F\u52A8NiFi\u540E\uFF0C\u53EA\u8981\u6062\u590D\u7EC4\u4EF6\u7684\u914D\u7F6E\uFF0C\u5C31\u5E94\u8BE5\u8C03\u7528\u5177\u6709\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u3002</p><p>\u5177\u6709\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u5FC5\u987B\u63A5\u53D7\u96F6\u53C2\u6570\u3002</p><p>\u6BCF\u5F53\u5411\u6D41\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u65B0\u7EC4\u4EF6\u65F6\uFF0C\u90FD\u4F1A\u7ACB\u5373\u8C03\u7528\u6B64\u65B9\u6CD5\uFF0C\u56E0\u4E3A\u6CA1\u6709\u8981\u6062\u590D\u7684\u914D\u7F6E(\u8FD9\u79CD\u60C5\u51B5\u6240\u6709\u914D\u7F6E\u90FD\u5F53\u505A\u5DF2\u6062\u590D\uFF0C\u56E0\u4E3A\u6CA1\u6709\u8981\u6062\u590D\u7684\u914D\u7F6E)\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnConfigurationRestored</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BD4\u5982\u5728AbstractSessionFactoryProcessor.java</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@OnConfigurationRestored</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">updateConfiguredRestoredTrue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        configurationRestored <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ondisabled" tabindex="-1"><a class="header-anchor" href="#ondisabled" aria-hidden="true">#</a> OnDisabled</h3><p>\u7981\u7528\u7EC4\u4EF6\u65F6\u8C03\u7528\u6B64\u6CE8\u89E3\u6807\u6CE8\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnDisabled</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onenabled" tabindex="-1"><a class="header-anchor" href="#onenabled" aria-hidden="true">#</a> OnEnabled</h3><p>\u89E3\u9664\u7981\u7528\u7EC4\u4EF6\u65F6\u8C03\u7528\u6B64\u6CE8\u89E3\u6807\u6CE8\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnEnabled</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onremoved" tabindex="-1"><a class="header-anchor" href="#onremoved" aria-hidden="true">#</a> OnRemoved</h3><p>\u7EC4\u4EF6\u5728\u753B\u5E03\u4E2D\u88AB\u5220\u9664\u65F6\u5E94\u8BE5\u8C03\u7528\u6B64\u6CE8\u89E3\u6807\u6CE8\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnRemoved</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onscheduled" tabindex="-1"><a class="header-anchor" href="#onscheduled" aria-hidden="true">#</a> OnScheduled</h3><p>\u6307\u793A\u5728\u8BA1\u5212\u8FD0\u884C\u7EC4\u4EF6\u65F6\u5E94\u8C03\u7528\u7684\u65B9\u6CD5\u3002\u5B83\u5C06\u5728\u4EFB\u4F55\u5BF9\u201ConTrigger\u201D\u7684\u8C03\u7528\u4E4B\u524D\u88AB\u8C03\u7528\uFF0C\u5E76\u4E14\u5C06\u5728\u8BA1\u5212\u8FD0\u884C\u7EC4\u4EF6\u65F6\u88AB\u8C03\u7528\u4E00\u6B21\u3002</p><p>\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\u7684\u65B9\u5F0F\u6709\u4E24\u79CD:\u4E00\u79CD\u662F\u7528\u6237\u5355\u51FB\u4EE5\u8C03\u5EA6\u7EC4\u4EF6\u8FD0\u884C\uFF0C\u53E6\u4E00\u79CD\u662F\u5C06\u201C\u81EA\u52A8\u6062\u590D\u72B6\u6001\u201D\u914D\u7F6E\u8BBE\u7F6E\u4E3Atrue(\u9ED8\u8BA4\u503C)\u91CD\u65B0\u542F\u52A8NiFi\uFF0C\u5E76\u4E14\u7EC4\u4EF6\u5DF2\u7ECF\u5728\u8FD0\u884C\u3002</p><p>\u4F7F\u7528\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u5FC5\u987B\u63A5\u53D70\u4E2A\u53C2\u6570\u6216\u5355\u4E2A\u53C2\u6570</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnScheduled</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BD4\u5982GetHbase.java</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u505A\u4E00\u4E9B\u6B63\u5E38\u8C03\u5EA6\u524D\u7684\u51C6\u5907\u5DE5\u4F5C \uFF0C\u89E6\u53D1\u673A\u5236  \u624B\u52A8start\u65F6\u6216\u8005NIFI\u91CD\u542F\u4E14\u8BE5\u7EC4\u4EF6\u5728\u8FD0\u884C\u6001</span>
 <span class="token annotation punctuation">@OnScheduled</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseColumns</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ProcessContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">StateMap</span> stateMap <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getStateManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token class-name">Scope</span><span class="token punctuation">.</span>CLUSTER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stateMap<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// no state has been stored in the State Manager - check if we have state stored in the</span>
            <span class="token comment">// DistributedMapCacheClient service and migrate it if so</span>
            <span class="token keyword">final</span> <span class="token class-name">DistributedMapCacheClient</span> client <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>DISTRIBUTED_CACHE_SERVICE<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asControllerService</span><span class="token punctuation">(</span><span class="token class-name">DistributedMapCacheClient</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token class-name">ScanResult</span> scanResult <span class="token operator">=</span> <span class="token function">getState</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>scanResult <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">storeState</span><span class="token punctuation">(</span>scanResult<span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getStateManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token function">clearState</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">final</span> <span class="token class-name">String</span> columnsValue <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>COLUMNS<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columns <span class="token operator">=</span> <span class="token punctuation">(</span>columnsValue <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> columnsValue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> columnsValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> column <span class="token operator">:</span> columns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
                <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parts <span class="token operator">=</span> column<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cf <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cq <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>cf<span class="token punctuation">,</span> cq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cf <span class="token operator">=</span> column<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>cf<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onshutdown" tabindex="-1"><a class="header-anchor" href="#onshutdown" aria-hidden="true">#</a> OnShutdown</h3><p>\u6307\u793A\u5728\u5173\u95ED\u7CFB\u7EDF\u65F6\u5E94\u8C03\u7528\u7684\u65B9\u6CD5\u3002\u5728JVM\u751F\u547D\u5468\u671F\u4E2D\uFF0C\u5BF9\u6BCF\u4E2A\u7EC4\u4EF6\u6700\u591A\u8C03\u7528\u4E00\u6B21\u3002\u4F46\u662F\uFF0C\u4E0D\u80FD\u4FDD\u8BC1\u5728\u5173\u95ED\u65F6\u8C03\u7528\u6B64\u65B9\u6CD5\uFF0C\u56E0\u4E3A\u670D\u52A1\u53EF\u80FD\u4F1A\u7A81\u7136\u7EC8\u6B62\u3002 \u5E26\u6709\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u5141\u8BB8\u63A5\u53D70\u62161\u53C2\u6570</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnShutdown</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BD4\u5982CaptureChangeMssql.java\u3002\u591A\u7528\u4E8E\u7CFB\u7EDF\u5173\u95ED\u65F6\u53BB\u5173\u95ED\u4E00\u4E9B\u8D44\u6E90</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@OnShutdown</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onShutdown</span><span class="token punctuation">(</span><span class="token class-name">ProcessContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// In case we get shutdown while still running, save off the current state, disconnect, and shut down gracefully</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>activeConnection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>activeConnection<span class="token punctuation">)</span><span class="token punctuation">;</span>
                wasClosed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ProcessException</span><span class="token punctuation">(</span>ioe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onstopped" tabindex="-1"><a class="header-anchor" href="#onstopped" aria-hidden="true">#</a> OnStopped</h3><p>\u6307\u793A\u5F53\u7EC4\u4EF6\u4E0D\u518D\u8BA1\u5212\u8FD0\u884C\u65F6\u5E94\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u3002\u6BCF\u6B21\u7EC4\u4EF6\u505C\u6B62\u65F6\uFF0C\u90FD\u5C06\u8C03\u7528\u6807\u8BB0\u4E86\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\uFF0C\u5E76\u4E14\u4EC5\u5728\u4ECEonTrigger\u65B9\u6CD5\u8FD4\u56DE\u6700\u540E\u4E00\u4E2A\u7EBF\u7A0B\u540E\u624D\u8C03\u7528</p><p>\u8FD9\u610F\u5473\u7740\u5728\u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u6267\u884C\u7684\u7EBF\u7A0B\u5C06\u662F\u5904\u7406\u5668\u4EFB\u4F55\u90E8\u5206\u4E2D\u552F\u4E00\u6267\u884C\u7684\u7EBF\u7A0B\u3002\u4F46\u662F\uFF0C\u7531\u4E8E\u5176\u4ED6\u7EBF\u7A0B\u4EE5\u540E\u53EF\u80FD\u4F1A\u6267\u884C\u4EE3\u7801\u7684\u5176\u4ED6\u90E8\u5206\uFF0C\u6240\u4EE5\u4ECD\u7136\u5FC5\u987B\u9002\u5F53\u5730\u4FDD\u62A4\u6210\u5458\u53D8\u91CF\u3002\u4F46\u662F\uFF0C\u5BF9\u591A\u4E2A\u53D8\u91CF\u7684\u8BBF\u95EE\u4E0D\u5FC5\u662F\u539F\u5B50\u6027\u7684\u3002</p><p>\u8981\u6307\u793A\u5728\u4E0D\u518D\u8C03\u5EA6\u7EC4\u4EF6\u8FD0\u884C\u65F6(\u800C\u4E0D\u662F\u5728\u6240\u6709\u7EBF\u7A0B\u4ECEonTrigger\u65B9\u6CD5\u8FD4\u56DE\u540E)\u5E94\u7ACB\u5373\u8C03\u7528\u65B9\u6CD5\uFF0C\u8BF7\u53C2\u89C1OnUnscheduled\u6CE8\u91CA\u3002</p><p>\u5E26\u6709\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u5141\u8BB8\u63A5\u53D70\u62161\u53C2\u6570\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnStopped</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onunscheduled" tabindex="-1"><a class="header-anchor" href="#onunscheduled" aria-hidden="true">#</a> OnUnscheduled</h3><p>\u6BCF\u6B21\u901A\u77E5\u6846\u67B6\u505C\u6B62\u8C03\u5EA6\u7EC4\u4EF6\u65F6\uFF0C\u90FD\u5C06\u8C03\u7528\u6807\u8BB0\u4E86\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u3002\u6B64\u65B9\u6CD5\u5728\u5176\u4ED6\u7EBF\u7A0B\u53EF\u80FD\u6B63\u5728\u8FD0\u884C\u65F6\u8C03\u7528\u3002\u8981\u5728\u6240\u6709\u7EBF\u7A0B\u5B8C\u6210\u5904\u7406\u540E\u8C03\u7528\u4E00\u4E2A\u65B9\u6CD5\u8BF7\u53C2\u89C1OnStopped\u6CE8\u89E3.</p><p>\u4F7F\u7528\u6B64\u6CE8\u91CA\u7684\u65B9\u6CD5\u5FC5\u987B\u63A5\u53D70\u4E2A\u53C2\u6570\u6216\u5355\u4E2A\u53C2\u6570</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">OnUnscheduled</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,167),l=[i];function u(r,d){return s(),a("div",null,l)}var m=n(c,[["render",u],["__file","010-nifi\u6CE8\u89E3.html.vue"]]);export{m as default};
