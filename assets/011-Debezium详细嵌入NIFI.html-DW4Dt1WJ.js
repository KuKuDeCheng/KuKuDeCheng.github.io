import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,a as n}from"./app-BeeusqHN.js";const e="/assets/1-_L8mogU3.png",t="/assets/2-BwcVdPCa.png",l="/assets/3-tobnvQ4i.png",p="/assets/4-ymIrgNd5.png",h="/assets/5-y8uKSaof.png",r="/assets/6-DbevQyIy.png",k="/assets/7-CIeDzZnz.png",o="/assets/8-Lx6ftgee.png",d="/assets/9-CRvEEP3x.png",c="/assets/10-5AYHPf9F.png",g="/assets/11-DtNE7aGN.png",u="/assets/12--f-OXbKB.png",B="/assets/13-DZqJtHo0.png",y="/assets/14-D7ajXFJY.png",m="/assets/15-7W_s00zD.png",C="/assets/16-BvlctCgl.png",f="/assets/17-44ZsfTYw.png",v="/assets/18-C1dWVKZu.png",b="/assets/19-qEpmQ6VI.png",E="/assets/20-6Lxf7U34.png",q="/assets/21-BSDzBM4Z.png",F="/assets/22-BVFRNJYq.png",_="/assets/23-C5AJQCps.png",A="/assets/24-CzHY1ykd.png",x="/assets/26-CSYrIxiT.png",D="/assets/27-CsxVP-i5.png",z="/assets/28-CZcLAou0.png",S="/assets/29-B8JayY9a.png",I="/assets/30-DhVmWm5W.png",N="/assets/31-C4AmUVoy.png",M="/assets/32-B8ADnfZa.png",O="/assets/33-C7jp4VfR.png",T="/assets/34-bqekV0Ub.png",L="/assets/35-DIeIPVfX.png",R="/assets/36-CsEXbZhz.png",P="/assets/37-BTivjrwk.png",V="/assets/38-iHPqXTpl.png",Z="/assets/39-H6u6NEaZ.png",w="/assets/40-B3J1KAgL.png",j="/assets/41-B3wglgi1.png",H="/assets/42-DxL_o1qr.png",Y="/assets/43-DRaBfpdP.png",U="/assets/44-BZ3Yu1ll.png",J="/assets/45-DVdU0wmN.png",Q="/assets/46-DIXOWL95.png",K="/assets/47-BBB6_ie-.png",W="/assets/48-CwGKBvNj.png",X="/assets/49-BZWM-BAI.png",G="/assets/50-Dhlw-Iie.png",$="/assets/51-oBHkIBX0.png",ss="/assets/52-CYg49VWA.png",is="/assets/53-D9KRbxG4.png",as="/assets/54-Cf4bqVAf.png",ns={},es=n('<h1 id="一、嵌入nifi整体思路" tabindex="-1"><a class="header-anchor" href="#一、嵌入nifi整体思路"><span>一、嵌入NIFI整体思路</span></a></h1><p>考虑到充分利用开源项目Debezium的能力，以及本身团队研发力量的不足，最终决定还是在NIFI直接使用Debezium内置引擎的方式，主要的代价就是带来额外的线程消耗，以及融入NIFI、解决Debezium自身一些不足的开发工作。</p><h1 id="二、processor蓝图" tabindex="-1"><a class="header-anchor" href="#二、processor蓝图"><span>二、Processor蓝图</span></a></h1><figure><img src="'+e+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="三、需要解决debezium哪些不足" tabindex="-1"><a class="header-anchor" href="#三、需要解决debezium哪些不足"><span>三、需要解决Debezium哪些不足？</span></a></h1><p>Debezium本身，以及将它嵌入NIFI有一些不满足我们需求的地方：</p><h2 id="_3-1-全表cdc问题" tabindex="-1"><a class="header-anchor" href="#_3-1-全表cdc问题"><span>3.1 全表CDC问题</span></a></h2><p>Debezium的全表采集实现非常检漏，以关系型数据库为主就是 select * from .....，没有分页逻辑并且默认最大2000条(可配置)。虽然官方在做这件事情，但是可能还需要一段时间。</p><figure><img src="'+t+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这里我们要解决的问题是：</p><ol><li>如何依据Debezium的配置信息，在我们的Processor中自定义实现满足我们需求的全表采集。</li><li>自定义实现的全表采集的数据格式</li><li>避免Debezium的锁表</li></ol><p>默认的Snapshot是锁表的，这一点我们无法接受。如果没有提供一种不锁表的机制，那么源码的Snapshot我们还是不会使用的。</p><h2 id="_3-2-数据丢失或重复" tabindex="-1"><a class="header-anchor" href="#_3-2-数据丢失或重复"><span>3.2 数据丢失或重复</span></a></h2><p>NIFI的整体架构是参考SEDA模型，并且内部提供了对FlowFile处理的事务逻辑。如果直接使用现有的Debezium，在NIFI重启等情况下，可能会造成采集不连贯，数据丢失，数据重复等现象。</p><ol><li>代码分析，整合Debezium到NIFI，一个采集任务少则两个异步过程，多则三个，即三个线程或者4个线程，需要解决某些异步过程的通信。</li><li>Debezium提供的原生offset存储机制，与NIFI的事务机制属于两个异步过程，解决 采集的数据整合进FlowFIle与offset存储事务一致性，避免丢数据，数据重复。</li><li>集群模式下 自定义解决方案是否可以hold</li></ol><h2 id="_3-3-关系型db历史schema问题-databasehistory" tabindex="-1"><a class="header-anchor" href="#_3-3-关系型db历史schema问题-databasehistory"><span>3.3 关系型DB历史schema问题(DatabaseHistory)</span></a></h2><p>Debezium为大多数关系型DB提供了历史元数据信息的存储机制，在采集数据事件会根据对应的schema进行数据处理。</p><ol><li>在采集的过程中，如果发现当前采集的数据事件(offset标记)在历史schema中查找不到对应的信息，会使用antlr解析DDL得到schema，经过测试，此过程现在版本极易报错(尤其是Oracle PG)。</li><li>只有使用Debezium原生Snapshot(全量)时，部分DB会使用jdbc api(DatabaseMetadata)采集{Oracle、pg、sql server}，另一部分仍旧是使用antlr解析DDL{mysql}，并且根据现有条件和需求我们无法使用Debezium原生Snapshot(全量)。</li><li>经过代码分析pg的CDC不依赖DatabaseHistory</li><li>集群模式下 自定义解决方案是否可以hold</li></ol><h2 id="_3-4-数据格式" tabindex="-1"><a class="header-anchor" href="#_3-4-数据格式"><span>3.4 数据格式</span></a></h2><ol><li>Debezium自己抽象出一套统一格式的event，自定义全表数据数据需要格式统一。 <ol><li>第一是整体Event的抽象的数据格式的统一</li><li>第二是具体到子类类型的数据格式的统一</li></ol></li><li>目前移动产品(数据清洗、分区逻辑、公式转换)统一使用NIFI 中avro逻辑模型的JSON格式record，如何定位这里的功能。(可以先不考虑)</li></ol><h2 id="_3-5-适配同步功能" tabindex="-1"><a class="header-anchor" href="#_3-5-适配同步功能"><span>3.5 适配同步功能</span></a></h2><ol><li>采集到的数据基本含有before after两个版本，目前移动的功能以及NIFI中组件 数据变更都是以主键值为基础的。这里要进行一定适配。</li></ol><h2 id="_3-6-数据体积" tabindex="-1"><a class="header-anchor" href="#_3-6-数据体积"><span>3.6 数据体积</span></a></h2><ol><li>由于很多产品化的规则，同步模板都是使用的json，在Debezium中json序列化的event体积大</li></ol><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-7-异常捕获" tabindex="-1"><a class="header-anchor" href="#_3-7-异常捕获"><span>3.7 异常捕获</span></a></h2><figure><img src="'+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-8-数据的schema" tabindex="-1"><a class="header-anchor" href="#_3-8-数据的schema"><span>3.8 数据的schema</span></a></h2><p>自定义实现的全表采集，携带的schema信息的获取。</p><h2 id="_3-9-数据转换" tabindex="-1"><a class="header-anchor" href="#_3-9-数据转换"><span>3.9 数据转换</span></a></h2><figure><img src="'+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-10-表更改" tabindex="-1"><a class="header-anchor" href="#_3-10-表更改"><span>3.10 表更改</span></a></h2><p>即使我们将初始化的DatabaseHistory的问题，在运行过程中监听到表的修改event，还是会触发诸如Oracle pg解析DDL获取元数据的行为，这也可能会引发一些错误。</p><h1 id="四、debezium内置引擎运行过程分析" tabindex="-1"><a class="header-anchor" href="#四、debezium内置引擎运行过程分析"><span>四、Debezium内置引擎运行过程分析</span></a></h1><figure><img src="'+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_4-1-offsetbackingstore" tabindex="-1"><a class="header-anchor" href="#_4-1-offsetbackingstore"><span>4.1 OffsetBackingStore</span></a></h2><figure><img src="'+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_4-2-sourceconnector" tabindex="-1"><a class="header-anchor" href="#_4-2-sourceconnector"><span>4.2 SourceConnector</span></a></h2><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_4-3-sourcetask" tabindex="-1"><a class="header-anchor" href="#_4-3-sourcetask"><span>4.3 SourceTask</span></a></h2><figure><img src="'+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>SourceTask.start是抽象方法,由BaseSourceTask实现</p><h2 id="_4-4-basesourcetask-start" tabindex="-1"><a class="header-anchor" href="#_4-4-basesourcetask-start"><span>4.4 BaseSourceTask.start()</span></a></h2><figure><img src="'+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>start抽象方法，由各个xxxConnectorTask实现。</p><h3 id="_4-4-1-oracleconnectortask-start为例" tabindex="-1"><a class="header-anchor" href="#_4-4-1-oracleconnectortask-start为例"><span>4.4.1 OracleConnectorTask.start为例</span></a></h3><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>前期准备，最终调用ChangeEventSourceCoordinator.start</p><p>这里Oracle有个点，这里如果发现有哪一张表的schema(会携带offset)在指定的pre offset之前(包括)，那么程序会认为当前存储的schema可能是过时的，会更新schema，然后会查数据字典获取建表sql, antlr4词法语法解析得到schema信息，这里Oracle(还有pg)极易报错导致运行不下去。</p><figure><img src="'+B+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_4-5-changeeventsourcecoordinator-start" tabindex="-1"><a class="header-anchor" href="#_4-5-changeeventsourcecoordinator-start"><span>4.5 ChangeEventSourceCoordinator.start</span></a></h2><figure><img src="'+y+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_4-6-snapshotchangeeventsource" tabindex="-1"><a class="header-anchor" href="#_4-6-snapshotchangeeventsource"><span>4.6 SnapshotChangeEventSource</span></a></h2><figure><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_4-6-1abstractsnapshotchangeeventsource-execute" tabindex="-1"><a class="header-anchor" href="#_4-6-1abstractsnapshotchangeeventsource-execute"><span>4.6.1AbstractSnapshotChangeEventSource.execute</span></a></h3><figure><img src="'+C+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_4-6-2-relationalsnapshotchangeeventsource-doexecute" tabindex="-1"><a class="header-anchor" href="#_4-6-2-relationalsnapshotchangeeventsource-doexecute"><span>4.6.2 RelationalSnapshotChangeEventSource.doExecute</span></a></h3><p>重点要看两处，第一处锁表，第二处全量采集实现</p><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_4-6-2-1-锁表" tabindex="-1"><a class="header-anchor" href="#_4-6-2-1-锁表"><span>4.6.2.1 锁表</span></a></h4><p>AbstractSnapshotChangeEventSource.execute中会先判断是否skip Snapshot，否，则继续执行。</p><figure><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>判断是否skip Snapshot,通用是既不schema，也不data；MongoDB特例，不data就skip。</p><figure><img src="'+E+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>先假设skip为false，对于关系型数据库来说(MongoDB后面讨论)，会锁所有采集schema的表，条件是snapshottingTask.snapshotSchema()是true，那么我们解决锁表就是让这个返回为false</p><figure><img src="'+q+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+F+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_4-6-2-1-1-mysql" tabindex="-1"><a class="header-anchor" href="#_4-6-2-1-1-mysql"><span>4.6.2.1.1 MySQL</span></a></h5><p>若要使得MySQL 不锁表，</p><p>第一在有previousOffset，SnapshotMode绝不选择使用SCHEMA_ONLY_RECOVERY，那么snapshotSchema就是false；</p><p>第二在没有previousOffset，SnapshotMode只能选择使用NEVER ，那么snapshotSchema就是false；</p><figure><img src="'+_+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+A+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_4-6-2-1-2-oracle" tabindex="-1"><a class="header-anchor" href="#_4-6-2-1-2-oracle"><span>4.6.2.1.2 Oracle</span></a></h5><p>若要使得Oracle 不锁表，</p><p>第一在有previousOffset，snapshotSchema就是false；</p><p>第二在没有previousOffset，snapshotSchema就是true；</p><p>所以在处理Oracle，我们一定一定使其任何时候都有previousOffset！！！。</p><figure><img src="'+x+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_4-6-2-1-3-postgresql" tabindex="-1"><a class="header-anchor" href="#_4-6-2-1-3-postgresql"><span>4.6.2.1.3 PostgreSql</span></a></h5><p>若要使得pg 不锁表，snapshotter.shouldSnapshot()一定要返回false，使用NeverSnapshotter</p><figure><img src="'+D+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+z+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+S+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_4-6-2-1-4-sqlserver" tabindex="-1"><a class="header-anchor" href="#_4-6-2-1-4-sqlserver"><span>4.6.2.1.4 SqlServer</span></a></h5><p>若要使得SqlServer 不锁表，同Oracle一样，我们一定一定使其任何时候都有previousOffset！！！。</p><figure><img src="'+I+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_4-6-2-1-5-mongodb" tabindex="-1"><a class="header-anchor" href="#_4-6-2-1-5-mongodb"><span>4.6.2.1.5 MongoDB</span></a></h5><p>首先没有所谓锁表逻辑，但在实现MongoDB的Snapshot底层会去阻塞主节点！</p><figure><img src="'+N+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>但是，在做Snapshot时，每个Collection的查询全部数据都会executeBlocking阻塞主节点</p><p>MongoDbSnapshotChangeEventSource.doExecute → snapshotReplicaSet → createDataEvents → createDataEventsForReplicaSet → createDataEventsForCollection</p><figure><img src="'+M+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>如果要避免阻塞MongoDB，就要skip Snapshot！！即MongoDB的SnapshotData是false。</p><h4 id="_4-6-2-2-全量snapshot实现" tabindex="-1"><a class="header-anchor" href="#_4-6-2-2-全量snapshot实现"><span>4.6.2.2 全量Snapshot实现</span></a></h4><h5 id="_4-6-2-2-1-关系型数据库全表sql" tabindex="-1"><a class="header-anchor" href="#_4-6-2-2-1-关系型数据库全表sql"><span>4.6.2.2.1 关系型数据库全表sql</span></a></h5><p>RelationalSnapshotChangeEventSource.doExecute → createDataEvents → createDataEventsForTable → determineSnapshotSelect → 得到 select sql(<strong><u>select * from t</u></strong>)</p><p>然后执行查询SQL会设置fetchSize(可配置‘snapshot.fetch.size’)，没有则使用默认值。</p><p>经过代码分析默认值:</p><ul><li>Oracle 2000</li><li>SqlServer 2000</li><li>PostgreSql 10240</li><li>Mysql Integer.MIN_VALUE https://issues.jboss.org/browse/DBZ-94</li></ul><figure><img src="'+O+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+T+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_4-6-2-2-2-mongodb" tabindex="-1"><a class="header-anchor" href="#_4-6-2-2-2-mongodb"><span>4.6.2.2.2 MongoDB</span></a></h5><p>因为会阻塞节点，无序进一步分析。</p><h3 id="_4-6-3-总结" tabindex="-1"><a class="header-anchor" href="#_4-6-3-总结"><span>4.6.3 总结</span></a></h3><p>由上面各处细节点，结论，我们的程序应该想尽办法不触发Debezium的Snapshot逻辑。</p><ul><li>MySQL SnapshotMode 设置为NEVER</li><li>Oracle SnapshotMode 设置为SCHEMA_ONLY，并且<strong>必须外部预置offset</strong></li><li>SqlServer SnapshotMode 设置为SCHEMA_ONLY，并且<strong>必须外部预置offset</strong></li><li>PostgreSql SnapshotMode 设置为NEVER</li><li>MongoDB SnapshotMode 设置为NEVER</li></ul><p>注：各个数据库的SnapshotMode模式都是有自己的定义的；MySQL 和PG从代码逻辑上分析不强制外部预置offset， 不预置offset的结果待进一步运行，观察，确定影响,但在使用自定义snapshot的前提下仍需要预置offset，防止丢数据。</p><h2 id="_4-7-streamingchangeeventsource-cdc" tabindex="-1"><a class="header-anchor" href="#_4-7-streamingchangeeventsource-cdc"><span>4.7 StreamingChangeEventSource cdc</span></a></h2><p>StreamingChangeEventSource.execute 主要执行读取数据库日志，这里我们主要看一下Debezium的数据组装过程。</p><figure><img src="'+L+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_4-7-1-logminerstreamingchangeeventsource-execute为例" tabindex="-1"><a class="header-anchor" href="#_4-7-1-logminerstreamingchangeeventsource-execute为例"><span>4.7.1 LogMinerStreamingChangeEventSource.execute为例</span></a></h3><p>processor.processResult(rs);</p><figure><img src="'+R+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>TransactionalBuffer</p><figure><img src="'+P+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+V+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_4-7-2-eventdispatcher" tabindex="-1"><a class="header-anchor" href="#_4-7-2-eventdispatcher"><span>4.7.2 EventDispatcher</span></a></h3><figure><img src="'+Z+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+w+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_4-7-3-changerecordemitter" tabindex="-1"><a class="header-anchor" href="#_4-7-3-changerecordemitter"><span>4.7.3 ChangeRecordEmitter</span></a></h3><figure><img src="'+j+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+H+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_4-7-4-总结" tabindex="-1"><a class="header-anchor" href="#_4-7-4-总结"><span>4.7.4 总结</span></a></h3><figure><img src="'+Y+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>而内置引擎会取出SourceRecord转成EmbeddedEngineChangeEvent</p><p>举一个Oracle中最终的事件数据为例</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;struct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;fields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;struct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;fields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;int32&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ID&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;FIRST_NAME&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;LAST_NAME&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;EMAIL&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;server1.DEBEZIUM.CUSTOMERS.Value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;before&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;struct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;fields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;int32&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ID&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;FIRST_NAME&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;LAST_NAME&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;EMAIL&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;server1.DEBEZIUM.CUSTOMERS.Value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;after&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;struct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;fields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;version&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;name&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;int64&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ts_ms&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;txId&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;scn&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;commit_scn&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;boolean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                        &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;snapshot&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;io.debezium.connector.oracle.Source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;source&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;op&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;int64&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">                &quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ts_ms&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;optional&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;server1.DEBEZIUM.CUSTOMERS.Envelope&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;payload&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;before&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;after&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1004</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;FIRST_NAME&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Anne&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;LAST_NAME&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Kretchmar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;EMAIL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;annek@noanswer.org&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.6.1.Final&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;server1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;ts_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1520085154000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;txId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;6.28.807&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;scn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;2122185&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;commit_scn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;2122185&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">            &quot;snapshot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;ts_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1532592105975</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-8-debezium内置引擎总结" tabindex="-1"><a class="header-anchor" href="#_4-8-debezium内置引擎总结"><span>4.8 Debezium内置引擎总结</span></a></h2><p>以上是Debezium内置引擎运行的总体过程，最后总结一下：</p><figure><img src="`+U+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="五、-嵌入nifi实现" tabindex="-1"><a class="header-anchor" href="#五、-嵌入nifi实现"><span>五、 嵌入NIFI实现</span></a></h1><p>以使用JSON为例。</p><figure><img src="'+J+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_5-1-顶级抽象abstractdebeziumconnector" tabindex="-1"><a class="header-anchor" href="#_5-1-顶级抽象abstractdebeziumconnector"><span>5.1 顶级抽象AbstractDebeziumConnector</span></a></h2><p>在AbstractDebeziumConnector层，高度抽象和封装出了NIFI内置Debezium的总体过程。</p><h3 id="_5-1-1-公共配置及子类配置入口" tabindex="-1"><a class="header-anchor" href="#_5-1-1-公共配置及子类配置入口"><span>5.1.1 公共配置及子类配置入口</span></a></h3><figure><img src="'+Q+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+K+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_5-1-2-初始化" tabindex="-1"><a class="header-anchor" href="#_5-1-2-初始化"><span>5.1.2 初始化</span></a></h3><h4 id="_5-1-2-1-设置debezium配置" tabindex="-1"><a class="header-anchor" href="#_5-1-2-1-设置debezium配置"><span>5.1.2.1 设置Debezium配置</span></a></h4><figure><img src="'+W+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_5-1-2-2-使用自定义的offset存储实现" tabindex="-1"><a class="header-anchor" href="#_5-1-2-2-使用自定义的offset存储实现"><span>5.1.2.2 使用自定义的Offset存储实现</span></a></h4><p>这里顺便看一下StateMapOffsetBackingStore</p><figure><img src="'+X+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_5-1-2-3-初始化json转换器" tabindex="-1"><a class="header-anchor" href="#_5-1-2-3-初始化json转换器"><span>5.1.2.3 初始化JSON转换器</span></a></h4><figure><img src="'+G+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_5-1-2-4-初始化offset" tabindex="-1"><a class="header-anchor" href="#_5-1-2-4-初始化offset"><span>5.1.2.4 初始化offset</span></a></h4><figure><img src="'+$+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_5-1-2-5-初始化debezium引擎" tabindex="-1"><a class="header-anchor" href="#_5-1-2-5-初始化debezium引擎"><span>5.1.2.5 初始化Debezium引擎</span></a></h4><figure><img src="'+ss+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_5-1-3-调度执行" tabindex="-1"><a class="header-anchor" href="#_5-1-3-调度执行"><span>5.1.3 调度执行</span></a></h3><h4 id="_5-1-3-1-自定义全量snapshot" tabindex="-1"><a class="header-anchor" href="#_5-1-3-1-自定义全量snapshot"><span>5.1.3.1 自定义全量Snapshot</span></a></h4><figure><img src="'+is+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_5-1-3-2-debezium-event-→-nifi-flowfile" tabindex="-1"><a class="header-anchor" href="#_5-1-3-2-debezium-event-→-nifi-flowfile"><span>5.1.3.2 Debezium event → NIFI FlowFile</span></a></h4><figure><img src="'+as+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',158),ts=[es];function ls(ps,hs){return a(),i("div",null,ts)}const os=s(ns,[["render",ls],["__file","011-Debezium详细嵌入NIFI.html.vue"]]),ds=JSON.parse('{"path":"/ApacheNIFI%E5%BC%80%E5%8F%91/011-Debezium%E8%AF%A6%E7%BB%86%E5%B5%8C%E5%85%A5NIFI.html","title":"Debezium详细嵌入NIFI","lang":"zh-CN","frontmatter":{"title":"Debezium详细嵌入NIFI","date":"2021-11-01T00:00:00.000Z","category":"ApacheNIFI开发","tag":"NIFI","order":11,"description":"一、嵌入NIFI整体思路 考虑到充分利用开源项目Debezium的能力，以及本身团队研发力量的不足，最终决定还是在NIFI直接使用Debezium内置引擎的方式，主要的代价就是带来额外的线程消耗，以及融入NIFI、解决Debezium自身一些不足的开发工作。 二、Processor蓝图 三、需要解决Debezium哪些不足？ Debezium本身，以及...","head":[["meta",{"property":"og:url","content":"https://zhangchengk.github.io/ApacheNIFI%E5%BC%80%E5%8F%91/011-Debezium%E8%AF%A6%E7%BB%86%E5%B5%8C%E5%85%A5NIFI.html"}],["meta",{"property":"og:site_name","content":"Panda诚的博客"}],["meta",{"property":"og:title","content":"Debezium详细嵌入NIFI"}],["meta",{"property":"og:description","content":"一、嵌入NIFI整体思路 考虑到充分利用开源项目Debezium的能力，以及本身团队研发力量的不足，最终决定还是在NIFI直接使用Debezium内置引擎的方式，主要的代价就是带来额外的线程消耗，以及融入NIFI、解决Debezium自身一些不足的开发工作。 二、Processor蓝图 三、需要解决Debezium哪些不足？ Debezium本身，以及..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-27T13:31:00.000Z"}],["meta",{"property":"article:author","content":"Panda诚"}],["meta",{"property":"article:tag","content":"NIFI"}],["meta",{"property":"article:published_time","content":"2021-11-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-27T13:31:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Debezium详细嵌入NIFI\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-11-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-27T13:31:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Panda诚\\",\\"url\\":\\"https://zhangchengk.github.io/about/intro.html\\"}]}"]]},"headers":[{"level":2,"title":"3.1 全表CDC问题","slug":"_3-1-全表cdc问题","link":"#_3-1-全表cdc问题","children":[]},{"level":2,"title":"3.2 数据丢失或重复","slug":"_3-2-数据丢失或重复","link":"#_3-2-数据丢失或重复","children":[]},{"level":2,"title":"3.3 关系型DB历史schema问题(DatabaseHistory)","slug":"_3-3-关系型db历史schema问题-databasehistory","link":"#_3-3-关系型db历史schema问题-databasehistory","children":[]},{"level":2,"title":"3.4 数据格式","slug":"_3-4-数据格式","link":"#_3-4-数据格式","children":[]},{"level":2,"title":"3.5 适配同步功能","slug":"_3-5-适配同步功能","link":"#_3-5-适配同步功能","children":[]},{"level":2,"title":"3.6 数据体积","slug":"_3-6-数据体积","link":"#_3-6-数据体积","children":[]},{"level":2,"title":"3.7 异常捕获","slug":"_3-7-异常捕获","link":"#_3-7-异常捕获","children":[]},{"level":2,"title":"3.8 数据的schema","slug":"_3-8-数据的schema","link":"#_3-8-数据的schema","children":[]},{"level":2,"title":"3.9 数据转换","slug":"_3-9-数据转换","link":"#_3-9-数据转换","children":[]},{"level":2,"title":"3.10 表更改","slug":"_3-10-表更改","link":"#_3-10-表更改","children":[]},{"level":2,"title":"4.1 OffsetBackingStore","slug":"_4-1-offsetbackingstore","link":"#_4-1-offsetbackingstore","children":[]},{"level":2,"title":"4.2 SourceConnector","slug":"_4-2-sourceconnector","link":"#_4-2-sourceconnector","children":[]},{"level":2,"title":"4.3 SourceTask","slug":"_4-3-sourcetask","link":"#_4-3-sourcetask","children":[]},{"level":2,"title":"4.4 BaseSourceTask.start()","slug":"_4-4-basesourcetask-start","link":"#_4-4-basesourcetask-start","children":[{"level":3,"title":"4.4.1 OracleConnectorTask.start为例","slug":"_4-4-1-oracleconnectortask-start为例","link":"#_4-4-1-oracleconnectortask-start为例","children":[]}]},{"level":2,"title":"4.5 ChangeEventSourceCoordinator.start","slug":"_4-5-changeeventsourcecoordinator-start","link":"#_4-5-changeeventsourcecoordinator-start","children":[]},{"level":2,"title":"4.6 SnapshotChangeEventSource","slug":"_4-6-snapshotchangeeventsource","link":"#_4-6-snapshotchangeeventsource","children":[{"level":3,"title":"4.6.1AbstractSnapshotChangeEventSource.execute","slug":"_4-6-1abstractsnapshotchangeeventsource-execute","link":"#_4-6-1abstractsnapshotchangeeventsource-execute","children":[]},{"level":3,"title":"4.6.2 RelationalSnapshotChangeEventSource.doExecute","slug":"_4-6-2-relationalsnapshotchangeeventsource-doexecute","link":"#_4-6-2-relationalsnapshotchangeeventsource-doexecute","children":[]},{"level":3,"title":"4.6.3 总结","slug":"_4-6-3-总结","link":"#_4-6-3-总结","children":[]}]},{"level":2,"title":"4.7  StreamingChangeEventSource cdc","slug":"_4-7-streamingchangeeventsource-cdc","link":"#_4-7-streamingchangeeventsource-cdc","children":[{"level":3,"title":"4.7.1  LogMinerStreamingChangeEventSource.execute为例","slug":"_4-7-1-logminerstreamingchangeeventsource-execute为例","link":"#_4-7-1-logminerstreamingchangeeventsource-execute为例","children":[]},{"level":3,"title":"4.7.2 EventDispatcher","slug":"_4-7-2-eventdispatcher","link":"#_4-7-2-eventdispatcher","children":[]},{"level":3,"title":"4.7.3 ChangeRecordEmitter","slug":"_4-7-3-changerecordemitter","link":"#_4-7-3-changerecordemitter","children":[]},{"level":3,"title":"4.7.4 总结","slug":"_4-7-4-总结","link":"#_4-7-4-总结","children":[]}]},{"level":2,"title":"4.8 Debezium内置引擎总结","slug":"_4-8-debezium内置引擎总结","link":"#_4-8-debezium内置引擎总结","children":[]},{"level":2,"title":"5.1 顶级抽象AbstractDebeziumConnector","slug":"_5-1-顶级抽象abstractdebeziumconnector","link":"#_5-1-顶级抽象abstractdebeziumconnector","children":[{"level":3,"title":"5.1.1 公共配置及子类配置入口","slug":"_5-1-1-公共配置及子类配置入口","link":"#_5-1-1-公共配置及子类配置入口","children":[]},{"level":3,"title":"5.1.2 初始化","slug":"_5-1-2-初始化","link":"#_5-1-2-初始化","children":[]},{"level":3,"title":"5.1.3 调度执行","slug":"_5-1-3-调度执行","link":"#_5-1-3-调度执行","children":[]}]}],"git":{"createdTime":1719488402000,"updatedTime":1719495060000,"contributors":[{"name":"zhangcheng","email":"zhangchengk@yonyou.com","commits":2}]},"readingTime":{"minutes":7.5,"words":2251},"filePathRelative":"ApacheNIFI开发/011-Debezium详细嵌入NIFI.md","localizedDate":"2021年11月1日","excerpt":"\\n<p>考虑到充分利用开源项目Debezium的能力，以及本身团队研发力量的不足，最终决定还是在NIFI直接使用Debezium内置引擎的方式，主要的代价就是带来额外的线程消耗，以及融入NIFI、解决Debezium自身一些不足的开发工作。</p>\\n<h1>二、Processor蓝图</h1>\\n<figure><figcaption></figcaption></figure>\\n<h1>三、需要解决Debezium哪些不足？</h1>\\n<p>Debezium本身，以及将它嵌入NIFI有一些不满足我们需求的地方：</p>\\n<h2>3.1 全表CDC问题</h2>\\n<p>Debezium的全表采集实现非常检漏，以关系型数据库为主就是 select * from .....，没有分页逻辑并且默认最大2000条(可配置)。虽然官方在做这件事情，但是可能还需要一段时间。</p>","autoDesc":true}');export{os as comp,ds as data};
