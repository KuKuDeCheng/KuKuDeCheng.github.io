import{_ as o}from"./plugin-vue_export-helper.21dcd24c.js";import{r as i,o as l,c as p,a as n,b as a,F as c,e as s,d as t}from"./app.11494968.js";const r={},d=s("\u5B98\u65B9\u6587\u6863("),u={href:"https://docs.oracle.com/database/121/SUTIL/GUID-3417B738-374C-4EE3-B15C-3A66E01AE2B5.htm#SUTIL019",target:"_blank",rel:"noopener noreferrer"},v=s("https://docs.oracle.com/database/121/SUTIL/GUID-3417B738-374C-4EE3-B15C-3A66E01AE2B5.htm#SUTIL019"),m=s(")"),k=n("p",null,"Oracle LogMiner\u662FOracle\u6570\u636E\u5E93\u7684\u4E00\u90E8\u5206\uFF0C\u5B83\u5141\u8BB8\u4F60\u901A\u8FC7SQL\u63A5\u53E3\u5728\u7EBF\u67E5\u8BE2\u548C\u5F52\u6863Redo\u65E5\u5FD7\u6587\u4EF6\u3002Redo\u65E5\u5FD7\u6587\u4EF6\u5305\u542B\u5173\u4E8E\u6570\u636E\u5E93\u6D3B\u52A8\u5386\u53F2\u7684\u4FE1\u606F\u3002",-1),b=n("h2",{id:"logminer-benefits",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#logminer-benefits","aria-hidden":"true"},"#"),s(" LogMiner Benefits")],-1),g=n("p",null,"\u5BF9\u7528\u6237\u6570\u636E\u6216\u6570\u636E\u5E93\u5B57\u5178\u6240\u505A\u7684\u6240\u6709\u66F4\u6539\u90FD\u8BB0\u5F55\u5728Oracle redo\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u6267\u884C\u6570\u636E\u5E93\u6062\u590D\u64CD\u4F5C\u3002",-1),h=n("p",null,"\u7531\u4E8ELogMiner\u4E3ARedo \u65E5\u5FD7\u6587\u4EF6\u63D0\u4F9B\u4E86\u5B9A\u4E49\u660E\u786E\uFF0C\u6613\u4E8E\u4F7F\u7528\u4E14\u5168\u9762\u7684\u5173\u7CFB\u63A5\u53E3\uFF0C\u56E0\u6B64\u5B83\u65E2\u53EF\u4EE5\u7528\u4F5C\u529F\u80FD\u5F3A\u5927\u7684\u6570\u636E\u5BA1\u6838\u5DE5\u5177\uFF0C\u53C8\u53EF\u4EE5\u7528\u4F5C\u590D\u6742\u7684\u6570\u636E\u5206\u6790\u5DE5\u5177\u3002\u4EE5\u4E0B\u5217\u8868\u63CF\u8FF0\u4E86LogMiner\u7684\u4E00\u4E9B\u5173\u952E\u529F\u80FD\uFF1A",-1),E=n("li",null,[n("p",null,[s("\u67E5\u660E\u6570\u636E\u5E93\u4F55\u65F6\u53D1\u751F\u4E86\u903B\u8F91\u635F\u574F\uFF08\u4F8B\u5982\u5728\u5E94\u7528\u7A0B\u5E8F\u7EA7\u522B\u53D1\u751F\u7684\u9519\u8BEF\uFF09\u3002\u8FD9\u4E9B\u9519\u8BEF\u53EF\u80FD\u5305\u62EC\u4EE5\u4E0B\u9519\u8BEF\uFF1A\u7531\u4E8EWHERE\u5B50\u53E5\u4E2D\u7684\u503C\u4E0D\u6B63\u786E\u800C\u5220\u9664\u4E86\u9519\u8BEF\u7684\u884C\uFF0C\u4F7F\u7528\u4E0D\u6B63\u786E\u7684\u503C\u66F4\u65B0\u4E86\u884C\uFF0C\u5220\u9664\u4E86\u9519\u8BEF\u7684\u7D22\u5F15\u7B49\u7B49\u3002\u4F8B\u5982\uFF0C\u7528\u6237\u5E94\u7528\u7A0B\u5E8F\u53EF\u80FD\u4F1A\u9519\u8BEF\u5730\u66F4\u65B0\u6570\u636E\u5E93\uFF0C\u4EE5\u4F7F\u6240\u6709\u5458\u5DE5\u7684\u5DE5\u8D44\u589E\u52A0100\uFF05\uFF0C\u800C\u4E0D\u662F\u589E\u52A010\uFF05\uFF0C\u6216\u8005\u6570\u636E\u5E93\u7BA1\u7406\u5458\uFF08DBA\uFF09\u53EF\u80FD\u4F1A\u610F\u5916\u5220\u9664\u5173\u952E\u7CFB\u7EDF\u8868\u3002\u91CD\u8981\u7684\u662F\u51C6\u786E\u77E5\u9053\u4F55\u65F6\u53D1\u751F\u9519\u8BEF\uFF0C\u4EE5\u4FBF\u77E5\u9053\u4F55\u65F6\u542F\u52A8\u57FA\u4E8E\u65F6\u95F4\u6216\u57FA\u4E8E\u66F4\u6539\u7684\u6062\u590D\u3002\u8FD9\u4F7F\u6211\u4EEC\u53EF\u4EE5\u5C06\u6570\u636E\u5E93\u8FD8\u539F\u5230\u635F\u574F\u4E4B\u524D\u7684\u72B6\u6001\u3002\u66F4\u52A0\u8BE6\u7EC6\u7684\u53C2\u9605"),n("a",{href:"#Querying-V$LOGMNR_CONTENTS-Based-on-Column-Values"},"Querying V$LOGMNR_CONTENTS Based on Column Values"),s("\u3002")])],-1),_=n("li",null,[n("p",null,[s("\u786E\u5B9A\u5728\u4E8B\u52A1\u7EA7\u522B\u6267\u884C\u7EC6\u7C92\u5EA6\u6062\u590D\u6240\u9700\u91C7\u53D6\u7684\u64CD\u4F5C\u3002\u5982\u679C\u4F60\u5B8C\u5168\u7406\u89E3\u5E76\u8003\u8651\u4E86\u73B0\u6709\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u5219\u53EF\u4EE5\u6267\u884C\u7279\u5B9A\u4E8E\u8868\u7684\u64A4\u6D88\u64CD\u4F5C\u4EE5\u5C06\u8868\u8FD4\u56DE\u5230\u5176\u539F\u59CB\u72B6\u6001\u3002\u8FD9\u662F\u901A\u8FC7\u5E94\u7528LogMiner\u63D0\u4F9B\u7684\u7279\u5B9A\u4E8E\u8868\u7684\u91CD\u5EFASQL\u8BED\u53E5\u6765\u5B9E\u73B0\u7684\u3002\u66F4\u52A0\u8BE6\u7EC6\u7684\u53C2\u9605"),n("a",{href:"#Scenario-1----Using-LogMiner-to-Track-Changes-Made-by-a-Specific-User"},"Scenario 1: Using LogMiner to Track Changes Made by a Specific User"),s("\u3002")]),n("p",null,"\u901A\u5E38\uFF0C\u60A8\u5FC5\u987B\u5C06\u8868\u8FD8\u539F\u5230\u4EE5\u524D\u7684\u72B6\u6001\uFF0C\u7136\u540E\u5E94\u7528\u5B58\u6863\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5C06\u5176\u524D\u6EDA\u3002")],-1),L=n("li",null,[n("p",null,[s("\u901A\u8FC7\u8D8B\u52BF\u5206\u6790\u8FDB\u884C\u6027\u80FD\u8C03\u6574\u548C\u5BB9\u91CF\u89C4\u5212\u3002\u60A8\u53EF\u4EE5\u786E\u5B9A\u54EA\u4E9B\u8868\u6709\u6700\u591A\u7684\u66F4\u65B0\u548C\u63D2\u5165\u3002\u8BE5\u4FE1\u606F\u63D0\u4F9B\u4E86\u6709\u5173\u78C1\u76D8\u5386\u53F2\u8BBF\u95EE\u7EDF\u8BA1\u4FE1\u606F\uFF0C\u53EF\u7528\u4E8E\u8C03\u6574\u76EE\u7684\u3002\u6709\u5173\u793A\u4F8B\uFF0C\u8BF7\u53C2\u89C1"),n("a",{href:"Scenario-2----Using-LogMiner-to-Calculate-Table-Access-Statistics"},'"Scenario 2: Using LogMiner to Calculate Table Access Statistics')])],-1),O=s("\u6267\u884C\u540E\u5BA1\u6838\u3002LogMiner\u53EF\u7528\u4E8E\u8DDF\u8E2A\u5728\u6570\u636E\u5E93\u4E0A\u6267\u884C\u7684\u4EFB\u4F55\u6570\u636E\u64CD\u4F5C\u8BED\u8A00\uFF08DML\uFF09\u548C\u6570\u636E\u5B9A\u4E49\u8BED\u8A00\uFF08DDL\uFF09\u8BED\u53E5\uFF0C\u548C\u5B83\u4EEC\u7684\u6267\u884C\u987A\u5E8F\u4EE5\u53CA\u6267\u884C\u8005\u3002\uFF08\u4F46\u662F\uFF0C\u8981\u4F7F\u7528LogMiner\u8FBE\u5230\u6B64\u76EE\u7684\uFF0C\u60A8\u9700\u8981\u4E86\u89E3\u4E8B\u4EF6\u53D1\u751F\u7684\u65F6\u95F4\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u6307\u5B9A\u9002\u5F53\u7684\u65E5\u5FD7\u8FDB\u884C\u5206\u6790\uFF1B\u5426\u5219\uFF0C\u60A8\u53EF\u80FD\u5FC5\u987B\u6316\u6398\u5927\u91CF\u7684Redo\u65E5\u5FD7\u6587\u4EF6\uFF0C\u8FD9\u53EF\u80FD\u9700\u8981\u957F\u65F6\u95F4\u3002\u8003\u8651\u5C06LogMiner\u7528\u4F5C\u5BA1\u6838\u6570\u636E\u5E93\u4F7F\u7528\u60C5\u51B5\u7684\u8865\u5145\u6D3B\u52A8\u3002\u6709\u5173\u6570\u636E\u5E93\u5BA1\u6838\u7684\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),T={href:"https://docs.oracle.com/database/121/ADMIN/secure.htm#ADMIN11241",target:"_blank",rel:"noopener noreferrer"},N=s("Oracle\u6570\u636E\u5E93\u7BA1\u7406\u5458\u6307\u5357"),A=s("\u3002"),R=t(`<h2 id="introduction-to-logminer" tabindex="-1"><a class="header-anchor" href="#introduction-to-logminer" aria-hidden="true">#</a> Introduction to LogMiner</h2><h3 id="logminer-configuration" tabindex="-1"><a class="header-anchor" href="#logminer-configuration" aria-hidden="true">#</a> LogMiner Configuration</h3><p>\u4F60\u5E94\u8BE5\u719F\u6089LogMiner\u914D\u7F6E\u4E2D\u7684\u56DB\u4E2A\u57FA\u672C\u5BF9\u8C61\uFF1A\u6E90\u6570\u636E\u5E93(source database)\uFF0C\u6316\u6398\u6570\u636E\u5E93(mining database)\uFF0CLogMiner\u8BCD\u5178(LogMiner dictionary)\u4EE5\u53CA\u5305\u542B\u611F\u5174\u8DA3\u6570\u636E\u7684Redo\u65E5\u5FD7\u6587\u4EF6(redo log files)\uFF1A</p><ul><li><p>\u6E90\u6570\u636E\u5E93\u662F\u751F\u6210\u60A8\u5E0C\u671BLogMiner\u5206\u6790\u7684\u6240\u6709\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6570\u636E\u5E93\u3002</p></li><li><p>\u6316\u6398\u6570\u636E\u5E93\u662FLogMiner\u6267\u884C\u5206\u6790\u65F6\u4F7F\u7528\u7684\u6570\u636E\u5E93\u3002</p></li><li><p>LogMiner\u5B57\u5178\u5141\u8BB8LogMiner\u5728\u663E\u793A\u60A8\u8BF7\u6C42\u7684\u91CD\u505A\u65E5\u5FD7\u6570\u636E\u65F6\u63D0\u4F9B\u8868\u540D\u548C\u5217\u540D\uFF0C\u800C\u4E0D\u662F\u5185\u90E8\u5BF9\u8C61id\u3002</p><p>LogMiner\u4F7F\u7528\u5B57\u5178\u5C06\u5185\u90E8\u5BF9\u8C61\u6807\u8BC6\u7B26\u548C\u6570\u636E\u7C7B\u578B\u8F6C\u6362\u4E3A\u5BF9\u8C61\u540D\u79F0\u548C\u5916\u90E8\u6570\u636E\u683C\u5F0F\u3002\u5982\u679C\u6CA1\u6709\u5B57\u5178\uFF0CLogMiner\u5C06\u8FD4\u56DE\u5185\u90E8\u5BF9\u8C61id\u5E76\u4EE5\u4E8C\u8FDB\u5236\u6570\u636E\u7684\u5F62\u5F0F\u663E\u793A\u6570\u636E\u3002</p><p>\u4F8B\u5982\uFF0C\u8003\u8651\u4EE5\u4E0BSQL\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> HR<span class="token punctuation">.</span>JOBS<span class="token punctuation">(</span>JOB_ID<span class="token punctuation">,</span> JOB_TITLE<span class="token punctuation">,</span> MIN_SALARY<span class="token punctuation">,</span> MAX_SALARY<span class="token punctuation">)</span>  <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;IT_WT&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Technical Writer&#39;</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">,</span> <span class="token number">11000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CA1\u6709\u5B57\u5178\uFF0CLogMiner\u4F1A\u663E\u793A:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;UNKNOWN&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;OBJ# 45522&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;COL 1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;COL 2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;COL 3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;COL 4&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span>
<span class="token punctuation">(</span>HEXTORAW<span class="token punctuation">(</span><span class="token string">&#39;45465f4748&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>HEXTORAW<span class="token punctuation">(</span><span class="token string">&#39;546563686e6963616c20577269746572&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
HEXTORAW<span class="token punctuation">(</span><span class="token string">&#39;c229&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>HEXTORAW<span class="token punctuation">(</span><span class="token string">&#39;c3020b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5305\u542B\u5BF9\u6570\u636E\u5E93\u6216\u6570\u636E\u5E93\u5B57\u5178\u6240\u505A\u7684\u66F4\u6539\u3002</p></li></ul><h3 id="directing-logminer-operations-and-retrieving-data-of-interest" tabindex="-1"><a class="header-anchor" href="#directing-logminer-operations-and-retrieving-data-of-interest" aria-hidden="true">#</a> Directing LogMiner Operations and Retrieving Data of Interest</h3><p>\u4F60\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528LogMiner<code>DBMS_LOGMNR</code> and <code>DBMS_LOGMNR_D</code> PL/SQL\u7A0B\u5E8F\u5305, \u5E76\u4F7F\u7528 <code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE, \u5982\u4E0B:</p><ol><li><p>\u6307\u5B9ALogMiner\u5B57\u5178.</p><p>\u4F7F\u7528<code>DBMS_LOGMNR_D.BUILD</code>\u7A0B\u5E8F\u751F\u6210\u6216\u8005\u5F53\u542F\u52A8LogMiner(\u7B2C\u4E09\u6B65)\u65F6\u6307\u5B9A\u6570\u636E\u5B57\u5178\uFF0C\u6216\u8005\u540C\u65F6\u4F7F\u7528\u3002\u5177\u4F53\u53D6\u51B3\u4E8E\u4F60\u60F3\u4F7F\u7528\u54EA\u79CD\u6570\u636E\u5B57\u5178\u3002</p></li><li><p>\u6307\u5B9A\u8981\u5206\u6790\u7684Redo\u65E5\u5FD7\u5217\u8868</p><p>\u4F7F\u7528<code>DBMS_LOGMNR.ADD_LOGFILE</code>\u7A0B\u5E8F\u6DFB\u52A0\u6216\u8005\u5F53\u542F\u52A8LogMiner(\u7B2C\u4E09\u6B65)\u65F6\u81EA\u52A8\u521B\u5EFA\u8981\u5206\u6790\u7684\u65E5\u5FD7\u6587\u4EF6\u5217\u8868</p></li><li><p>\u542F\u52A8LogMiner.</p><p>\u4F7F\u7528 <code>DBMS_LOGMNR.START_LOGMNR</code>\u7A0B\u5E8F .</p></li><li><p>\u83B7\u53D6\u60F3\u8981\u7684\u6570\u636E.</p><p>\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE.</p></li><li><p>\u7ED3\u675FLogMiner\u4F1A\u8BDD.</p><p>\u4F7F\u7528<code>DBMS_LOGMNR.END_LOGMNR</code>\u7A0B\u5E8F.</p></li></ol><p>\u4F60\u5FC5\u987B\u62E5\u6709<code>EXECUTE_CATALOG_ROLE</code>\u89D2\u8272\u548C <code>LOGMINING</code>\u7684\u6743\u9650\u53BB\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u548C\u4F7F\u7528LogMiner PL/SQL \u7A0B\u5E8F\u5305 .</p><p>\u6CE8\u610F:</p><p>\u5728\u7531Oracle RAC\u6570\u636E\u5E93\u751F\u6210\u7684\u5F52\u6863\u65E5\u5FD7\u4E2D\u6316\u6398\u6307\u5B9A\u65F6\u95F4\u6216\u611F\u5174\u8DA3\u7684SCN\u8303\u56F4\u65F6\uFF0C\u5FC5\u987B\u786E\u4FDD\u5DF2\u4ECE\u8BE5\u65F6\u95F4\u6BB5\u6216SCN\u8303\u56F4\u5185\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u7684\u6240\u6709\u91CD\u505A\u7EBF\u7A0B\u6307\u5B9A\u4E86\u6240\u6709\u5F52\u6863\u65E5\u5FD7\u3002\u5982\u679C\u60A8\u65E0\u6CD5\u6267\u884C\u6B64\u64CD\u4F5C\uFF0C\u5219\u6240\u6709V$LOGMNR_CONTENTS\u8FD4\u56DE\u90E8\u5206\u7ED3\u679C\u7684\u67E5\u8BE2\u90FD\u5C06\u4EC5\u8FD4\u56DE\u90E8\u5206\u7ED3\u679C\uFF08\u57FA\u4E8E\u901A\u8FC7\u8BE5DBMS_LOGMNR.ADD_LOGFILE\u8FC7\u7A0B\u6307\u5B9A\u7ED9LogMiner\u7684\u5B58\u6863\u65E5\u5FD7\uFF09\u3002\u4F7F\u7528\u8BE5CONTINUOUS_MINE\u9009\u9879\u5728\u6E90\u6570\u636E\u5E93\u4E2D\u6316\u6398\u5F52\u6863\u65E5\u5FD7\u65F6\uFF0C\u6B64\u9650\u5236\u4E5F\u6709\u6548\u3002CONTINUOUS_MINE\u5982\u679C\u6CA1\u6709\u542F\u7528\u6216\u7981\u7528\u7EBF\u7A0B\uFF0C\u5219\u4EC5\u5E94\u5728Oracle RAC\u6570\u636E\u5E93\u4E0A\u4F7F\u7528\u3002</p>`,10),S=s("\u4E5F\u53EF\u4EE5\u770B\u770B\u4E00\u4E2A\u4F7F\u7528LogMiner\u7684\u4F8B\u5B50"),M={href:"https://docs.oracle.com/database/121/SUTIL/GUID-6609EBA2-B2D7-4EAE-8344-A1F6C0A24760.htm",target:"_blank",rel:"noopener noreferrer"},D=s("Steps in a Typical LogMiner Session"),q=t("<p>\u60A8\u53EF\u4EE5\u4F7F\u7528 DBMS_LOGMNR \u548C DBMS_LOGMNR_D PL / SQL\u7A0B\u5E8F\u5305\uFF0C\u5E76\u4F7F\u7528 V$LOGMNR_CONTENTS \u89C6\u56FE\u5982\u4E0B\uFF1A</p><p>\u6307\u5B9ALogMiner\u5B57\u5178\u3002 \u4F7F\u7528 DBMS_LOGMNR_D.BUILD \u5728\u542F\u52A8LogMiner\u65F6\uFF08\u5728\u7B2C3\u6B65\u4E2D\uFF09\u6216\u540C\u65F6\u6307\u5B9A\u4E24\u8005\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u60A8\u6253\u7B97\u4F7F\u7528\u7684\u5B57\u5178\u7C7B\u578B\u3002</p><p>\u6307\u5B9A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u4EE5\u8FDB\u884C\u5206\u6790\u3002 \u4F7F\u7528 DBMS_LOGMNR.ADD_LOGFILE \u6B65\u9AA4\uFF0C\u6216\u6307\u793ALogMiner\u5728\u542F\u52A8LogMiner\u65F6\u81EA\u52A8\u521B\u5EFA\u8981\u5206\u6790\u7684\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\uFF08\u5728\u6B65\u9AA43\u4E2D\uFF09\u3002</p><p>\u542F\u52A8LogMiner\u3002 \u4F7F\u7528 DBMS_LOGMNR.START_LOGMNR \u7A0B\u5E8F\u3002</p><p>\u8BF7\u6C42\u611F\u5174\u8DA3\u7684\u91CD\u505A\u6570\u636E\u3002 \u67E5\u8BE2V$LOGMNR_CONTENTS\u89C6\u56FE\u3002</p><p>\u7ED3\u675FLogMiner\u4F1A\u8BDD\u3002 \u4F7F\u7528 DBMS_LOGMNR.END_LOGMNR \u7A0B\u5E8F\u3002</p><p>\u60A8\u5FC5\u987B\u5177\u6709\u67E5\u8BE2\u89C6\u56FE\u548C\u4F7F\u7528LogMiner PL / SQL\u5305\u7684EXECUTE_CATALOG_ROLE\u89D2\u8272\u548CLOGMINING\u7279\u6743V$LOGMNR_CONTENTS\u3002</p><p>\u6CE8\u610F\uFF1A</p><p>\u5728\u7531Oracle RAC\u6570\u636E\u5E93\u751F\u6210\u7684\u5F52\u6863\u65E5\u5FD7\u4E2D\u6316\u6398\u6307\u5B9A\u65F6\u95F4\u6216\u611F\u5174\u8DA3\u7684SCN\u8303\u56F4\u65F6\uFF0C\u5FC5\u987B\u786E\u4FDD\u5DF2\u4ECE\u8BE5\u65F6\u95F4\u6BB5\u6216SCN\u8303\u56F4\u5185\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u7684\u6240\u6709\u91CD\u505A\u7EBF\u7A0B\u6307\u5B9A\u4E86\u6240\u6709\u5F52\u6863\u65E5\u5FD7\u3002\u5982\u679C\u60A8\u65E0\u6CD5\u6267\u884C\u6B64\u64CD\u4F5C\uFF0C\u5219\u6240\u6709V$LOGMNR_CONTENTS\u8FD4\u56DE\u90E8\u5206\u7ED3\u679C\u7684\u67E5\u8BE2\u90FD\u5C06\u4EC5\u8FD4\u56DE\u90E8\u5206\u7ED3\u679C\uFF08\u57FA\u4E8E\u901A\u8FC7\u8BE5DBMS_LOGMNR.ADD_LOGFILE\u8FC7\u7A0B\u6307\u5B9A\u7ED9LogMiner\u7684\u5B58\u6863\u65E5\u5FD7\uFF09\u3002\u4F7F\u7528\u8BE5CONTINUOUS_MINE\u9009\u9879\u5728\u6E90\u6570\u636E\u5E93\u4E2D\u6316\u6398\u5F52\u6863\u65E5\u5FD7\u65F6\uFF0C\u6B64\u9650\u5236\u4E5F\u6709\u6548\u3002CONTINUOUS_MINE\u5982\u679C\u6CA1\u6709\u542F\u7528\u6216\u7981\u7528\u7EBF\u7A0B\uFF0C\u5219\u4EC5\u5E94\u5728Oracle RAC\u6570\u636E\u5E93\u4E0A\u4F7F\u7528\u3002</p><p>\u4E5F\u53EF\u4EE5\u770B\u770B\uFF1A</p>",10),y=s("\u6709\u5173\u4F7F\u7528LogMiner\u7684\u793A\u4F8B\uFF0C\u8BF7\u53C2\u89C1 "),I={href:"https://docs.oracle.com/database/121/SUTIL/GUID-6609EBA2-B2D7-4EAE-8344-A1F6C0A24760.htm",target:"_blank",rel:"noopener noreferrer"},f=s("\u5178\u578BLogMiner\u4F1A\u8BDD\u4E2D\u7684\u6B65\u9AA4"),C=t('<h2 id="using-logminer-in-a-cdb" tabindex="-1"><a class="header-anchor" href="#using-logminer-in-a-cdb" aria-hidden="true">#</a> Using LogMiner in a CDB</h2><p>LogMiner\u53EF\u4EE5\u5728\u591A\u79DF\u6237\u5BB9\u5668\u6570\u636E\u5E93(CDB)\u4E2D\u4F7F\u7528\uFF0C\u4F46\u662F\u4E0B\u9762\u7684\u5C0F\u8282\u8BA8\u8BBA\u4E86\u5728CDB\u4E2D\u4F7F\u7528LogMiner\u4E0E\u5728\u975ECDB\u4E2D\u4F7F\u7528LogMiner\u65F6\u9700\u8981\u6CE8\u610F\u7684\u4E00\u4E9B\u533A\u522B:</p><h3 id="logminer-v-views-and-dba-views-in-a-cdb" tabindex="-1"><a class="header-anchor" href="#logminer-v-views-and-dba-views-in-a-cdb" aria-hidden="true">#</a> LogMiner V$ Views and DBA Views in a CDB</h3><p>\u5728CDB\u4E2D\uFF0CLogMiner\u7528\u4E8E\u663E\u793A\u6709\u5173\u5728\u7CFB\u7EDF\u4E2D\u8FD0\u884C\u7684LogMiner\u4F1A\u8BDD\u7684\u4FE1\u606F\u7684\u89C6\u56FE\u5305\u542B\u4E00\u4E2A\u540D\u4E3ACON_ID\u7684\u9644\u52A0\u5217\u3002\u6B64\u5217\u6807\u8BC6\u4E0E\u663E\u793A\u5176\u4FE1\u606F\u7684\u4F1A\u8BDD\u76F8\u5173\u8054\u7684\u5BB9\u5668ID\u3002\u5F53\u4ECE\u53EF\u63D2\u62D4\u6570\u636E\u5E93(PDB)\u67E5\u8BE2\u89C6\u56FE\u65F6\uFF0C\u53EA\u663E\u793A\u4E0E\u6570\u636E\u5E93\u76F8\u5173\u7684\u4FE1\u606F\u3002\u4EE5\u4E0B\u89C6\u56FE\u53D7\u6B64\u65B0\u884C\u4E3A\u5F71\u54CD:</p><ol><li><p><code>V$LOGMNR_DICTIONARY_LOAD</code></p></li><li><p><code>V$LOGMNR_LATCH</code></p></li><li><p><code>V$LOGMNR_PROCESS</code></p></li><li><p><code>V$LOGMNR_SESSION</code></p></li><li><p><code>V$LOGMNR_STATS</code></p></li></ol>',5),w=s("\u4E3A\u4E86\u652F\u6301CDBs, \u9664\u4E86CON_ID\u4E4B\u5916"),G=n("code",null,"V$LOGMNR_CONTENTS",-1),U=s("\u89C6\u56FE\u8FD8\u6709\u5176\u4ED6\u51E0\u4E2A\u65B0\u5217 "),x={href:"https://docs.oracle.com/database/121/SUTIL/GUID-0D154805-40CB-47B8-B2D6-8CD86FBA9DC8.htm",target:"_blank",rel:"noopener noreferrer"},P=s("The V$LOGMNR_CONTENTS View in a CDB"),B=s('".'),Y=t(`<p>\u4EE5\u4E0BDBA\u89C6\u56FE\u5177\u6709\u7C7B\u4F3C\u7684CDB\u89C6\u56FE\uFF0C\u5176\u540D\u79F0\u4EE5CDB\u5F00\u5934\u3002</p><table><thead><tr><th>DBA View</th><th>CDB_ View</th></tr></thead><tbody><tr><td><code>DBA_LOGMNR_LOG</code></td><td><code>CDB_LOGMNR_LOG</code></td></tr><tr><td><code>DBA_LOGMNR_PURGED_LOG</code></td><td><code>CDB_LOGMNR_PURGED_LOG</code></td></tr><tr><td><code>DBA_LOGMNR_SESSION</code></td><td><code>CDB_LOGMNR_SESSION</code></td></tr></tbody></table><p>DBA\u89C6\u56FE\u53EA\u663E\u793A\u4E0E\u67E5\u8BE2\u5B83\u4EEC\u7684\u5BB9\u5668\u4E2D\u5B9A\u4E49\u7684\u4F1A\u8BDD\u76F8\u5173\u7684\u4FE1\u606F\u3002</p><p>CDB\u89C6\u56FE\u5305\u542B\u4E00\u4E2A\u9644\u52A0\u7684CON_ID\u5217\uFF0C\u5B83\u6807\u8BC6\u7ED9\u5B9A\u884C\u6240\u4EE3\u8868\u6570\u636E\u7684\u5BB9\u5668\u3002\u4ECE\u6839\u76EE\u5F55\u67E5\u8BE2CDB\u89C6\u56FE\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5B83\u4EEC\u67E5\u770B\u6240\u6709\u5BB9\u5668\u7684\u4FE1\u606F\u3002</p><h3 id="the-v-logmnr-contents-view-in-a-cdb" tabindex="-1"><a class="header-anchor" href="#the-v-logmnr-contents-view-in-a-cdb" aria-hidden="true">#</a> The V$LOGMNR_CONTENTS View in a CDB</h3><p>\u5728CDB\u4E2D\uFF0C<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u53CA\u5176\u76F8\u5173\u51FD\u6570\u88AB\u9650\u5236\u5728\u6839\u6570\u636E\u5E93\u4E2D\u3002\u4E3A\u652F\u6301CDBs\uFF0C\u5728\u89C6\u56FE\u4E2D\u65B0\u589E\u4E86\u51E0\u5217:</p><ul><li><p><code>CON_ID</code> - \u5305\u542B\u4E0E\u6267\u884C\u67E5\u8BE2\u7684\u5BB9\u5668\u76F8\u5173\u8054\u7684ID\u3002\u56E0\u4E3A<code>V$LOGMNR_CONTENTS</code>\u88AB\u9650\u5236\u5728\u6839\u6570\u636E\u5E93\u4E2D\uFF0C\u6240\u4EE5\u5F53\u5728CDB\u4E0A\u6267\u884C\u67E5\u8BE2\u65F6\uFF0C\u8BE5\u5217\u8FD4\u56DE\u4E00\u4E2A\u503C1\u3002</p></li><li><p><code>SRC_CON_NAME</code> - PDB\u7684\u540D\u5B57\u3002\u6B64\u4FE1\u606F\u4EC5\u5728\u4F7F\u7528LogMiner\u5B57\u5178\u8FDB\u884C\u6316\u6398\u65F6\u53EF\u7528\u3002</p></li><li><p><code>SRC_CON_ID</code> - \u751F\u6210\u91CD\u505A\u8BB0\u5F55\u7684PDB\u7684\u5BB9\u5668ID\u3002\u6B64\u4FE1\u606F\u4EC5\u5728\u4F7F\u7528LogMiner\u5B57\u5178\u8FDB\u884C\u6316\u6398\u65F6\u53EF\u7528\u3002</p></li><li><p><code>SRC_CON_DBID</code> - PDB\u6807\u8BC6\u7B26\u3002\u6B64\u4FE1\u606F\u4EC5\u5728\u4F7F\u7528\u5F53\u524DLogMiner\u5B57\u5178\u8FDB\u884C\u6316\u6398\u65F6\u53EF\u7528\u3002</p></li><li><p><code>SRC_CON_GUID</code> - \u5305\u542B\u4E0EPDB\u5173\u8054\u7684GUID\u3002\u6B64\u4FE1\u606F\u4EC5\u5728\u4F7F\u7528\u5F53\u524DLogMiner\u5B57\u5178\u8FDB\u884C\u6316\u6398\u65F6\u53EF\u7528\u3002</p></li></ul><p>\u5728\u4FE1\u606F\u6CA1\u6709\u610F\u4E49\u7684\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u4E9B\u5217\u53EF\u80FD\u5E76\u4E0D\u603B\u662F\u8FD4\u56DE\u503C\u3002\u5F53\u5728\u975Ecdb\u4E2D\u8FDB\u884C\u6316\u6398\u65F6\uFF0CSRC_CON_xxx\u5217\u4E3A\u7A7A\u3002</p><h3 id="enabling-supplemental-logging-in-a-cdb" tabindex="-1"><a class="header-anchor" href="#enabling-supplemental-logging-in-a-cdb" aria-hidden="true">#</a> Enabling Supplemental Logging in a CDB</h3><p>\u5728CDB\u4E2D\uFF0C\u542F\u7528\u548C\u7981\u7528\u6570\u636E\u5E93\u8303\u56F4\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u7684\u8BED\u6CD5\u4E0E\u5728\u975ECDB\u6570\u636E\u5E93\u4E2D\u76F8\u540C:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">ADD</span><span class="token operator">|</span><span class="token keyword">DROP</span><span class="token punctuation">]</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CE8\u610F:</p><ul><li><p>\u5728CDB\u4E2D\uFF0C\u4ECE<code>CDB$ROOT</code>\u542F\u7528\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u7EA7\u522B\u5728\u6574\u4E2ACDB\u4E2D\u542F\u7528\u3002</p></li><li><p>\u5982\u679C\u81F3\u5C11\u5728<code>CDB$ROOT</code>\u4E2D\u542F\u7528\u4E86\u6700\u4F4E\u9650\u5EA6\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5728PDB\u7EA7\u522B\u542F\u7528\u989D\u5916\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u7EA7\u522B\u3002</p></li><li><p>\u5728PDB\u7EA7\u522B\u4E0A\u4E0D\u80FD\u7981\u7528<code>CDB$ROOT</code>\u5728CDB\u7EA7\u522B\u542F\u7528\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u7EA7\u522B\u3002</p></li><li><p>\u4ECE<code>CDB$ROOT</code>\u4E2D\u5220\u9664\u6240\u6709\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u5C06\u7981\u7528\u6574\u4E2ACDB\u7684\u6240\u6709\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u800C\u4E0D\u8003\u8651\u4EE5\u524D\u7684PDB\u7EA7\u522B\u8BBE\u7F6E\u3002</p></li></ul><p>\u4ECECREATE TABLE\u548CALTER TABLE\u8BED\u53E5\u5F00\u59CB\u7684\u9644\u52A0\u65E5\u5FD7\u64CD\u4F5C\u53EF\u4EE5\u5728\u6839\u6570\u636E\u5E93\u6216PDB\u4E2D\u6267\u884C\uFF0C\u53EA\u5F71\u54CD\u5B83\u4EEC\u6240\u5E94\u7528\u7684\u8868\u3002</p><p>\u8981\u7BA1\u7406\u591A\u79DF\u6237\u73AF\u5883\uFF0C\u60A8\u5FC5\u987B\u5177\u6709CDB_DBA\u89D2\u8272\u3002</p><p>\u83B7\u53D6\u66F4\u52A0\u8BE6\u7EC6\u4FE1\u606F\u8BF7\u53C2\u8003:</p>`,16),F={href:"https://docs.oracle.com/database/121/CNCPT/cdblogic.htm#CNCPT89249",target:"_blank",rel:"noopener noreferrer"},V=s("Oracle Database Concepts"),H=s(" for more information about CDBs"),Q={href:"https://docs.oracle.com/database/121/REFRN/GUID-8865F65B-EF6D-44A5-B0A1-3179EFF0C36A.htm#REFRN002",target:"_blank",rel:"noopener noreferrer"},X=s("Oracle Database Reference"),W=s(" for more information about views"),$={href:"https://docs.oracle.com/database/121/DBSEG/release_changes.htm#DBSEG800",target:"_blank",rel:"noopener noreferrer"},J=s("Oracle Database Security Guide"),K=s(" for more information about privileges and roles in CDBs and PDBs"),j=t(`<h2 id="logminer-dictionary-files-and-redo-log-files" tabindex="-1"><a class="header-anchor" href="#logminer-dictionary-files-and-redo-log-files" aria-hidden="true">#</a> LogMiner Dictionary Files and Redo Log Files</h2><p>\u5728\u5F00\u59CB\u4F7F\u7528LogMiner\u4E4B\u524D\uFF0C\u4E86\u89E3LogMiner\u5982\u4F55\u4F7F\u7528LogMiner\u5B57\u5178\u6587\u4EF6(\u6216\u591A\u4E2A\u6587\u4EF6)\u548C\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u662F\u5F88\u91CD\u8981\u7684\u3002\u8FD9\u5C06\u5E2E\u52A9\u60A8\u83B7\u5F97\u51C6\u786E\u7684\u7ED3\u679C\u5E76\u8BA1\u5212\u7CFB\u7EDF\u8D44\u6E90\u7684\u4F7F\u7528\u3002</p><h3 id="logminer-dictionary-options" tabindex="-1"><a class="header-anchor" href="#logminer-dictionary-options" aria-hidden="true">#</a> LogMiner Dictionary Options</h3><p>\u5F53ogMiner\u8FD4\u56DE\u91CD\u505A\u6570\u636E\u65F6\uFF0C\u5B83\u9700\u8981\u4E00\u4E2A\u5B57\u5178\u6765\u5C06\u5BF9\u8C61id\u8F6C\u6362\u6210\u5BF9\u8C61\u540D\u3002LogMiner\u63D0\u4F9B\u4E86\u4E09\u4E2A\u63D0\u4F9B\u5B57\u5178\u7684\u9009\u9879:</p><h4 id="using-the-online-catalog" tabindex="-1"><a class="header-anchor" href="#using-the-online-catalog" aria-hidden="true">#</a> Using the Online Catalog</h4><p>\u8981\u6307\u793ALogMiner\u4F7F\u7528\u5F53\u524D\u6570\u636E\u5E93\u4E2D\u4F7F\u7528\u7684\u5B57\u5178\uFF0C\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9A\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span>OPTIONS <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>DICT_FROM_ONLINE_CATALOG<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u9664\u4E86\u4F7F\u7528\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u5206\u6790\u8054\u673A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5916\uFF0C\u5982\u679C\u60A8\u5728\u751F\u6210\u5F52\u6863\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u540C\u4E00\u7CFB\u7EDF\u4E0A\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u5206\u6790\u5F52\u6863\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002</p><p>\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u5305\u542B\u5173\u4E8E\u6570\u636E\u5E93\u7684\u6700\u65B0\u4FE1\u606F\uFF0C\u53EF\u80FD\u662F\u5F00\u59CB\u5206\u6790\u7684\u6700\u5FEB\u65B9\u6CD5\u3002\u56E0\u4E3A\u66F4\u6539\u91CD\u8981\u8868\u7684DDL\u64CD\u4F5C\u6BD4\u8F83\u5C11\u89C1\uFF0C\u6240\u4EE5\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u901A\u5E38\u5305\u542B\u5206\u6790\u6240\u9700\u7684\u4FE1\u606F\u3002</p><p>\u4F46\u662F\uFF0C\u8BF7\u8BB0\u4F4F\uFF0C\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u53EA\u80FD\u91CD\u6784\u5728\u8868\u7684\u6700\u65B0\u7248\u672C\u4E0A\u6267\u884C\u7684SQL\u8BED\u53E5\u3002\u4E00\u65E6\u8868\u88AB\u66F4\u6539\uFF0C\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u5C31\u4E0D\u518D\u53CD\u6620\u8868\u7684\u524D\u4E00\u4E2A\u7248\u672C\u3002\u8FD9\u610F\u5473\u7740LogMiner\u5C06\u65E0\u6CD5\u91CD\u6784\u5728\u8868\u7684\u524D\u4E00\u4E2A\u7248\u672C\u4E0A\u6267\u884C\u7684\u4EFB\u4F55SQL\u8BED\u53E5\u3002\u76F8\u53CD\uFF0CLogMiner\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684SQL_REDO\u5217\u4E2D\u751F\u6210\u4E0D\u53EF\u6267\u884C\u7684SQL(\u5305\u62EC\u4E8C\u8FDB\u5236\u503C\u7684\u5341\u516D\u8FDB\u5236\u5230\u539F\u59CB\u683C\u5F0F)\uFF0C\u7C7B\u4F3C\u4E8E\u4E0B\u9762\u7684\u793A\u4F8B:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> HR<span class="token punctuation">.</span>EMPLOYEES<span class="token punctuation">(</span>col<span class="token comment">#1, col#2) values (hextoraw(&#39;4a6f686e20446f65&#39;),</span>
hextoraw<span class="token punctuation">(</span><span class="token string">&#39;c306&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8054\u673A\u76EE\u5F55\u9009\u9879\u8981\u6C42\u6570\u636E\u5E93\u662F\u6253\u5F00\u7684\u3002\u6E90\u6570\u636E\u5E93\u6570\u636E\u5B57\u5178\u5BF9\u4E8EDBMS_LOGMNR.START_LOGMNR\u7684DDL_DICT_TRACKING\u9009\u9879\u65E0\u6548\u3002</p><p>Oracle\u5EFA\u8BAE\uFF0C\u5F53\u60A8\u53EF\u4EE5\u8BBF\u95EE\u521B\u5EFA\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6E90\u6570\u636E\u5E93\u65F6\uFF0C\u4EE5\u53CA\u5728\u9884\u671F\u4E0D\u4F1A\u66F4\u6539\u76F8\u5173\u8868\u4E2D\u7684\u5217\u5B9A\u4E49\u65F6\uFF0C\u4F7F\u7528\u6B64\u9009\u9879\u3002\u8FD9\u662F\u6700\u6709\u6548\u548C\u6700\u5BB9\u6613\u4F7F\u7528\u7684\u9009\u62E9\u3002</p><h4 id="extracting-a-logminer-dictionary-to-the-redo-log-files" tabindex="-1"><a class="header-anchor" href="#extracting-a-logminer-dictionary-to-the-redo-log-files" aria-hidden="true">#</a> Extracting a LogMiner Dictionary to the Redo Log Files</h4><p>\u8981\u5C06LogMiner\u5B57\u5178\u63D0\u53D6\u5230\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u5FC5\u987B\u6253\u5F00\u6570\u636E\u5E93\uFF0C\u5E76\u4E14\u5FC5\u987B\u542F\u7528ARCHIVELOG\u6A21\u5F0F\u548C\u5F52\u6863\u3002\u5F53\u5B57\u5178\u88AB\u63D0\u53D6\u5230\u91CD\u505A\u65E5\u5FD7\u6D41\u65F6\uFF0C\u4E0D\u80FD\u6267\u884CDDL\u8BED\u53E5\u3002\u56E0\u6B64\uFF0C\u63D0\u53D6\u5230\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u5B57\u5178\u4FDD\u8BC1\u662F\u4E00\u81F4\u7684(\u800C\u63D0\u53D6\u5230\u5E73\u9762\u6587\u4EF6\u7684\u5B57\u5178\u5219\u4E0D\u662F)\u3002</p><p>\u8981\u5C06\u5B57\u5178\u4FE1\u606F\u63D0\u53D6\u5230\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u8BF7\u6267\u884CPL/SQL DBMS_LOGMNR_D\u3002\u4F7F\u7528STORE_IN_REDO_LOGS\u9009\u9879\u6784\u5EFA\u8FC7\u7A0B\u3002\u4E0D\u8981\u6307\u5B9A\u6587\u4EF6\u540D\u6216\u4F4D\u7F6E\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR_D<span class="token punctuation">.</span>BUILD<span class="token punctuation">(</span>OPTIONS<span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR_D<span class="token punctuation">.</span>STORE_IN_REDO_LOGS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>See Also:</p>`,18),z={href:"https://docs.oracle.com/database/121/ADMIN/archredo.htm#ADMIN11332",target:"_blank",rel:"noopener noreferrer"},Z=s("Oracle Database Administrator's Guide"),nn=s(" for more information about "),sn=n("code",null,"ARCHIVELOG",-1),en=s(" mode"),an={href:"https://docs.oracle.com/database/121/ARPLS/d_logmnrd.htm#ARPLS66816",target:"_blank",rel:"noopener noreferrer"},tn=s("Oracle Database PL/SQL Packages and Types Reference"),on=s(" for a complete description of "),ln=n("code",null,"DBMS_LOGMNR_D.BUILD",-1),pn=t(`<p>\u5C06\u5B57\u5178\u63D0\u53D6\u5230\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u8FC7\u7A0B\u786E\u5B9E\u4F1A\u6D88\u8017\u6570\u636E\u5E93\u8D44\u6E90\uFF0C\u4F46\u662F\u5982\u679C\u5C06\u63D0\u53D6\u9650\u5236\u5728\u975E\u9AD8\u5CF0\u65F6\u95F4\uFF0C\u90A3\u4E48\u8FD9\u5E94\u8BE5\u4E0D\u662F\u95EE\u9898\uFF0C\u800C\u4E14\u5B83\u6BD4\u63D0\u53D6\u5230\u5E73\u9762\u6587\u4EF6\u8981\u5FEB\u3002\u6839\u636E\u5B57\u5178\u7684\u5927\u5C0F\uFF0C\u5B83\u53EF\u80FD\u5305\u542B\u5728\u591A\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002\u5982\u679C\u76F8\u5173\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5DF2\u7ECF\u5B58\u6863\uFF0C\u90A3\u4E48\u60A8\u53EF\u4EE5\u627E\u51FA\u54EA\u4E9B\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5305\u542B\u63D0\u53D6\u7684\u5B57\u5178\u7684\u5F00\u59CB\u548C\u7ED3\u675F\u3002\u4E3A\u6B64\uFF0C\u67E5\u8BE2V$ARCHIVED_LOG\u89C6\u56FE\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME <span class="token keyword">FROM</span> V$ARCHIVED_LOG <span class="token keyword">WHERE</span> DICTIONARY_BEGIN<span class="token operator">=</span><span class="token string">&#39;YES&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> NAME <span class="token keyword">FROM</span> V$ARCHIVED_LOG <span class="token keyword">WHERE</span> DICTIONARY_END<span class="token operator">=</span><span class="token string">&#39;YES&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u51C6\u5907\u5F00\u59CBLogMiner\u4F1A\u8BDD\u65F6\uFF0C\u4F7F\u7528ADD_LOGFILE\u8FC7\u7A0B\u6307\u5B9A\u5F00\u59CB\u548C\u7ED3\u675F\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u540D\u79F0\uFF0C\u4EE5\u53CA\u5B83\u4EEC\u4E4B\u95F4\u53EF\u80FD\u7684\u5176\u4ED6\u65E5\u5FD7\u3002</p><p>Oracle\u5EFA\u8BAE\u60A8\u5B9A\u671F\u5907\u4EFD\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\uFF0C\u4EE5\u4FBF\u4FDD\u5B58\u4FE1\u606F\u5E76\u5728\u4EE5\u540E\u4F7F\u7528\u3002\u7406\u60F3\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u4E0D\u4F1A\u6D89\u53CA\u4EFB\u4F55\u989D\u5916\u7684\u6B65\u9AA4\uFF0C\u56E0\u4E3A\u5982\u679C\u60A8\u7684\u6570\u636E\u5E93\u5F97\u5230\u4E86\u6B63\u786E\u7684\u7BA1\u7406\uFF0C\u90A3\u4E48\u5E94\u8BE5\u5DF2\u7ECF\u6709\u4E86\u5907\u4EFD\u548C\u6062\u590D\u5F52\u6863\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u8FC7\u7A0B\u3002\u540C\u6837\uFF0C\u7531\u4E8E\u6240\u9700\u7684\u65F6\u95F4\uFF0C\u6700\u597D\u5728\u975E\u9AD8\u5CF0\u65F6\u95F4\u8FD9\u6837\u505A\u3002</p><p>Oracle\u5EFA\u8BAE\uFF0C\u5F53\u60A8\u4E0D\u5E0C\u671B\u8BBF\u95EE\u521B\u5EFA\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6E90\u6570\u636E\u5E93\u65F6\uFF0C\u6216\u8005\u5982\u679C\u60A8\u9884\u671F\u5C06\u5BF9\u76F8\u5173\u8868\u4E2D\u7684\u5217\u5B9A\u4E49\u8FDB\u884C\u66F4\u6539\u65F6\uFF0C\u8BF7\u4F7F\u7528\u6B64\u9009\u9879\u3002</p><h4 id="extracting-the-logminer-dictionary-to-a-flat-file" tabindex="-1"><a class="header-anchor" href="#extracting-the-logminer-dictionary-to-a-flat-file" aria-hidden="true">#</a> Extracting the LogMiner Dictionary to a Flat File</h4><p>\u5F53LogMiner\u5B57\u5178\u4F4D\u4E8E\u5E73\u9762\u6587\u4EF6\u4E2D\u65F6\uFF0C\u4F7F\u7528\u7684\u7CFB\u7EDF\u8D44\u6E90\u8981\u6BD4\u5305\u542B\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u65F6\u5C11\u3002Oracle\u5EFA\u8BAE\u60A8\u5B9A\u671F\u5907\u4EFD\u5B57\u5178\u63D0\u53D6\uFF0C\u4EE5\u786E\u4FDD\u5BF9\u65E7\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6B63\u786E\u5206\u6790\u3002</p><p>\u8981\u5C06\u6570\u636E\u5E93\u5B57\u5178\u4FE1\u606F\u63D0\u53D6\u5230\u5E73\u9762\u6587\u4EF6\u4E2D\uFF0C\u4F7F\u7528DBMS_LOGMNR_D\u3002\u4F7F\u7528STORE_IN_FLAT_FILE\u9009\u9879\u6784\u5EFA\u8FC7\u7A0B\u3002</p><p>\u786E\u4FDD\u5728\u6784\u5EFA\u5B57\u5178\u65F6\u6CA1\u6709\u53D1\u751FDDL\u64CD\u4F5C\u3002</p><p>\u4EE5\u4E0B\u6B65\u9AA4\u63CF\u8FF0\u5982\u4F55\u5C06\u5B57\u5178\u63D0\u53D6\u5230\u5E73\u9762\u6587\u4EF6\u4E2D\u3002\u6B65\u9AA41\u548C\u6B65\u9AA42\u662F\u51C6\u5907\u6B65\u9AA4\u3002\u60A8\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u6839\u636E\u9700\u8981\u591A\u6B21\u5C06\u5B57\u5178\u89E3\u538B\u7F29\u5230\u5E73\u9762\u6587\u4EF6\u4E2D\u3002</p><ol><li><p>DBMS_LOGMNR_D\u6784\u5EFA\u8FC7\u7A0B\u9700\u8981\u8BBF\u95EE\u4E00\u4E2A\u53EF\u4EE5\u653E\u7F6E\u5B57\u5178\u6587\u4EF6\u7684\u76EE\u5F55\u3002\u56E0\u4E3APL/SQL\u8FC7\u7A0B\u901A\u5E38\u4E0D\u8BBF\u95EE\u7528\u6237\u76EE\u5F55\uFF0C\u6240\u4EE5\u5FC5\u987B\u6307\u5B9ADBMS_LOGMNR_D\u4F7F\u7528\u7684\u76EE\u5F55\u3002\u8981\u6307\u5B9A\u4E00\u4E2A\u76EE\u5F55\uFF0C\u8BF7\u5728\u521D\u59CB\u5316\u53C2\u6570\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u521D\u59CB\u5316\u53C2\u6570UTL_FILE_DIR\u3002\u4F8B\u5982\uFF0C\u8981\u5C06UTL_FILE_DIR\u8BBE\u7F6E\u4E3A\u4F7F\u7528/oracle/database\u4F5C\u4E3A\u5B57\u5178\u6587\u4EF6\u6240\u5728\u7684\u76EE\u5F55\uFF0C\u8BF7\u5728\u521D\u59CB\u5316\u53C2\u6570\u6587\u4EF6\u4E2D\u653E\u7F6E\u4EE5\u4E0B\u5185\u5BB9:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>UTL_FILE_DIR <span class="token operator">=</span> <span class="token operator">/</span>oracle<span class="token operator">/</span><span class="token keyword">database</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BF7\u8BB0\u4F4F\uFF0C\u8981\u4F7F\u521D\u59CB\u5316\u53C2\u6570\u6587\u4EF6\u7684\u66F4\u6539\u751F\u6548\uFF0C\u5FC5\u987B\u505C\u6B62\u5E76\u91CD\u65B0\u542F\u52A8\u6570\u636E\u5E93\u3002</p></li><li><p>\u5982\u679C\u6570\u636E\u5E93\u5DF2\u5173\u95ED\uFF0C\u5219\u4F7F\u7528SQL*Plus\u6302\u8F7D\u5E76\u6253\u5F00\u8981\u5206\u6790\u5176\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6570\u636E\u5E93\u3002\u4F8B\u5982\uFF0C\u8F93\u5165SQL STARTUP\u547D\u4EE4\u6302\u8F7D\u5E76\u6253\u5F00\u6570\u636E\u5E93:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>STARTUP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u6267\u884CPL/SQL\u8FC7\u7A0BDBMS_LOGMNR_D.BUILD\u6765\u6307\u5B9A\u5B57\u5178\u7684\u6587\u4EF6\u540D\u548C\u6587\u4EF6\u7684\u76EE\u5F55\u8DEF\u5F84\u540D\u3002\u8FD9\u4E2A\u8FC7\u7A0B\u521B\u5EFA\u5B57\u5178\u6587\u4EF6\u3002\u4F8B\u5982\uFF0C\u8F93\u5165\u4EE5\u4E0B\u5185\u5BB9\u6765\u5728<code>/oracle/database</code>\u76EE\u5F55\u4E2D\u521B\u5EFA<code>dictionary.ora</code>\uFF1A</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR_D<span class="token punctuation">.</span>BUILD<span class="token punctuation">(</span><span class="token string">&#39;dictionary.ora&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span> 
   <span class="token string">&#39;/oracle/database/&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span>
    DBMS_LOGMNR_D<span class="token punctuation">.</span>STORE_IN_FLAT_FILE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u60A8\u8FD8\u53EF\u4EE5\u53EA\u6307\u5B9A\u6587\u4EF6\u540D\u548C\u4F4D\u7F6E\uFF0C\u800C\u4E0D\u9700\u8981\u6307\u5B9ASTORE_IN_FLAT_FILE\u9009\u9879\u3002\u7ED3\u679C\u662F\u4E00\u6837\u7684\u3002</p></li></ol><p>\u8FD9\u4E2A\u9009\u9879\u662F\u4E3A\u4E86\u5411\u540E\u517C\u5BB9\u4EE5\u524D\u7684\u7248\u672C\u800C\u4FDD\u7559\u7684\u3002\u6B64\u9009\u9879\u4E0D\u4FDD\u8BC1\u4E8B\u52A1\u4E00\u81F4\u6027\u3002Oracle\u5EFA\u8BAE\u60A8\u4F7F\u7528\u5728\u7EBF\u76EE\u5F55\u6216\u4ECE\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u63D0\u53D6\u5B57\u5178\u3002</p><p>\u5982\u4E0B\u56FE\u663E\u793A\u4E00\u4E2A\u51B3\u7B56\u6811\uFF0C\u6839\u636E\u60A8\u7684\u60C5\u51B5\u5E2E\u52A9\u60A8\u9009\u62E9LogMiner\u5B57\u5178\u3002</p><p><a href="./img/logminer/1.png"></a></p><h3 id="redo-log-file-options" tabindex="-1"><a class="header-anchor" href="#redo-log-file-options" aria-hidden="true">#</a> Redo Log File Options</h3><p>\u8981\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u6316\u6398\u6570\u636E\uFF0CLogMiner\u9700\u8981\u5173\u4E8E\u8981\u6316\u6398\u54EA\u4E9B\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u4FE1\u606F\u3002\u5728\u8FD9\u4E9B\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u5BF9\u6570\u636E\u5E93\u6240\u505A\u7684\u66F4\u6539\u5C06\u901A\u8FC7<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u4F20\u9012\u7ED9\u4F60\u3002</p><p>\u60A8\u53EF\u4EE5\u6307\u793ALogMiner\u81EA\u52A8\u5730\u3001\u52A8\u6001\u5730\u521B\u5EFA\u8981\u5206\u6790\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\uFF0C\u6216\u8005\u60A8\u53EF\u4EE5\u663E\u5F0F\u5730\u6307\u5B9A\u8981\u5206\u6790\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\uFF0C\u5982\u4E0B\u6240\u793A:</p><ol><li>Automatically</li></ol><p>\u5982\u679C\u5728\u6E90\u6570\u636E\u5E93\u4E0A\u4F7F\u7528LogMiner\uFF0C\u5219\u53EF\u4EE5\u6307\u793ALogMiner\u81EA\u52A8\u67E5\u627E\u548C\u521B\u5EFA\u7528\u4E8E\u5206\u6790\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u3002\u4F7F\u7528DBMS_LOGMNR\u542F\u52A8LogMiner\u65F6\uFF0C\u8BF7\u4F7F\u7528CONTINUOUS_MINE\u9009\u9879\u3002START_LOGMNR\u8FC7\u7A0B\uFF0C\u5E76\u6307\u5B9A\u65F6\u95F4\u6216SCN\u8303\u56F4\u3002\u867D\u7136\u672C\u4F8B\u6307\u5B9A\u4E86\u5728\u7EBF\u76EE\u5F55\u4E2D\u7684\u5B57\u5178\uFF0C\u4F46\u662F\u4EFB\u4F55LogMiner\u5B57\u5178\u90FD\u53EF\u4EE5\u4F7F\u7528\u3002</p><pre><code>\u6CE8\u610F:CONTINUOUS_MINE\u9009\u9879\u8981\u6C42\u6302\u8F7D\u6570\u636E\u5E93\u5E76\u542F\u7528\u5F52\u6863\u3002

LogMiner\u5C06\u4F7F\u7528\u6570\u636E\u5E93\u63A7\u5236\u6587\u4EF6\u67E5\u627E\u5E76\u5C06\u6EE1\u8DB3\u6307\u5B9A\u65F6\u95F4\u6216SCN\u8303\u56F4\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u6DFB\u52A0\u5230LogMiner\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u4E2D\u3002\u4F8B\u5982:

\`\`\`sql
ALTER SESSION SET NLS_DATE_FORMAT = &#39;DD-MON-YYYY HH24:MI:SS&#39;;
EXECUTE DBMS_LOGMNR.START_LOGMNR( -
   STARTTIME =&gt; &#39;01-Jan-2012 08:30:00&#39;, -
   ENDTIME =&gt; &#39;01-Jan-2012 08:45:00&#39;, -
   OPTIONS =&gt; DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG + -
   DBMS_LOGMNR.CONTINUOUS_MINE);
\`\`\`

(\u4E3A\u4E86\u907F\u514D\u5728\u5BF9DBMS_LOGMNR\u7684PL/SQL\u8C03\u7528\u4E2D\u6307\u5B9A\u65E5\u671F\u683C\u5F0F\u3002START_LOGMNR\u8FC7\u7A0B\uFF0C\u672C\u4F8B\u9996\u5148\u4F7F\u7528SQL ALTER\u4F1A\u8BDD\u96C6NLS_DATE_FORMAT\u8BED\u53E5\u3002)

\u60A8\u8FD8\u53EF\u4EE5\u4F7F\u7528DBMS_LOGMNR\u6307\u5B9A\u4E00\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\uFF0C\u4ECE\u800C\u6307\u793ALogMiner\u81EA\u52A8\u6784\u5EFA\u8981\u5206\u6790\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u3002\u7136\u540E\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9ACONTINUOUS_MINE\u9009\u9879\u3002\u7136\u800C\uFF0C\u524D\u9762\u63CF\u8FF0\u7684\u65B9\u6CD5\u66F4\u5178\u578B\u3002
</code></pre><ol start="2"><li><p>Manually</p><p>\u4F7F\u7528DBMS_LOGMNR\u3002\u5728\u542F\u52A8LogMiner\u4E4B\u524D\u624B\u52A8\u521B\u5EFA\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u7684ADD_LOGFILE\u8FC7\u7A0B\u3002\u5C06\u7B2C\u4E00\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u6DFB\u52A0\u5230\u5217\u8868\u540E\uFF0C\u968F\u540E\u6DFB\u52A0\u7684\u6BCF\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5FC5\u987B\u6765\u81EA\u76F8\u540C\u7684\u6570\u636E\u5E93\uFF0C\u5E76\u4E0E\u76F8\u540C\u7684\u6570\u636E\u5E93\u91CD\u505A\u65E5\u5FD7SCN\u76F8\u5173\u8054\u3002\u4F7F\u7528\u6B64\u65B9\u6CD5\u65F6\uFF0CLogMiner\u4E0D\u9700\u8981\u8FDE\u63A5\u5230\u6E90\u6570\u636E\u5E93\u3002</p><p>\u4F8B\u5982\uFF0C\u8981\u542F\u52A8\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u65B0\u5217\u8868\uFF0C\u8BF7\u6307\u5B9ADBMS_LOGMNR\u7684\u65B0\u9009\u9879\u3002ADD_LOGFILE PL/SQL\u8FC7\u7A0B\uFF0C\u8868\u660E\u8FD9\u662F\u4E00\u4E2A\u65B0\u5217\u8868\u7684\u5F00\u59CB\u3002\u4F8B\u5982\uFF0C\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\u6765\u6307\u5B9A/oracle/logs/log1.f:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>ADD_LOGFILE<span class="token punctuation">(</span> <span class="token operator">-</span>
   LOGFILENAME <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;/oracle/logs/log1.f&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span>
   OPTIONS <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>NEW<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6307\u5B9APL/SQL DBMS_LOGMNR\u7684ADDFILE\u9009\u9879\u6765\u6DFB\u52A0\u66F4\u591A\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002ADD_LOGFILE\u8FC7\u7A0B\u3002\u4F8B\u5982\uFF0C\u8F93\u5165\u4EE5\u4E0B\u5185\u5BB9\u6765\u6DFB\u52A0/oracle/logs/log2.f:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>ADD_LOGFILE<span class="token punctuation">(</span> <span class="token operator">-</span>
   LOGFILENAME <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;/oracle/logs/log2.f&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span>
   OPTIONS <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>ADDFILE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8981\u786E\u5B9A\u5728\u5F53\u524DLogMiner\u4F1A\u8BDD\u4E2D\u5206\u6790\u54EA\u4E9B\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\uFF0C\u53EF\u4EE5\u67E5\u8BE2<code>V$LOGMNR_LOGS</code>\u89C6\u56FE\uFF0C\u5176\u4E2D\u5305\u542B\u6BCF\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u4E00\u884C\u3002</p></li></ol><h2 id="starting-logminer" tabindex="-1"><a class="header-anchor" href="#starting-logminer" aria-hidden="true">#</a> Starting LogMiner</h2><p>\u8C03\u7528<code>DBMS_LOGMNR.START_LOGMNR</code>\u6765\u542F\u52A8LogMiner\u3002\u56E0\u4E3ADBMS_LOGMNR\u63D0\u4F9B\u4E86\u53EF\u7528\u7684\u9009\u9879\u3002START_LOGMNR\u8FC7\u7A0B\u5141\u8BB8\u4F60\u63A7\u5236\u8F93\u51FA\u5230<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\uFF0C\u5728\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code> \u89C6\u56FE\u4E4B\u524D\u6267\u884C\u5FC5\u987B\u8C03\u7528<code>DBMS_LOGMNR.START_LOGMNR</code>\u3002</p><p>\u5F53\u4F60\u542F\u52A8LogMiner\uFF0C\u4F60\u53EF\u4EE5:</p><ul><li><p>\u6307\u5B9ALogMiner\u5E94\u8BE5\u5982\u4F55\u8FC7\u6EE4\u5B83\u8FD4\u56DE\u7684\u6570\u636E(\u4F8B\u5982\uFF0C\u901A\u8FC7\u5F00\u59CB\u548C\u7ED3\u675F\u65F6\u95F4\u6216SCN\u503C)</p></li><li><p>\u6307\u5B9A\u683C\u5F0F\u5316LogMiner\u8FD4\u56DE\u7684\u6570\u636E\u7684\u9009\u9879</p></li><li><p>\u6307\u5B9A\u8981\u4F7F\u7528\u7684LogMiner\u5B57\u5178</p></li></ul><p>\u4E0B\u9762\u7684\u5217\u8868\u662FLogMiner\u8BBE\u7F6E\u7684\u6458\u8981\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528DBMS_LOGMNR.START_LOGMNR\u7684OPTIONS\u53C2\u6570\u6307\u5B9A\u8FD9\u4E9B\u8BBE\u7F6E\u3002</p>`,26),cn=n("code",null,"DICT_FROM_ONLINE_CATALOG",-1),rn=s(' \u2014 See "'),dn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-1D510A2F-4CE8-4D69-AB18-CDD58FB3458C.htm",target:"_blank",rel:"noopener noreferrer"},un=s("Using the Online Catalog"),vn=s('"'),mn=n("code",null,"DICT_FROM_REDO_LOGS",-1),kn=s(' \u2014 See "'),bn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-319446A8-6FEC-42CE-A6A4-582CA65377CF.htm",target:"_blank",rel:"noopener noreferrer"},gn=s("Start LogMiner"),hn=s('"'),En=n("code",null,"CONTINUOUS_MINE",-1),_n=s(' \u2014 See "'),Ln={href:"https://docs.oracle.com/database/121/SUTIL/GUID-C50E9C76-ABA1-4A27-AAB4-C65479EDFDE0.htm",target:"_blank",rel:"noopener noreferrer"},On=s("Redo Log File Options"),Tn=s('"'),Nn=n("code",null,"COMMITTED_DATA_ONLY",-1),An=s(' \u2014 See "'),Rn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-6A2398F7-D484-495A-8AD2-0A6B34C03536.htm",target:"_blank",rel:"noopener noreferrer"},Sn=s("Showing Only Committed Transactions"),Mn=s('"'),Dn=n("code",null,"SKIP_CORRUPTION",-1),qn=s(' \u2014 See "'),yn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-FAA95EFA-4AC0-4F5B-BE30-D79A9AC4C6B9.htm",target:"_blank",rel:"noopener noreferrer"},In=s("Skipping Redo Corruptions"),fn=s('"'),Cn=n("code",null,"NO_SQL_DELIMITER",-1),wn=s(' \u2014 See "'),Gn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-C2B8C741-9544-4A46-818E-16B233570599.htm",target:"_blank",rel:"noopener noreferrer"},Un=s("Formatting Reconstructed SQL Statements for Re-execution"),xn=s('"'),Pn=n("code",null,"PRINT_PRETTY_SQL",-1),Bn=s(' \u2014 See "'),Yn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-95841FA7-BE3F-4B78-B52B-47D5F6ED5623.htm",target:"_blank",rel:"noopener noreferrer"},Fn=s("Formatting the Appearance of Returned Data for Readability"),Vn=s('"'),Hn=n("code",null,"NO_ROWID_IN_STMT",-1),Qn=s(' \u2014 See "'),Xn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-C2B8C741-9544-4A46-818E-16B233570599.htm",target:"_blank",rel:"noopener noreferrer"},Wn=s("Formatting Reconstructed SQL Statements for Re-execution"),$n=s('"'),Jn=n("code",null,"DDL_DICT_TRACKING",-1),Kn=s(' \u2014 See "'),jn={href:"https://docs.oracle.com/database/121/SUTIL/GUID-56743517-A0C0-4CCD-9D20-2883AFB5683B.htm",target:"_blank",rel:"noopener noreferrer"},zn=s("Tracking DDL Statements in the LogMiner Dictionary"),Zn=s('"'),ns=s("\u5F53\u6267\u884C"),ss=n("code",null,"DBMS_LOGMNR.START_LOGMNR",-1),es=s("\u8FC7\u7A0B, LogMiner\u4F1A\u68C0\u6D4B\u786E\u4FDD\u4F60\u6307\u5B9A\u7684\u53C2\u6570\u662F\u6709\u6548\u7684\u5E76\u4E14\u91CD\u505A\u65E5\u5FD7\u548C\u6570\u636E\u5B57\u5178\u662F\u5B58\u5728\u53EF\u83B7\u5F97\u7684\u3002 \u5728\u60A8\u67E5\u8BE2\u89C6\u56FE\u4E4B\u524D\uFF0C"),as=n("code",null,"V$LOGMNR_CONTENTS",-1),ts=s("\u89C6\u56FE\u4E0D\u4F1A\u88AB\u586B\u5145, \u8BE6\u89C1"),os={href:"https://docs.oracle.com/database/121/SUTIL/GUID-CD389496-1D82-4E39-881F-C0C18355C573.htm",target:"_blank",rel:"noopener noreferrer"},is=s("How the V$LOGMNR_CONTENTS View Is Populated"),ls=s("."),ps=t('<p>\u6CE8\u610F\uFF0C\u5728\u8C03\u7528DBMS_LOGMNR.START_LOGMNR\u65F6\uFF0C\u53C2\u6570\u548C\u9009\u9879\u4E0D\u662F\u6301\u4E45\u7684\u3002\u6BCF\u6B21\u8C03\u7528DBMS_LOGMNR.START_LOGMNR\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u6240\u6709\u9700\u8981\u7684\u53C2\u6570\u548C\u9009\u9879(\u5305\u62ECSCN\u548C\u65F6\u95F4\u8303\u56F4)\u3002</p><h2 id="querying-v-logmnr-contents-for-redo-data-of-interest" tabindex="-1"><a class="header-anchor" href="#querying-v-logmnr-contents-for-redo-data-of-interest" aria-hidden="true">#</a> Querying V$LOGMNR_CONTENTS for Redo Data of Interest</h2><p>\u901A\u8FC7\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u83B7\u53D6\u6211\u4EEC\u611F\u5174\u8DA3\u7684\u6570\u636E. (\u6CE8\u610F\u8981\u6709 <code>SYSDBA</code> or <code>LOGMINING</code> \u6743\u9650\u6765\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>.) \u8FD9\u4E2A\u89C6\u56FE\u5305\u62EC\u4E86\u6570\u636E\u5E93\u7684\u5386\u53F2\u53D8\u66F4\u4FE1\u606F\uFF0C\u5305\u62EC\u4F46\u4E0D\u4EC5\u9650\u4E8E\u4E0B\u5217:</p><ul><li><p>\u5BF9\u6570\u636E\u5E93\u7684\u66F4\u6539\u7C7B\u578B:\u63D2\u5165\u3001\u66F4\u65B0\u3001\u5220\u9664\u6216DDL(<code>OPERATION</code> column).</p></li><li><p>\u5BF9\u5176\u8FDB\u884C\u66F4\u6539\u7684SCN(<code>SCN</code> column).</p></li><li><p>\u63D0\u4EA4\u66F4\u6539\u7684SCN (<code>COMMIT_SCN</code> column).</p></li><li><p>\u53D8\u66F4\u6240\u5C5E\u7684\u4E8B\u52A1 (<code>XIDUSN</code>, <code>XIDSLT</code>, and <code>XIDSQN</code> columns).</p></li><li><p>\u4FEE\u6539\u5BF9\u8C61\u5BF9\u5E94\u7684\u8868\u548Cschema (<code>SEG_NAME</code> and <code>SEG_OWNER</code> columns).</p></li><li><p>\u53D1\u51FADDL\u6216DML\u8BED\u53E5\u8FDB\u884C\u66F4\u6539\u7684\u7528\u6237\u7684\u540D\u79F0(<code>USERNAME</code> column).</p></li><li><p>\u5982\u679C\u66F4\u6539\u662F\u7531\u4E8ESQL DML\u8BED\u53E5\u9020\u6210\u7684\uFF0C\u5219\u91CD\u6784\u7684SQL\u8BED\u53E5\u5C06\u663E\u793A\u4E0E\u7528\u4E8E\u751F\u6210\u91CD\u505A\u8BB0\u5F55\u7684SQL DML\u76F8\u540C(\u4F46\u4E0D\u4E00\u5B9A\u76F8\u540C)\u7684SQL DML (<code>SQL_REDO</code> column).</p></li><li><p>\u5982\u679C\u5BC6\u7801\u662FSQL_REDO\u5217\u4E2D\u8BED\u53E5\u7684\u4E00\u90E8\u5206\uFF0C\u5219\u5BF9\u5BC6\u7801\u8FDB\u884C\u52A0\u5BC6\u3002\u4E0EDDL\u8BED\u53E5\u5BF9\u5E94\u7684SQL_REDO\u5217\u503C\u603B\u662F\u4E0E\u7528\u4E8E\u751F\u6210redo\u8BB0\u5F55\u7684SQL DDL\u76F8\u540C\u3002</p></li><li><p>\u5982\u679C\u66F4\u6539\u662F\u7531\u4E8ESQL DML\u66F4\u6539\u9020\u6210\u7684\uFF0C\u5219\u91CD\u6784\u7684SQL\u8BED\u53E5\u663E\u793A\u64A4\u6D88\u66F4\u6539\u6240\u9700\u7684SQL DML\u8BED\u53E5 (<code>SQL_UNDO</code> column).</p><p>\u4E0EDDL\u8BED\u53E5\u5BF9\u5E94\u7684SQL_UNDO\u5217\u59CB\u7EC8\u4E3A\u7A7A\u3002\u5BF9\u4E8E\u67D0\u4E9B\u6570\u636E\u7C7B\u578B\u548C\u56DE\u6EDA\u64CD\u4F5C\uFF0CSQL_UNDO\u5217\u53EF\u80FD\u4E5F\u662FNULL\u3002</p></li></ul><p>Note:</p><p>LogMiner\u652F\u6301\u900F\u660E\u6570\u636E\u52A0\u5BC6(TDE)\uFF0C<code>V$LOGMNR_CONTENTS</code>\u663E\u793A\u5BF9\u5177\u6709\u52A0\u5BC6\u5217\u7684\u8868\u6267\u884C\u7684DML\u64CD\u4F5C(\u5305\u62EC\u6B63\u5728\u66F4\u65B0\u7684\u52A0\u5BC6\u5217)\uFF0C\u524D\u63D0\u662FLogMiner\u6570\u636E\u5B57\u5178\u5305\u542B\u6709\u5173\u5BF9\u8C61\u7684\u5143\u6570\u636E\uFF0C\u5E76\u4E14Oracle wallet\u4E2D\u6709\u9002\u5F53\u7684\u4E3B\u5BC6\u94A5\u3002\u5FC5\u987B\u6253\u5F00wallet\uFF0C\u5426\u5219<code>V$LOGMNR_CONTENTS</code>\u65E0\u6CD5\u89E3\u91CA\u76F8\u5173\u7684\u91CD\u505A\u8BB0\u5F55\u3002\u5982\u679C\u6570\u636E\u5E93\u672A\u6253\u5F00(\u53EA\u8BFB\u6216\u8BFB\u5199)\uFF0C\u5219\u4E0D\u652F\u6301TDE\u3002</p>',6),cs=s("See "),rs={href:"https://docs.oracle.com/database/121/ASOAG/asopart1.htm#ASOAG600",target:"_blank",rel:"noopener noreferrer"},ds=s("Oracle Database Advanced Security Guide"),us=s(" for more information about TDE."),vs=t(`<p>Example of Querying <code>V$LOGMNR_CONTENTS</code></p><p>\u5047\u8BBE\u4F60\u60F3\u8981\u67E5\u627E\u6709\u4E00\u4E2A\u53EBRon\u7684\u7528\u6237\u5BF9<code>oe.orders</code>\u6240\u505A\u7684\u5220\u9664\u64CD\u4F5C\uFF0C\u4F60\u53EF\u4EE5\u6267\u884C\u4E00\u4E2A\u7C7B\u4F3C\u4E8E\u4E0B\u9762\u7684SQL\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> OPERATION<span class="token punctuation">,</span> SQL_REDO<span class="token punctuation">,</span> SQL_UNDO
   <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS
   <span class="token keyword">WHERE</span> SEG_OWNER <span class="token operator">=</span> <span class="token string">&#39;OE&#39;</span> <span class="token operator">AND</span> SEG_NAME <span class="token operator">=</span> <span class="token string">&#39;ORDERS&#39;</span> <span class="token operator">AND</span>
   OPERATION <span class="token operator">=</span> <span class="token string">&#39;DELETE&#39;</span> <span class="token operator">AND</span> USERNAME <span class="token operator">=</span> <span class="token string">&#39;RON&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\u662F\u6267\u884CSQL\u67E5\u8BE2\u51FA\u6765\u7684\u7ED3\u679C\uFF1A</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>OPERATION   SQL_REDO                        SQL_UNDO

<span class="token keyword">DELETE</span>      <span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;ORDERS&quot;</span>       <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;ORDERS&quot;</span>        
            <span class="token keyword">where</span> <span class="token string">&quot;ORDER_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;2413&#39;</span>       <span class="token punctuation">(</span><span class="token string">&quot;ORDER_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ORDER_MODE&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;ORDER_MODE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;direct&#39;</span>      <span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ORDER_STATUS&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;CUSTOMER_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;101&#39;</span>        <span class="token string">&quot;ORDER_TOTAL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;SALES_REP_ID&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;ORDER_STATUS&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;5&#39;</span>         <span class="token string">&quot;PROMOTION_ID&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">and</span> <span class="token string">&quot;ORDER_TOTAL&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;48552&#39;</span>      <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;2413&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;direct&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;101&#39;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;SALES_REP_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;161&#39;</span>       <span class="token string">&#39;5&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;48552&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;161&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
            <span class="token operator">and</span> <span class="token string">&quot;PROMOTION_ID&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span>  
            <span class="token operator">and</span> ROWID <span class="token operator">=</span> <span class="token string">&#39;AAAHTCAABAAAZAPAAN&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">DELETE</span>      <span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;ORDERS&quot;</span>        <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;ORDERS&quot;</span>
            <span class="token keyword">where</span> <span class="token string">&quot;ORDER_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;2430&#39;</span>        <span class="token punctuation">(</span><span class="token string">&quot;ORDER_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ORDER_MODE&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;ORDER_MODE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;direct&#39;</span>       <span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ORDER_STATUS&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;CUSTOMER_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;101&#39;</span>         <span class="token string">&quot;ORDER_TOTAL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;SALES_REP_ID&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;ORDER_STATUS&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;8&#39;</span>          <span class="token string">&quot;PROMOTION_ID&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">and</span> <span class="token string">&quot;ORDER_TOTAL&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;29669.9&#39;</span>     <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;2430&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;direct&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;101&#39;</span><span class="token punctuation">,</span>
            <span class="token operator">and</span> <span class="token string">&quot;SALES_REP_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;159&#39;</span>        <span class="token string">&#39;8&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;29669.9&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;159&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">and</span> <span class="token string">&quot;PROMOTION_ID&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> 
            <span class="token operator">and</span> ROWID <span class="token operator">=</span> <span class="token string">&#39;AAAHTCAABAAAZAPAAe&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u663E\u793ARon\u4ECE<code>oe.orders</code>\u8868\u5220\u9664\u4E86\u4E24\u6761\u6570\u636E. \u4ED6\u91CD\u6784\u7684SQL\u8BED\u53E5\u4E0ERon\u53D1\u51FA\u7684\u5B9E\u9645\u8BED\u53E5\u662F\u7B49\u4EF7\u7684\uFF0C\u4F46\u4E0D\u4E00\u5B9A\u5B8C\u5168\u76F8\u540C\u3002. \u9020\u6210\u8FD9\u79CD\u5DEE\u5F02\u7684\u539F\u56E0\u662F\u539F\u59CB\u7684WHERE\u5B50\u53E5\u6CA1\u6709\u8BB0\u5F55\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u6240\u4EE5LogMiner\u53EA\u80FD\u5355\u72EC\u663E\u793A\u5DF2\u5220\u9664(\u6216\u66F4\u65B0\u6216\u63D2\u5165)\u7684\u884C\u3002</p><p>T\u56E0\u6B64\uFF0C\u5373\u4F7F\u4E00\u6761DELETE\u8BED\u53E5\u53EF\u80FD\u8D1F\u8D23\u5220\u9664\u8FD9\u4E24\u884C\uFF0C<code>V$LOGMNR_CONTENTS</code>\u4E2D\u7684\u8F93\u51FA\u4E5F\u4E0D\u80FD\u53CD\u6620\u8FD9\u4E00\u4E8B\u5B9E\u3002 \u5B9E\u9645\u6267\u884C\u7684<code>DELETE</code>\u53EF\u80FD\u662F <code>DELETE FROM OE.ORDERS WHERE CUSTOMER_ID =&#39;101</code>&#39; \u6216\u8005\u662F<code>DELETE FROM OE.ORDERS WHERE PROMOTION_ID = NULL.</code></p><h3 id="how-the-v-logmnr-contents-view-is-populated" tabindex="-1"><a class="header-anchor" href="#how-the-v-logmnr-contents-view-is-populated" aria-hidden="true">#</a> How the V$LOGMNR_CONTENTS View Is Populated</h3><p><code>V$LOGMNR_CONTENTS</code>\u4E0E\u5176\u4ED6\u89C6\u56FE\u4E0D\u540C\uFF0C\u4E0D\u662F\u53CD\u5E94\u8868\u4E2D\u6570\u636E\u5173\u7CFB\uFF0C\u800C\u662F\u53CD\u5E94Redo\u65E5\u5FD7\u7684\u5173\u7CFB\u8868\u793A\u3002</p><p>LogMiner\u4EC5\u5728\u54CD\u5E94\u9488\u5BF9\u5B83\u7684\u67E5\u8BE2\u65F6\u586B\u5145\u89C6\u56FE\u3002\u5728\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u4E4B\u524D\uFF0C\u5FC5\u987B\u6210\u529F\u542F\u52A8LogMiner\u3002</p><p>\u5F53\u5BF9<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u6267\u884Cselect\u64CD\u4F5C\u65F6\uFF0C\u5C06\u6309\u987A\u5E8F\u8BFB\u53D6\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002\u6765\u81EA\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u7FFB\u8BD1\u4FE1\u606F\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u4E2D\u4EE5\u884C\u5F62\u5F0F\u8FD4\u56DE\u3002\u8FD9\u5C06\u4E00\u76F4\u6301\u7EED\u5230\u6EE1\u8DB3\u5728\u542F\u52A8\u65F6\u6307\u5B9A\u7684\u7B5B\u9009\u6761\u4EF6\u6216\u5230\u8FBE\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u7ED3\u5C3E\u3002</p><p>\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C<code>V$LOGMNR_CONTENTS</code>\u4E2D\u7684\u67D0\u4E9B\u5217\u53EF\u80FD\u4E0D\u4F1A\u88AB\u586B\u5145\u3002\u4F8B\u5982\uFF1A</p><ul><li>\u5BF9\u4E8EOPERATION\u5217\u7684\u503C\u4E3ADDL\u7684\u884C\uFF0C\u4E0D\u4F1A\u586B\u5145TABLE_SPACE\u5217\u3002\u8FD9\u662F\u56E0\u4E3ADDL\u53EF\u4EE5\u5728\u591A\u4E2A\u8868\u7A7A\u95F4\u4E0A\u64CD\u4F5C\u3002\u4F8B\u5982\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8DE8\u8D8A\u591A\u4E2A\u8868\u7A7A\u95F4\u7684\u591A\u4E2A\u5206\u533A\u521B\u5EFA\u4E00\u4E2A\u8868;\u56E0\u6B64\uFF0C\u586B\u5145\u5217\u5E76\u4E0D\u51C6\u786E\u3002</li><li>LogMiner\u4E0D\u4E3A\u4E34\u65F6\u8868\u751F\u6210SQL redo\u6216SQL undo, SQL_REDO\u5217\u4F1A\u5305\u542B&quot;/* No SQL_REDO for temporary tables <em>/&quot;\u5B57\u7B26\u4E32\uFF0CSQL_UNDO \u5217\u4F1A\u5305\u542B&quot;/</em> No SQL_UNDO for temporary tables */&quot;\u5B57\u7B26\u4E32.</li></ul><p>LogMiner\u4EE5SCN\u987A\u5E8F\u8FD4\u56DE\u6240\u6709\u884C\uFF0C\u9664\u975E\u60A8\u4F7F\u7528COMMITTED_DATA_ONLY\u9009\u9879\u6307\u5B9A\u53EA\u68C0\u7D22\u63D0\u4EA4\u7684\u4E8B\u52A1\u3002SCN\u987A\u5E8F\u662F\u5A92\u4F53\u6062\u590D\u4E2D\u5E38\u7528\u7684\u987A\u5E8F\u3002</p><p>See Also:</p>`,15),ms={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-6A2398F7-D484-495A-8AD2-0A6B34C03536",title:"When using the COMMITTED_DATA_ONLY option to DBMS_LOGMNR.START_LOGMNR, only rows belonging to committed transactions are shown in the V$LOGMNR_CONTENTS view.",target:"_blank",rel:"noopener noreferrer"},ks=s("Showing Only Committed Transactions"),bs=s(" for more information about the "),gs=n("code",null,"COMMITTED_DATA_ONLY",-1),hs=s(" option to "),Es=n("code",null,"DBMS_LOGMNR.START_LOGMNR",-1),_s=t(`<p>Note:</p><p>\u56E0\u4E3ALogMiner\u53EA\u5728\u54CD\u5E94\u67E5\u8BE2\u65F6\u586B\u5145V$LOGMNR_CONTENTS\u89C6\u56FE\uFF0C\u800C\u4E0D\u5C06\u8BF7\u6C42\u7684\u6570\u636E\u5B58\u50A8\u5728\u6570\u636E\u5E93\u4E2D\uFF0C\u6240\u4EE5\u4EE5\u4E0B\u662F\u6B63\u786E\u7684:</p><ul><li><p>\u6BCF\u6B21\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u65F6\uFF0CLogMiner\u90FD\u4F1A\u5206\u6790\u60A8\u8BF7\u6C42\u7684\u6570\u636E\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002</p></li><li><p>\u67E5\u8BE2\u6D88\u8017\u7684\u5185\u5B58\u91CF\u4E0D\u4F9D\u8D56\u4E8E\u5FC5\u987B\u8FD4\u56DE\u6EE1\u8DB3\u67E5\u8BE2\u7684\u884C\u6570\u3002</p></li><li><p>\u8FD4\u56DE\u8BF7\u6C42\u7684\u6570\u636E\u6240\u9700\u7684\u65F6\u95F4\u53D6\u51B3\u4E8E\u4E3A\u627E\u5230\u8BE5\u6570\u636E\u800C\u5FC5\u987B\u6316\u6398\u7684\u91CD\u505A\u65E5\u5FD7\u6570\u636E\u7684\u6570\u91CF\u548C\u7C7B\u578B\u3002</p></li></ul><p>\u57FA\u4E8E\u4E0A\u9762\u7684\u6CE8\u610F\u4E8B\u9879\uFF0C\u5982\u679C\u4F60\u9700\u8981\u4FDD\u6301\u67E5\u8BE2\u7ED3\u679C\u4EE5\u4FBF\u65E5\u540E\u5206\u6790\uFF0COracle\u5EFA\u8BAE\u5728\u5B9E\u4F53\u8868\u4FDD\u5B58\u4ECE<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u4E2D\u67E5\u8BE2\u5230\u7684\u7ED3\u679C\uFF0C\u7279\u522B\u662F\u5F53\u67E5\u8BE2\u8FD4\u56DE\u7684\u6570\u636E\u91CF\u4E0ELogMiner\u5FC5\u987B\u5206\u6790\u624D\u80FD\u63D0\u4F9B\u6570\u636E\u7684\u91CD\u505A\u6570\u636E\u91CF\u76F8\u6BD4\u5F88\u5C0F\u65F6\u3002</p><h3 id="querying-v-logmnr-contents-based-on-column-values" tabindex="-1"><a class="header-anchor" href="#querying-v-logmnr-contents-based-on-column-values" aria-hidden="true">#</a> Querying V$LOGMNR_CONTENTS Based on Column Values</h3><p>LogMiner\u5141\u8BB8\u60A8\u57FA\u4E8E\u5217\u503C\u8FDB\u884C\u67E5\u8BE2\u3002</p><p>\u4F8B\u5982\u4F60\u53EF\u4EE5\u67E5\u8BE2\u6240\u6709\u5BF9hr.employees\u505A\u7684salary\u589E\u957F\u8D85\u8FC7\u4E00\u5B9A\u503C\u7684update\u64CD\u4F5C\uFF0C\u8FD9\u6837\u7684\u6570\u636E\u53EF\u4EE5\u7528\u6765\u5206\u6790\u7CFB\u7EDF\u884C\u4E3A\u548C\u6267\u884C\u5BA1\u8BA1\u4EFB\u52A1\u3002</p><p>\u4F7F\u7528\u4E24\u4E2A\u6316\u6398\u51FD\u6570\u4ECE\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u63D0\u53D6\u6570\u636E:DBMS_LOGMNR\u3002MINE_VALUE DBMS_LOGMNR.COLUMN_PRESENT\u3002V$LOGMNR_CONTENTS\u89C6\u56FE\u4E2D\u7684REDO_VALUE\u548CUNDO_VALUE\u5217\u63D0\u4F9B\u4E86\u5BF9\u8FD9\u4E9Bmine\u51FD\u6570\u7684\u652F\u6301\u3002</p><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u793A\u4F8B\uFF0C\u6F14\u793A\u5982\u4F55\u4F7F\u7528MINE_VALUE\u51FD\u6570\u6765\u9009\u62E9hr\u7684\u6240\u6709\u66F4\u65B0\u3002\u5C06\u5DE5\u8D44\u680F\u589E\u52A0\u5230\u539F\u6765\u7684\u4E24\u500D\u4EE5\u4E0A\u7684\u5458\u5DE5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> SQL_REDO <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS
   <span class="token keyword">WHERE</span>
   SEG_NAME <span class="token operator">=</span> <span class="token string">&#39;EMPLOYEES&#39;</span> <span class="token operator">AND</span>
   SEG_OWNER <span class="token operator">=</span> <span class="token string">&#39;HR&#39;</span> <span class="token operator">AND</span>
   OPERATION <span class="token operator">=</span> <span class="token string">&#39;UPDATE&#39;</span> <span class="token operator">AND</span>
   DBMS_LOGMNR<span class="token punctuation">.</span>MINE_VALUE<span class="token punctuation">(</span>REDO_VALUE<span class="token punctuation">,</span> <span class="token string">&#39;HR.EMPLOYEES.SALARY&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span>
   <span class="token number">2</span><span class="token operator">*</span>DBMS_LOGMNR<span class="token punctuation">.</span>MINE_VALUE<span class="token punctuation">(</span>UNDO_VALUE<span class="token punctuation">,</span> <span class="token string">&#39;HR.EMPLOYEES.SALARY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0B\u4F8B\u6240\u793A\uFF0CMINE_VALUE\u51FD\u6570\u6709\u4E24\u4E2A\u53C2\u6570:</p><ul><li><p>\u7B2C\u4E00\u4E2A\u53C2\u6570\u6307\u5B9A\u662F\u6316\u6398\u6570\u636E\u7684redo (REDO_VALUE)\u90E8\u5206\u8FD8\u662Fundo (UNDO_VALUE)\u90E8\u5206\u3002\u6570\u636E\u7684\u91CD\u505A\u90E8\u5206\u662F\u63D2\u5165\u3001\u66F4\u65B0\u6216\u5220\u9664\u64CD\u4F5C\u540E\u5217\u4E2D\u7684\u6570\u636E;\u6570\u636E\u7684\u64A4\u6D88\u90E8\u5206\u662F\u63D2\u5165\u3001\u66F4\u65B0\u6216\u5220\u9664\u64CD\u4F5C\u4E4B\u524D\u5217\u4E2D\u7684\u6570\u636E\u3002\u5C06REDO_VALUE\u89C6\u4E3A\u65B0\u503C\uFF0C\u5C06UNDO_VALUE\u89C6\u4E3A\u65E7\u503C\u53EF\u80FD\u4F1A\u6709\u6240\u5E2E\u52A9\u3002</p></li><li><p>\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u5B83\u6307\u5B9A\u8981\u6316\u6398\u7684\u5217\u7684\u5B8C\u5168\u9650\u5B9A\u540D(\u5728\u672C\u4F8B\u4E2D\u662Fhr.employee .salary)\u3002MINE_VALUE\u51FD\u6570\u603B\u662F\u8FD4\u56DE\u4E00\u4E2A\u53EF\u4EE5\u8F6C\u6362\u56DE\u539F\u59CB\u6570\u636E\u7C7B\u578B\u7684\u5B57\u7B26\u4E32\u3002</p></li></ul><h4 id="the-meaning-of-null-values-returned-by-the-mine-value-function" tabindex="-1"><a class="header-anchor" href="#the-meaning-of-null-values-returned-by-the-mine-value-function" aria-hidden="true">#</a> The Meaning of NULL Values Returned by the MINE_VALUE Function</h4><p>\u63CF\u8FF0MINE_VALUE\u51FD\u6570\u8FD4\u56DE\u7684\u7A7A\u503C\u7684\u542B\u4E49\u3002</p><p>\u5982\u679CMINE_VALUE\u51FD\u6570\u8FD4\u56DE\u4E00\u4E2A\u7A7A\u503C\uFF0C\u90A3\u4E48\u5B83\u53EF\u4EE5\u8868\u793A:</p><ul><li><p>\u6307\u5B9A\u7684\u5217\u5728\u6570\u636E\u7684\u91CD\u505A\u6216\u64A4\u6D88\u90E8\u5206\u4E2D\u4E0D\u5B58\u5728\u3002</p></li><li><p>\u6307\u5B9A\u7684\u5217\u662F\u5B58\u5728\u7684\uFF0C\u5E76\u4E14\u6709\u4E00\u4E2A\u7A7A\u503C\u3002</p></li></ul><p>\u8981\u533A\u5206\u8FD9\u4E24\u79CD\u60C5\u51B5\uFF0C\u53EF\u4EE5\u4F7F\u7528DBMS_LOGMNR.COLUMN_PRESENT\u51FD\u6570\uFF0C\u5982\u679C\u8BE5\u5217\u51FA\u73B0\u5728\u6570\u636E\u7684\u91CD\u505A\u6216\u64A4\u6D88\u90E8\u5206\uFF0C\u5219\u8BE5\u51FD\u6570\u8FD4\u56DE1\u3002\u5426\u5219\uFF0C\u5B83\u8FD4\u56DE0\u3002\u4F8B\u5982\uFF0C\u5047\u8BBE\u60A8\u5E0C\u671B\u627E\u51FA\u4FEE\u6539salary\u5217\u4E2D\u7684\u503C\u7684\u589E\u91CF\u548C\u76F8\u5E94\u7684\u4E8B\u52A1\u6807\u8BC6\u7B26\u3002\u4F60\u53EF\u4EE5\u53D1\u51FA\u4EE5\u4E0BSQL\u67E5\u8BE2:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
  <span class="token punctuation">(</span>XIDUSN <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">||</span> XIDSLT <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">||</span> XIDSQN<span class="token punctuation">)</span> <span class="token keyword">AS</span> XID<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>DBMS_LOGMNR<span class="token punctuation">.</span>MINE_VALUE<span class="token punctuation">(</span>REDO_VALUE<span class="token punctuation">,</span> <span class="token string">&#39;HR.EMPLOYEES.SALARY&#39;</span><span class="token punctuation">)</span> <span class="token operator">-</span>
   DBMS_LOGMNR<span class="token punctuation">.</span>MINE_VALUE<span class="token punctuation">(</span>UNDO_VALUE<span class="token punctuation">,</span> <span class="token string">&#39;HR.EMPLOYEES.SALARY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> INCR_SAL
   <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS
   <span class="token keyword">WHERE</span>
   OPERATION <span class="token operator">=</span> <span class="token string">&#39;UPDATE&#39;</span> <span class="token operator">AND</span>
   DBMS_LOGMNR<span class="token punctuation">.</span>COLUMN_PRESENT<span class="token punctuation">(</span>REDO_VALUE<span class="token punctuation">,</span> <span class="token string">&#39;HR.EMPLOYEES.SALARY&#39;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span>
   DBMS_LOGMNR<span class="token punctuation">.</span>COLUMN_PRESENT<span class="token punctuation">(</span>UNDO_VALUE<span class="token punctuation">,</span> <span class="token string">&#39;HR.EMPLOYEES.SALARY&#39;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="usage-rules-for-the-mine-value-and-column-present-functions" tabindex="-1"><a class="header-anchor" href="#usage-rules-for-the-mine-value-and-column-present-functions" aria-hidden="true">#</a> Usage Rules for the MINE_VALUE and COLUMN_PRESENT Functions</h4><p>\u63CF\u8FF0\u5E94\u7528\u4E8EMINE_VALUE\u548CCOLUMN_PRESENT\u51FD\u6570\u7684\u4F7F\u7528\u89C4\u5219\u3002</p><p>\u5177\u4F53\u6765\u8BF4:</p><ul><li>\u5B83\u4EEC\u53EA\u80FD\u5728LogMiner\u4F1A\u8BDD\u4E2D\u4F7F\u7528\u3002</li><li>\u5B83\u4EEC\u5FC5\u987B\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684select\u64CD\u4F5C\u4E0A\u4E0B\u6587\u4E2D\u542F\u52A8\u3002</li><li>\u5B83\u4EEC\u4E0D\u652F\u6301LONG\u3001LONG RAW\u3001CLOB\u3001BLOB\u3001NCLOB\u3001ADT\u6216\u96C6\u5408\u6570\u636E\u7C7B\u578B\u3002</li></ul><h4 id="restrictions-when-using-the-mine-value-function-to-get-an-nchar-value" tabindex="-1"><a class="header-anchor" href="#restrictions-when-using-the-mine-value-function-to-get-an-nchar-value" aria-hidden="true">#</a> Restrictions When Using the MINE_VALUE Function To Get an NCHAR Value</h4><p>\u63CF\u8FF0\u4F7F\u7528MINE_VALUE\u51FD\u6570\u65F6\u7684\u9650\u5236\u3002</p><p>\u5982\u679CDBMS_LOGMNR.MINE_VALUE\u51FD\u6570\u7528\u4E8E\u83B7\u53D6\u4E00\u4E2ANCHAR\u503C\uFF0C\u8BE5\u503C\u5305\u542B\u5728\u6570\u636E\u5E93\u5B57\u7B26\u96C6\u4E2D\u6CA1\u6709\u627E\u5230\u7684\u5B57\u7B26\uFF0C\u7136\u540E\u8FD9\u4E9B\u5B57\u7B26\u4F5C\u4E3A\u6570\u636E\u5E93\u5B57\u7B26\u96C6\u7684\u66FF\u6362\u5B57\u7B26(\u4F8B\u5982\uFF0C\u53CD\u95EE\u53F7)\u8FD4\u56DE\u3002</p><h3 id="querying-v-logmnr-contents-based-on-xmltype-columns-and-tables" tabindex="-1"><a class="header-anchor" href="#querying-v-logmnr-contents-based-on-xmltype-columns-and-tables" aria-hidden="true">#</a> Querying V$LOGMNR_CONTENTS Based on XMLType Columns and Tables</h3><p>(XMLType\u4E5F\u4E0D\u5E38\u7528 \u5C31\u4E0D\u4E00\u4E00\u7FFB\u8BD1) LogMiner\u652F\u6301\u4E3AXMLType\u5217\u751F\u6210\u91CD\u505A\u3002\u5728\u517C\u5BB9\u6027\u8BBE\u7F6E\u4E3A11.0.0.0\u6216\u66F4\u9AD8\u7684\u60C5\u51B5\u4E0B\u751F\u6210\u91CD\u505A\u65F6\uFF0C\u652F\u6301\u5C06XMLType\u6570\u636E\u5B58\u50A8\u4E3ACLOB\u3002</p><p>\u4F5C\u4E3A\u5BF9\u8C61\u5173\u7CFB\u548C\u4E8C\u8FDB\u5236XML\u5B58\u50A8\u7684XMLType\u6570\u636E\u652F\u6301\u572811.2.0.3\u6216\u66F4\u9AD8\u7684\u517C\u5BB9\u6027\u8BBE\u7F6E\u4E0B\u91CD\u65B0\u751F\u6210\u3002</p><p>LogMiner\u6839\u636EXMLType\u5B58\u50A8\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u5728<code>V$LOGMNR_CONTENTS</code>\u4E2D\u663E\u793ASQL_REDO\u3002\u5728\u6240\u6709\u60C5\u51B5\u4E0B\uFF0CSQL_REDO\u5217\u7684\u5185\u5BB9\u548CSTATUS\u5217\u90FD\u9700\u8981\u4ED4\u7EC6\u68C0\u67E5\uFF0C\u5E76\u4E14\u901A\u5E38\u9700\u8981\u91CD\u65B0\u7EC4\u88C5\u624D\u80FD\u751F\u6210SQL\u6216PL/SQL\u8BED\u53E5\u6765\u91CD\u65B0\u6267\u884C\u66F4\u6539\u3002\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u65E0\u6CD5\u4F7F\u7528SQL_REDO\u6570\u636E\u6765\u6784\u9020\u8FD9\u6837\u7684\u66F4\u6539\u3002\u4EE5\u4E0B\u5C0F\u8282\u4E2D\u7684\u793A\u4F8B\u57FA\u4E8E\u5B58\u50A8\u4E3ACLOB\u7684XMLType\uFF0C\u8FD9\u901A\u5E38\u662F\u7528\u4E8E\u91CD\u5EFA\u5B8C\u6574\u884C\u66F4\u6539\u7684\u6700\u7B80\u5355\u65B9\u6CD5\u3002</p><p>Note:\u5B58\u50A8\u4E3ACLOB\u7684XMLType\u6570\u636E\u5728Oracle\u6570\u636E\u5E9312c\u7248\u672C1(12.1)\u4E2D\u88AB\u5F03\u7528\u3002</p><p>Querying <code>V$LOGMNR_CONTENTS</code> For Changes to Tables With XMLType Columns</p><p>The example in this section is for a table named <code>XML_CLOB_COL_TAB</code> that has the following columns:</p><ul><li><p>f1 <code>NUMBER</code></p></li><li><p>f2 <code>VARCHAR2(100)</code></p></li><li><p>f3 <code>XMLTYPE</code></p></li><li><p>f4 <code>XMLTYPE</code></p></li><li><p>f5 <code>VARCHAR2(10)</code></p></li></ul><p>Assume that a LogMiner session has been started with the logs and with the <code>COMMITED_DATA_ONLY</code> option. The following query is executed against <code>V$LOGMNR_CONTENTS</code> for changes to the <code>XML_CLOB_COL_TAB</code> table.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> OPERATION<span class="token punctuation">,</span> <span class="token keyword">STATUS</span><span class="token punctuation">,</span> SQL_REDO <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS 
  <span class="token keyword">WHERE</span> SEG_OWNER <span class="token operator">=</span> <span class="token string">&#39;SCOTT&#39;</span> <span class="token operator">AND</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">&#39;XML_CLOB_COL_TAB&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The query output looks similar to the following:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>OPERATION         <span class="token keyword">STATUS</span>  SQL_REDO

<span class="token keyword">INSERT</span>            <span class="token number">0</span>       <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SCOTT&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;XML_CLOB_COL_TAB&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;F1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;F2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;F5&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span>
                             <span class="token punctuation">(</span><span class="token string">&#39;5010&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Aho40431&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;PETER&#39;</span><span class="token punctuation">)</span>

XML DOC <span class="token keyword">BEGIN</span>     <span class="token number">5</span>       <span class="token keyword">update</span> <span class="token string">&quot;SCOTT&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;XML_CLOB_COL_TAB&quot;</span> a <span class="token keyword">set</span> a<span class="token punctuation">.</span><span class="token string">&quot;F3&quot;</span> <span class="token operator">=</span> XMLType<span class="token punctuation">(</span>:<span class="token number">1</span><span class="token punctuation">)</span>
                             <span class="token keyword">where</span> a<span class="token punctuation">.</span><span class="token string">&quot;F1&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;5010&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F2&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;Aho40431&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F5&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;PETER&#39;</span>

XML DOC <span class="token keyword">WRITE</span>     <span class="token number">5</span>       XML <span class="token keyword">Data</span>

XML DOC <span class="token keyword">WRITE</span>     <span class="token number">5</span>       XML <span class="token keyword">Data</span>

XML DOC <span class="token keyword">WRITE</span>     <span class="token number">5</span>       XML <span class="token keyword">Data</span>

XML DOC <span class="token keyword">END</span>       <span class="token number">5</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the <code>SQL_REDO</code> columns for the <code>XML DOC WRITE</code> operations there will be actual data for the XML document. It will not be the string &#39;XML Data&#39;.</p><p>This output shows that the general model for an insert into a table with an <code>XMLType</code> column is the following:</p><ol><li><p>An initial insert with all of the scalar columns.</p></li><li><p>An <code>XML DOC BEGIN </code>operation with an update statement that sets the value for one <code>XMLType</code> column using a bind variable.</p></li><li><p>One or more <code>XML DOC WRITE</code> operations with the data for the XML document.</p></li><li><p>An <code>XML DOC END</code> operation to indicate that all of the data for that XML document has been seen.</p></li><li><p>If there is more than one <code>XMLType</code> column in the table, then steps 2 through 4 will be repeated for each <code>XMLType</code> column that is modified by the original DML.</p></li></ol><p>If the XML document is not stored as an out-of-line column, then there will be no <code>XML DOC BEGIN</code>, <code>XML DOC WRITE</code>, or <code>XML DOC END</code> operations for that column. The document will be included in an update statement similar to the following:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>OPERATION   <span class="token keyword">STATUS</span>         SQL_REDO

<span class="token keyword">UPDATE</span>      <span class="token number">0</span>              <span class="token keyword">update</span> <span class="token string">&quot;SCOTT&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;XML_CLOB_COL_TAB&quot;</span> a
                           <span class="token keyword">set</span> a<span class="token punctuation">.</span><span class="token string">&quot;F3&quot;</span> <span class="token operator">=</span> XMLType<span class="token punctuation">(</span><span class="token string">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;
                           &lt;PO pono=&quot;1&quot;&gt;
                           &lt;PNAME&gt;Po_99&lt;/PNAME&gt; 
                           &lt;CUSTNAME&gt;Dave Davids&lt;/CUSTNAME&gt; 
                           &lt;/PO&gt;&#39;</span><span class="token punctuation">)</span> 
                           <span class="token keyword">where</span> a<span class="token punctuation">.</span><span class="token string">&quot;F1&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;5006&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F2&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;Janosik&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F5&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;MMM&#39;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Querying V$LOGMNR_CONTENTS For Changes to XMLType Tables</p><p>DMLs to <code>XMLType</code> tables are slightly different from DMLs to <code>XMLType</code> columns. The XML document represents the value for the row in the <code>XMLType</code> table. Unlike the <code>XMLType</code> column case, an initial insert cannot be done which is then followed by an update containing the XML document. Rather, the whole document must be assembled before anything can be inserted into the table.</p><p>Another difference for <code>XMLType</code> tables is the presence of the <code>OBJECT_ID</code> column. An object identifier is used to uniquely identify every object in an object table. For <code>XMLType</code> tables, this value is generated by Oracle Database when the row is inserted into the table. The <code>OBJECT_ID</code> value cannot be directly inserted into the table using SQL. Therefore, LogMiner cannot generate <code>SQL_REDO</code> which is executable that includes this value.</p><p>The <code>V$LOGMNR_CONTENTS</code> view has a new <code>OBJECT_ID</code> column which is populated for changes to <code>XMLType</code> tables. This value is the object identifier from the original table. However, even if this same XML document is inserted into the same <code>XMLType</code> table, a new object identifier will be generated. The <code>SQL_REDO</code> for subsequent DMLs, such as updates and deletes, on the <code>XMLType</code> table will include the object identifier in the <code>WHERE</code> clause to uniquely identify the row from the original table.</p><h4 id="restrictions-when-using-logminer-with-xmltype-data" tabindex="-1"><a class="header-anchor" href="#restrictions-when-using-logminer-with-xmltype-data" aria-hidden="true">#</a> Restrictions When Using LogMiner With XMLType Data</h4><p>Describes restrictions when using LogMiner with XMLType data.</p><p>Mining <code>XMLType</code> data should only be done when using the <code>DBMS_LOGMNR.COMMITTED_DATA_ONLY</code> option. Otherwise, incomplete changes could be displayed or changes which should be displayed as XML might be displayed as <code>CLOB</code> changes due to missing parts of the row change. This can lead to incomplete and invalid <code>SQL_REDO</code> for these SQL DML statements.</p><p>The <code>SQL_UNDO</code> column is not populated for changes to <code>XMLType</code> data.</p><h4 id="example-of-a-pl-sql-procedure-for-assembling-xmltype-data" tabindex="-1"><a class="header-anchor" href="#example-of-a-pl-sql-procedure-for-assembling-xmltype-data" aria-hidden="true">#</a> Example of a PL/SQL Procedure for Assembling XMLType Data</h4><p>Example showing a procedure that can be used to mine and assemble XML redo for tables that contain out of line XML data.</p><p>This shows how to assemble the XML data using a temporary LOB. Once the XML document is assembled, it can be used in a meaningful way. This example queries the assembled document for the <code>EmployeeName</code> element and then stores the returned name, the XML document and the <code>SQL_REDO</code> for the original DML in the <code>EMPLOYEE_XML_DOCS</code> table.</p><p>Note:</p><p>This procedure is an example only and is simplified. It is only intended to illustrate that DMLs to tables with <code>XMLType</code> data can be mined and assembled using LogMiner.</p><p>Before calling this procedure, all of the relevant logs must be added to a LogMiner session and <code>DBMS_LOGMNR.START_LOGMNR()</code> must be called with the <code>COMMITTED_DATA_ONLY</code> option. The <code>MINE_AND_ASSEMBLE()</code> procedure can then be called with the schema and table name of the table that has XML data to be mined.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- table to store assembled XML documents</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> employee_xml_docs  <span class="token punctuation">(</span>
  employee_name         varchar2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  sql_stmt                     varchar2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  xml_doc                     SYS<span class="token punctuation">.</span>XMLType<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- procedure to assemble the XML documents</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">procedure</span> mine_and_assemble<span class="token punctuation">(</span>
  schemaname        <span class="token operator">in</span> varchar2<span class="token punctuation">,</span>
  tablename         <span class="token operator">in</span> varchar2<span class="token punctuation">)</span>
<span class="token keyword">AS</span>
  loc_c      CLOB<span class="token punctuation">;</span> 
  row_op     VARCHAR2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  row_status NUMBER<span class="token punctuation">;</span> 
  stmt       VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  row_redo   VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xml_data   VARCHAR2<span class="token punctuation">(</span><span class="token number">32767</span> <span class="token keyword">CHAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  data_len   NUMBER<span class="token punctuation">;</span> 
  xml_lob    clob<span class="token punctuation">;</span>
  xml_doc    XMLType<span class="token punctuation">;</span>
<span class="token keyword">BEGIN</span> 

<span class="token comment">-- Look for the rows in V$LOGMNR_CONTENTS that are for the appropriate schema </span>
<span class="token comment">-- and table name but limit it to those that are valid sql or that need assembly</span>
<span class="token comment">-- because they are XML documents.</span>

 <span class="token keyword">For</span> item <span class="token operator">in</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> operation<span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">,</span> sql_redo  <span class="token keyword">FROM</span> v$logmnr_contents
 <span class="token keyword">where</span> seg_owner <span class="token operator">=</span> schemaname <span class="token operator">and</span> table_name <span class="token operator">=</span> tablename
 <span class="token operator">and</span> <span class="token keyword">status</span> <span class="token operator">IN</span> <span class="token punctuation">(</span>DBMS_LOGMNR<span class="token punctuation">.</span>VALID_SQL<span class="token punctuation">,</span> DBMS_LOGMNR<span class="token punctuation">.</span>ASSEMBLY_REQUIRED_SQL<span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token keyword">LOOP</span>
    row_op :<span class="token operator">=</span> item<span class="token punctuation">.</span>operation<span class="token punctuation">;</span>
    row_status :<span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token keyword">status</span><span class="token punctuation">;</span>
    row_redo :<span class="token operator">=</span> item<span class="token punctuation">.</span>sql_redo<span class="token punctuation">;</span>

     <span class="token keyword">CASE</span> row_op 

          <span class="token keyword">WHEN</span> <span class="token string">&#39;XML DOC BEGIN&#39;</span> <span class="token keyword">THEN</span> 
             <span class="token keyword">BEGIN</span> 
               <span class="token comment">-- save statement and begin assembling XML data </span>
               stmt :<span class="token operator">=</span> row_redo<span class="token punctuation">;</span> 
               xml_data :<span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> 
               data_len :<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
               DBMS_LOB<span class="token punctuation">.</span>CreateTemporary<span class="token punctuation">(</span>xml_lob<span class="token punctuation">,</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token keyword">END</span><span class="token punctuation">;</span> 

          <span class="token keyword">WHEN</span> <span class="token string">&#39;XML DOC WRITE&#39;</span> <span class="token keyword">THEN</span> 
             <span class="token keyword">BEGIN</span> 
               <span class="token comment">-- Continue to assemble XML data</span>
               xml_data :<span class="token operator">=</span> xml_data <span class="token operator">||</span> row_redo<span class="token punctuation">;</span> 
               data_len :<span class="token operator">=</span> data_len <span class="token operator">+</span> length<span class="token punctuation">(</span>row_redo<span class="token punctuation">)</span><span class="token punctuation">;</span> 
               DBMS_LOB<span class="token punctuation">.</span>WriteAppend<span class="token punctuation">(</span>xml_lob<span class="token punctuation">,</span> length<span class="token punctuation">(</span>row_redo<span class="token punctuation">)</span><span class="token punctuation">,</span> row_redo<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token keyword">END</span><span class="token punctuation">;</span> 

          <span class="token keyword">WHEN</span> <span class="token string">&#39;XML DOC END&#39;</span> <span class="token keyword">THEN</span> 
             <span class="token keyword">BEGIN</span> 
               <span class="token comment">-- Now that assembly is complete, we can use the XML document </span>
              xml_doc :<span class="token operator">=</span> XMLType<span class="token punctuation">.</span>createXML<span class="token punctuation">(</span>xml_lob<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">insert</span> <span class="token keyword">into</span> employee_xml_docs <span class="token keyword">values</span>
                        <span class="token punctuation">(</span>extractvalue<span class="token punctuation">(</span>xml_doc<span class="token punctuation">,</span> <span class="token string">&#39;/EMPLOYEE/NAME&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stmt<span class="token punctuation">,</span> xml_doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">commit</span><span class="token punctuation">;</span>

              <span class="token comment">-- reset</span>
              xml_data :<span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> 
              data_len :<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
              xml_lob :<span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
             <span class="token keyword">END</span><span class="token punctuation">;</span> 

          <span class="token keyword">WHEN</span> <span class="token string">&#39;INSERT&#39;</span> <span class="token keyword">THEN</span> 
             <span class="token keyword">BEGIN</span> 
                stmt :<span class="token operator">=</span> row_redo<span class="token punctuation">;</span>
             <span class="token keyword">END</span><span class="token punctuation">;</span> 

          <span class="token keyword">WHEN</span> <span class="token string">&#39;UPDATE&#39;</span> <span class="token keyword">THEN</span> 
             <span class="token keyword">BEGIN</span> 
                stmt :<span class="token operator">=</span> row_redo<span class="token punctuation">;</span>
             <span class="token keyword">END</span><span class="token punctuation">;</span> 

          <span class="token keyword">WHEN</span> <span class="token string">&#39;INTERNAL&#39;</span> <span class="token keyword">THEN</span> 
             DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Skip rows marked INTERNAL&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

          <span class="token keyword">ELSE</span> 
             <span class="token keyword">BEGIN</span> 
                stmt :<span class="token operator">=</span> row_redo<span class="token punctuation">;</span>
                DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Other - &#39;</span> <span class="token operator">||</span> stmt<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token keyword">IF</span> row_status <span class="token operator">!=</span> DBMS_LOGMNR<span class="token punctuation">.</span>VALID_SQL <span class="token keyword">then</span> 
                   DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Skip rows marked non-executable&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token keyword">ELSE</span> 
                   dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">&#39;Status : &#39;</span> <span class="token operator">||</span> row_status<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span> 
             <span class="token keyword">END</span><span class="token punctuation">;</span> 

     <span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>

 <span class="token keyword">End</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span> 

<span class="token keyword">End</span><span class="token punctuation">;</span>
<span class="token operator">/</span>

<span class="token keyword">show</span> <span class="token keyword">errors</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This procedure can then be called to mine the changes to the <code>SCOTT.XML_DATA_TAB</code> and apply the DMLs.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> MINE_AND_ASSEMBLE <span class="token punctuation">(</span><span class="token string">&#39;SCOTT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;XML_DATA_TAB&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>As a result of this procedure, the <code>EMPLOYEE_XML_DOCS</code> table will have a row for each out-of-line XML column that was changed. The <code>EMPLOYEE_NAME</code> column will have the value extracted from the XML document and the <code>SQL_STMT</code> column and the <code>XML_DOC</code> column reflect the original row change.</p><p>The following is an example query to the resulting table that displays only the employee name and SQL statement:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> EMPLOYEE_NAME<span class="token punctuation">,</span> SQL_STMT <span class="token keyword">FROM</span> EMPLOYEE_XML_DOCS<span class="token punctuation">;</span>

EMPLOYEE_NAME          SQL_STMT                                                                                           

Scott Davis          <span class="token keyword">update</span> <span class="token string">&quot;SCOTT&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;XML_DATA_TAB&quot;</span> a <span class="token keyword">set</span> a<span class="token punctuation">.</span><span class="token string">&quot;F3&quot;</span> <span class="token operator">=</span> XMLType<span class="token punctuation">(</span>:<span class="token number">1</span><span class="token punctuation">)</span> 
                         <span class="token keyword">where</span> a<span class="token punctuation">.</span><span class="token string">&quot;F1&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;5000&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F2&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;Chen&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F5&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;JJJ&#39;</span>

Richard Harry        <span class="token keyword">update</span> <span class="token string">&quot;SCOTT&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;XML_DATA_TAB&quot;</span> a <span class="token keyword">set</span> a<span class="token punctuation">.</span><span class="token string">&quot;F4&quot;</span> <span class="token operator">=</span> XMLType<span class="token punctuation">(</span>:<span class="token number">1</span><span class="token punctuation">)</span>  
                         <span class="token keyword">where</span> a<span class="token punctuation">.</span><span class="token string">&quot;F1&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;5000&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F2&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;Chen&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F5&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;JJJ&#39;</span>

Margaret Sally       <span class="token keyword">update</span> <span class="token string">&quot;SCOTT&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;XML_DATA_TAB&quot;</span> a <span class="token keyword">set</span> a<span class="token punctuation">.</span><span class="token string">&quot;F4&quot;</span> <span class="token operator">=</span> XMLType<span class="token punctuation">(</span>:<span class="token number">1</span><span class="token punctuation">)</span>  
                         <span class="token keyword">where</span> a<span class="token punctuation">.</span><span class="token string">&quot;F1&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;5006&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F2&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;Janosik&#39;</span> <span class="token operator">and</span> a<span class="token punctuation">.</span><span class="token string">&quot;F5&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;MMM&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="filtering-and-formatting-data-returned-to-v-logmnr-contents" tabindex="-1"><a class="header-anchor" href="#filtering-and-formatting-data-returned-to-v-logmnr-contents" aria-hidden="true">#</a> Filtering and Formatting Data Returned to V$LOGMNR_CONTENTS</h2><p>LogMiner\u53EF\u4EE5\u5904\u7406\u5927\u91CF\u7684\u4FE1\u606F\u3002\u60A8\u53EF\u4EE5\u9650\u5236\u8FD4\u56DE\u7ED9<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684\u4FE1\u606F\uFF0C\u4EE5\u53CA\u5B83\u8FD4\u56DE\u7684\u901F\u5EA6\u3002</p><h3 id="showing-only-committed-transactionsshowing-only-committed-transactions" tabindex="-1"><a class="header-anchor" href="#showing-only-committed-transactionsshowing-only-committed-transactions" aria-hidden="true">#</a> Showing Only Committed TransactionsShowing Only Committed Transactions</h3><p>\u5F53\u5C06COMMITTED_DATA_ONLY\u9009\u9879\u7528\u4E8EDBMS_LOGMNR\u65F6\u3002START_LOGMNR\u4E2D\uFF0C\u53EA\u6709\u5C5E\u4E8E\u63D0\u4EA4\u4E8B\u52A1\u7684\u884C\u624D\u663E\u793A\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u4E2D\u3002</p><p>\u8FD9\u4F7F\u60A8\u80FD\u591F\u8FC7\u6EE4\u56DE\u6EDA\u7684\u4E8B\u52A1\u3001\u6B63\u5728\u8FDB\u884C\u7684\u4E8B\u52A1\u548C\u5185\u90E8\u64CD\u4F5C\u3002</p><p>\u8981\u542F\u7528\u6B64\u9009\u9879\uFF0C\u8BF7\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9A\u5B83\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span>OPTIONS <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>COMMITTED_DATA_ONLY<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F53\u60A8\u6307\u5B9ACOMMITTED_DATA_ONLY\u9009\u9879\u65F6\uFF0CLogMiner\u5C06\u5C5E\u4E8E\u540C\u4E00\u4E8B\u52A1\u7684\u6240\u6709DML\u64CD\u4F5C\u5206\u7EC4\u5728\u4E00\u8D77\u3002\u4E8B\u52A1\u6309\u63D0\u4EA4\u7684\u987A\u5E8F\u8FD4\u56DE\u3002</p><p>\u6CE8\u610F:\u5982\u679C\u6307\u5B9A\u4E86COMMITTED_DATA_ONLY\u9009\u9879\uFF0C\u5E76\u4E14\u53D1\u51FA\u4E86\u4E00\u4E2A\u67E5\u8BE2\uFF0C\u90A3\u4E48LogMiner\u5C06\u5728\u5185\u5B58\u4E2D\u7684\u5355\u4E2A\u4E8B\u52A1\u4E2D\u6267\u884C\u6240\u6709\u91CD\u505A\u8BB0\u5F55\uFF0C\u76F4\u5230LogMiner\u627E\u5230\u8BE5\u4E8B\u52A1\u7684\u63D0\u4EA4\u8BB0\u5F55\u3002\u56E0\u6B64\uFF0C\u53EF\u80FD\u4F1A\u8017\u5C3D\u5185\u5B58\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u5C06\u8FD4\u56DE\u201C\u5185\u5B58\u4E0D\u8DB3\u201D\u9519\u8BEF\u3002\u5982\u679C\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\uFF0C\u5219\u5FC5\u987B\u5728\u4E0D\u6307\u5B9ACOMMITTED_DATA_ONLY\u9009\u9879\u7684\u60C5\u51B5\u4E0B\u91CD\u65B0\u542F\u52A8LogMiner\u5E76\u91CD\u65B0\u53D1\u51FA\u67E5\u8BE2\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CLogMiner\u5C06\u663E\u793A\u4E0E\u6240\u6709\u4E8B\u52A1\u5BF9\u5E94\u7684\u884C\uFF0C\u5E76\u6309\u7167\u5B83\u4EEC\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u9047\u5230\u7684\u987A\u5E8F\u8FD4\u56DE\u5B83\u4EEC\u3002</p><p>\u4F8B\u5982\uFF0C\u5047\u8BBE\u60A8\u5728\u6CA1\u6709\u6307\u5B9ACOMMITTED_DATA_ONLY\u9009\u9879\u7684\u60C5\u51B5\u4E0B\u542F\u52A8LogMiner\uFF0C\u7136\u540E\u6267\u884C\u4EE5\u4E0B\u67E5\u8BE2:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">(</span>XIDUSN <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">||</span> XIDSLT <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">||</span> XIDSQN<span class="token punctuation">)</span> <span class="token keyword">AS</span> XID<span class="token punctuation">,</span> 
   USERNAME<span class="token punctuation">,</span> SQL_REDO <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS <span class="token keyword">WHERE</span> USERNAME <span class="token operator">!=</span> <span class="token string">&#39;SYS&#39;</span> 
   <span class="token operator">AND</span> SEG_OWNER <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">OR</span> SEG_OWNER <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">&#39;SYS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SYSTEM&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u5982\u4E0B\u3002\u63D0\u4EA4\u548C\u672A\u63D0\u4EA4\u7684\u4E8B\u52A1\u90FD\u4F1A\u8FD4\u56DE\uFF0C\u4E0D\u540C\u4E8B\u52A1\u7684\u884C\u4F1A\u4EA4\u7EC7\u5728\u4E00\u8D77\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>XID         USERNAME  SQL_REDO

<span class="token number">1.15</span><span class="token number">.3045</span>   RON       <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.15</span><span class="token number">.3045</span>   RON       <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;JOB_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;JOB_TITLE&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;MIN_SALARY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;MAX_SALARY&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9782&#39;</span><span class="token punctuation">,</span>
                      <span class="token string">&#39;HR_ENTRY&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.18</span><span class="token number">.3046</span>   JANE      <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.18</span><span class="token number">.3046</span>   JANE      <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CUSTOMERS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;CUST_FIRST_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_LAST_NAME&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;CUST_ADDRESS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PHONE_NUMBERS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NLS_LANGUAGE&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;NLS_TERRITORY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CREDIT_LIMIT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_EMAIL&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;ACCOUNT_MGR_ID&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9839&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Edgar&#39;</span><span class="token punctuation">,</span>
                      <span class="token string">&#39;Cummings&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span>
                       <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.9</span><span class="token number">.3041</span>    RAJIV      <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.9</span><span class="token number">.3041</span>    RAJIV      <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CUSTOMERS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;CUST_FIRST_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_LAST_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_ADDRESS&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;PHONE_NUMBERS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NLS_LANGUAGE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NLS_TERRITORY&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;CREDIT_LIMIT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_EMAIL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ACCOUNT_MGR_ID&quot;</span><span class="token punctuation">)</span> 
                       <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9499&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Rodney&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Emerson&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span>
                       <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.15</span><span class="token number">.3045</span>    RON       <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token number">1.8</span><span class="token number">.3054</span>     RON       <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.8</span><span class="token number">.3054</span>     RON       <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;JOB_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;JOB_TITLE&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;MIN_SALARY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;MAX_SALARY&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9566&#39;</span><span class="token punctuation">,</span>
                       <span class="token string">&#39;FI_ENTRY&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.18</span><span class="token number">.3046</span>    JANE      <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token number">1.11</span><span class="token number">.3047</span>    JANE      <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.11</span><span class="token number">.3047</span>    JANE      <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CUSTOMERS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;CUST_FIRST_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_LAST_NAME&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;CUST_ADDRESS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PHONE_NUMBERS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NLS_LANGUAGE&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;NLS_TERRITORY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CREDIT_LIMIT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_EMAIL&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;ACCOUNT_MGR_ID&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;8933&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Ronald&#39;</span><span class="token punctuation">,</span>
                       <span class="token string">&#39;Frost&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.11</span><span class="token number">.3047</span>    JANE      <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token number">1.8</span><span class="token number">.3054</span>     RON       <span class="token keyword">commit</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\u5047\u8BBE\u60A8\u542F\u52A8\u4E86LogMiner\uFF0C\u4F46\u662F\u8FD9\u4E00\u6B21\u60A8\u6307\u5B9A\u4E86COMMITTED_DATA_ONLY\u9009\u9879\u3002\u5982\u679C\u518D\u6B21\u6267\u884C\u524D\u9762\u7684\u67E5\u8BE2\uFF0C\u5219\u8F93\u51FA\u5982\u4E0B:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">1.15</span><span class="token number">.3045</span>   RON       <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.15</span><span class="token number">.3045</span>   RON       <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;JOB_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;JOB_TITLE&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;MIN_SALARY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;MAX_SALARY&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9782&#39;</span><span class="token punctuation">,</span>
                      <span class="token string">&#39;HR_ENTRY&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.15</span><span class="token number">.3045</span>    RON       <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token number">1.18</span><span class="token number">.3046</span>   JANE      <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.18</span><span class="token number">.3046</span>   JANE      <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CUSTOMERS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;CUST_FIRST_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_LAST_NAME&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;CUST_ADDRESS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PHONE_NUMBERS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NLS_LANGUAGE&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;NLS_TERRITORY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CREDIT_LIMIT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_EMAIL&quot;</span><span class="token punctuation">,</span>
                      <span class="token string">&quot;ACCOUNT_MGR_ID&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9839&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Edgar&#39;</span><span class="token punctuation">,</span>
                      <span class="token string">&#39;Cummings&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span>
                       <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.18</span><span class="token number">.3046</span>    JANE      <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token number">1.11</span><span class="token number">.3047</span>    JANE      <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.11</span><span class="token number">.3047</span>    JANE      <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;OE&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CUSTOMERS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;CUSTOMER_ID&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;CUST_FIRST_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_LAST_NAME&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;CUST_ADDRESS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PHONE_NUMBERS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NLS_LANGUAGE&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;NLS_TERRITORY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CREDIT_LIMIT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CUST_EMAIL&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;ACCOUNT_MGR_ID&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;8933&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Ronald&#39;</span><span class="token punctuation">,</span>
                       <span class="token string">&#39;Frost&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.11</span><span class="token number">.3047</span>    JANE      <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token number">1.8</span><span class="token number">.3054</span>     RON       <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token number">1.8</span><span class="token number">.3054</span>     RON       <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span><span class="token punctuation">(</span><span class="token string">&quot;JOB_ID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;JOB_TITLE&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;MIN_SALARY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;MAX_SALARY&quot;</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;9566&#39;</span><span class="token punctuation">,</span>
                       <span class="token string">&#39;FI_ENTRY&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1.8</span><span class="token number">.3054</span>     RON       <span class="token keyword">commit</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56E0\u4E3A1.15.3045\u4E8B\u52A1\u7684COMMIT\u8BED\u53E5\u662F\u57281.18.3046\u4E8B\u52A1\u7684COMMIT\u8BED\u53E5\u4E4B\u524D\u53D1\u51FA\u7684\uFF0C\u6240\u4EE5\u6574\u4E2A1.15.3045\u4E8B\u52A1\u9996\u5148\u8FD4\u56DE\u3002\u5373\u4F7F1.18.3046\u4E8B\u52A1\u662F\u57281.15.3045\u4E8B\u52A1\u4E4B\u524D\u542F\u52A8\u7684\uFF0C\u4E5F\u662F\u5982\u6B64\u3002\u56E0\u4E3A\u6CA1\u6709\u4E3A1.9.3041\u4E8B\u52A1\u53D1\u51FACOMMIT\u8BED\u53E5\uFF0C\u6240\u4EE5\u6CA1\u6709\u8FD4\u56DE\u4EFB\u4F55\u4E8B\u52A1\u3002</p><p>See Also:</p>`,80),Ls=s("See "),Os={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-40619B3B-8BDF-4D90-B924-5A0F8A631F98",title:"Examples using LogMiner.",target:"_blank",rel:"noopener noreferrer"},Ts=s("Examples Using LogMiner"),Ns=s(" for a complete example that uses the "),As=n("code",null,"COMMITTED_DATA_ONLY",-1),Rs=s(" option"),Ss=t(`<h3 id="skipping-redo-corruptions" tabindex="-1"><a class="header-anchor" href="#skipping-redo-corruptions" aria-hidden="true">#</a> Skipping Redo Corruptions</h3><p>\u5F53\u60A8\u5C06SKIP_CORRUPTION\u9009\u9879\u7528\u4E8EDBMS_LOGMNR\u65F6\u3002START_LOGMNR\uFF0C\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684\u9009\u62E9\u64CD\u4F5C\u671F\u95F4\uFF0C\u5C06\u8DF3\u8FC7\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u7684\u4EFB\u4F55\u635F\u574F\u3002</p><p>\u5BF9\u4E8E\u9047\u5230\u7684\u6BCF\u4E2A\u635F\u574F\u7684\u91CD\u505A\u8BB0\u5F55\uFF0C\u90FD\u4F1A\u8FD4\u56DE\u4E00\u884C\uFF0C\u5176\u4E2D\u5305\u542BOPERATION\u5217\u4E2D\u7684\u503Cted_blocks\u3001STATUS\u5217\u4E2D\u76841343\u548CINFO\u5217\u4E2D\u8DF3\u8FC7\u7684\u5757\u7684\u6570\u91CF\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C\u8DF3\u8FC7\u7684\u8BB0\u5F55\u53EF\u80FD\u5305\u62EC\u5BF9\u5DF2\u635F\u574F\u5757\u4E2D\u6B63\u5728\u8FDB\u884C\u7684\u4E8B\u52A1\u7684\u66F4\u6539;\u8FD9\u4E9B\u66F4\u6539\u4E0D\u4F1A\u53CD\u6620\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u8FD4\u56DE\u7684\u6570\u636E\u4E2D\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cselect\u64CD\u4F5C\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u9047\u5230\u7B2C\u4E00\u4E2A\u635F\u574F\u65F6\u7EC8\u6B62\u3002</p><p>\u4E0B\u9762\u7684SQL\u793A\u4F8B\u6F14\u793A\u4E86\u8FD9\u4E2A\u9009\u9879\u7684\u5DE5\u4F5C\u65B9\u5F0F:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- Add redo log files of interest.</span>
<span class="token comment">--</span>
<span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>ADD_LOGFILE<span class="token punctuation">(</span><span class="token operator">-</span>
   logfilename <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;/usr/oracle/data/db1arch_1_16_482701534.log&#39;</span> <span class="token operator">-</span>
   options <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>NEW<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Start LogMiner</span>
<span class="token comment">--</span>
<span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Select from the V$LOGMNR_CONTENTS view. This example shows corruptions are -- in the redo log files.</span>
<span class="token comment">-- </span>
<span class="token keyword">SELECT</span> rbasqn<span class="token punctuation">,</span> rbablk<span class="token punctuation">,</span> rbabyte<span class="token punctuation">,</span> operation<span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">,</span> info 
   <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS<span class="token punctuation">;</span>

ERROR at line <span class="token number">3</span>:
ORA<span class="token operator">-</span><span class="token number">00368</span>: checksum error <span class="token operator">in</span> redo log block 
ORA<span class="token operator">-</span><span class="token number">00353</span>: log corruption near block <span class="token number">6</span> change <span class="token number">73528</span> <span class="token keyword">time</span> <span class="token number">11</span><span class="token operator">/</span><span class="token number">06</span><span class="token operator">/</span><span class="token number">2011</span> <span class="token number">11</span>:<span class="token number">30</span>:<span class="token number">23</span> 
ORA<span class="token operator">-</span><span class="token number">00334</span>: archived log: <span class="token operator">/</span>usr<span class="token operator">/</span>oracle<span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>dbarch1_16_482701534<span class="token punctuation">.</span>log

<span class="token comment">-- Restart LogMiner. This time, specify the SKIP_CORRUPTION option.</span>
<span class="token comment">-- </span>
<span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span><span class="token operator">-</span>
   options <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>SKIP_CORRUPTION<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Select from the V$LOGMNR_CONTENTS view again. The output indicates that </span>
<span class="token comment">-- corrupted blocks were skipped: CORRUPTED_BLOCKS is in the OPERATION </span>
<span class="token comment">-- column, 1343 is in the STATUS column, and the number of corrupt blocks </span>
<span class="token comment">-- skipped is in the INFO column.</span>
<span class="token comment">--</span>
<span class="token keyword">SELECT</span> rbasqn<span class="token punctuation">,</span> rbablk<span class="token punctuation">,</span> rbabyte<span class="token punctuation">,</span> operation<span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">,</span> info 
   <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS<span class="token punctuation">;</span>

RBASQN  RBABLK RBABYTE  OPERATION        <span class="token keyword">STATUS</span>  INFO
<span class="token number">13</span>      <span class="token number">2</span>        <span class="token number">76</span>     <span class="token keyword">START</span>              <span class="token number">0</span>
<span class="token number">13</span>      <span class="token number">2</span>        <span class="token number">76</span>     <span class="token keyword">DELETE</span>             <span class="token number">0</span>
<span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">100</span>     INTERNAL           <span class="token number">0</span>
<span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">380</span>     <span class="token keyword">DELETE</span>             <span class="token number">0</span>
<span class="token number">13</span>      <span class="token number">0</span>         <span class="token number">0</span>     CORRUPTED_BLOCKS   <span class="token number">1343</span>  corrupt blocks <span class="token number">4</span> <span class="token keyword">to</span> <span class="token number">19</span> skipped
<span class="token number">13</span>      <span class="token number">20</span>      <span class="token number">116</span>     <span class="token keyword">UPDATE</span>             <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filtering-data-by-time" tabindex="-1"><a class="header-anchor" href="#filtering-data-by-time" aria-hidden="true">#</a> Filtering Data by Time</h3><p>\u8981\u6309\u65F6\u95F4\u8FC7\u6EE4\u6570\u636E\uFF0C\u8BF7\u5728DBMS_LOGMNR.START_LOGMNR\u8FC7\u7A0B\u4E2D\u8BBE\u7F6ESTARTTIME\u548CENDTIME\u53C2\u6570\u3002</p><p>\u4E3A\u4E86\u907F\u514D\u5728\u8C03\u7528PL/SQL DBMS_LOGMNR\u65F6\u6307\u5B9A\u65E5\u671F\u683C\u5F0F\u3002START_LOGMNR\u8FC7\u7A0B\u4E2D\uFF0C\u53EF\u4EE5\u9996\u5148\u4F7F\u7528SQL ALTER SESSION SET NLS_DATE_FORMAT\u8BED\u53E5\uFF0C\u5982\u4E0B\u9762\u7684\u793A\u4F8B\u6240\u793A\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">SESSION</span> <span class="token keyword">SET</span> NLS_DATE_FORMAT <span class="token operator">=</span> <span class="token string">&#39;DD-MON-YYYY HH24:MI:SS&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span> <span class="token operator">-</span>
   DICTFILENAME <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;/oracle/database/dictionary.ora&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span>
   STARTTIME <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;01-Jan-2012 08:30:00&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span>
   ENDTIME <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;01-Jan-2012 08:45:00&#39;</span><span class="token operator">-</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u5E94\u8BE5\u4F7F\u7528\u65F6\u95F4\u6233\u6765\u63A8\u65AD\u91CD\u505A\u8BB0\u5F55\u7684\u987A\u5E8F\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528SCN\u6765\u63A8\u65AD\u91CD\u505A\u8BB0\u5F55\u7684\u987A\u5E8F\u3002</p><h3 id="filtering-data-by-scn" tabindex="-1"><a class="header-anchor" href="#filtering-data-by-scn" aria-hidden="true">#</a> Filtering Data by SCN</h3><p>\u8981\u6839\u636ESCN(\u7CFB\u7EDF\u66F4\u6539\u53F7)\u8FC7\u6EE4\u6570\u636E\uFF0C\u8BF7\u4F7F\u7528PL/SQL DBMS_LOGMNR\u7684STARTSCN\u548CENDSCN\u53C2\u6570\u3002START_LOGMNR\u8FC7\u7A0B\u3002\u4F8B\u5982\uFF1A</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span><span class="token operator">-</span>
    STARTSCN <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">621047</span><span class="token punctuation">,</span> <span class="token operator">-</span>
    ENDSCN   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">625695</span><span class="token punctuation">,</span> <span class="token operator">-</span>
    OPTIONS  <span class="token operator">=</span><span class="token operator">&gt;</span> DBMS_LOGMNR<span class="token punctuation">.</span>DICT_FROM_ONLINE_CATALOG <span class="token operator">+</span> <span class="token operator">-</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u6307\u5B9A\u6240\u6709\u53C2\u6570\u7684\u60C5\u51B5\u4E0B\uFF0CSTARTSCN\u548CENDSCN\u53C2\u6570\u4F1A\u8986\u76D6STARTTIME\u548CENDTIME\u53C2\u6570\u3002</p><h3 id="formatting-reconstructed-sql-statements-for-re-execution" tabindex="-1"><a class="header-anchor" href="#formatting-reconstructed-sql-statements-for-re-execution" aria-hidden="true">#</a> Formatting Reconstructed SQL Statements for Re-execution</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u91CD\u6784\u7684SQL_REDO\u548CSQL_UNDO\u8BED\u53E5\u4E2D\u5305\u542B\u4E00\u4E2AROWID\u5B50\u53E5\uFF0C\u8FD9\u4E9B\u8BED\u53E5\u4EE5\u5206\u53F7\u7ED3\u675F\u3002</p><p>\u4F46\u662F\uFF0C\u60A8\u53EF\u4EE5\u8986\u76D6\u9ED8\u8BA4\u8BBE\u7F6E\uFF0C\u5982\u4E0B\u6240\u793A:</p><ul><li><p>\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9ANO_ROWID_IN_STMT\u9009\u9879\u3002 \u8FD9\u5C06ROWID\u5B50\u53E5\u6392\u9664\u5728\u91CD\u6784\u8BED\u53E5\u4E4B\u5916\u3002\u7531\u4E8E\u6570\u636E\u5E93\u4E4B\u95F4\u7684\u884Cid\u4E0D\u4E00\u81F4\uFF0C\u5982\u679C\u60A8\u6253\u7B97\u9488\u5BF9\u4E0D\u540C\u4E8E\u6700\u521D\u6267\u884C\u5B83\u4EEC\u7684\u6570\u636E\u5E93\u91CD\u65B0\u6267\u884CSQL_REDO\u6216SQL_UNDO\u8BED\u53E5\uFF0C\u90A3\u4E48\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9ANO_ROWID_IN_STMT\u9009\u9879\u3002</p></li><li><p>\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9ANO_SQL_DELIMITER\u9009\u9879\u3002\u8FD9\u5C06\u4ECE\u91CD\u6784\u8BED\u53E5\u4E2D\u53D6\u6D88\u5206\u53F7\u3002\u8FD9\u5BF9\u4E8E\u6253\u5F00\u6E38\u6807\u7136\u540E\u6267\u884C\u91CD\u6784\u8BED\u53E5\u7684\u5E94\u7528\u7A0B\u5E8F\u5F88\u6709\u5E2E\u52A9\u3002</p></li></ul><p>\u6CE8\u610F\uFF0C\u5982\u679C<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684STATUS\u5B57\u6BB5\u503C\u4E3A2(\u65E0\u6548sql)\uFF0C\u5219\u65E0\u6CD5\u6267\u884C\u5173\u8054\u7684sql\u8BED\u53E5\u3002</p><h3 id="formatting-the-appearance-of-returned-data-for-readability" tabindex="-1"><a class="header-anchor" href="#formatting-the-appearance-of-returned-data-for-readability" aria-hidden="true">#</a> Formatting the Appearance of Returned Data for Readability</h3><p>LogMiner\u63D0\u4F9BPRINT_PRETTY_SQL\u9009\u9879\uFF0C\u7528\u4E8E\u683C\u5F0F\u5316\u8FD4\u56DE\u6570\u636E\u7684\u5916\u89C2\uFF0C\u4EE5\u63D0\u9AD8\u53EF\u8BFB\u6027\u3002</p><p>\u6709\u65F6\u5019\uFF0C\u4E00\u4E2A\u67E5\u8BE2\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5305\u542B\u91CD\u6784SQL\u8BED\u53E5\u7684\u5927\u91CF\u5217\uFF0C\u8FD9\u4E9B\u8BED\u53E5\u5728\u89C6\u89C9\u4E0A\u5F88\u7E41\u5FD9\uFF0C\u5F88\u96BE\u9605\u8BFB\u3002LogMiner\u63D0\u4F9BPRINT_PRETTY_SQL\u9009\u9879\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002DBMS_LOGMNR\u7684PRINT_PRETTY_SQL\u9009\u9879\u3002START_LOGMNR\u8FC7\u7A0B\u5C06\u91CD\u5EFA\u7684SQL\u8BED\u53E5\u683C\u5F0F\u5316\u5982\u4E0B\uFF0C\u4F7F\u5176\u66F4\u6613\u4E8E\u9605\u8BFB:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;JOB_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;9782&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;JOB_TITLE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;HR_ENTRY&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MIN_SALARY&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MAX_SALARY&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
  <span class="token keyword">update</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span>
  <span class="token keyword">set</span>
    <span class="token string">&quot;JOB_TITLE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;FI_ENTRY&#39;</span>
  <span class="token keyword">where</span>
    <span class="token string">&quot;JOB_TITLE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;HR_ENTRY&#39;</span> <span class="token operator">and</span>
    ROWID <span class="token operator">=</span> <span class="token string">&#39;AAAHSeAABAAAY+CAAX&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">update</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span>
  <span class="token keyword">set</span>
    <span class="token string">&quot;JOB_TITLE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;FI_ENTRY&#39;</span>
  <span class="token keyword">where</span>
    <span class="token string">&quot;JOB_TITLE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;HR_ENTRY&#39;</span> <span class="token operator">and</span>
    ROWID <span class="token operator">=</span> <span class="token string">&#39;AAAHSeAABAAAY+CAAX&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token string">&quot;HR&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;JOBS&quot;</span>
 <span class="token keyword">where</span>
    <span class="token string">&quot;JOB_ID&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;9782&#39;</span> <span class="token operator">and</span>
    <span class="token string">&quot;JOB_TITLE&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;FI_ENTRY&#39;</span> <span class="token operator">and</span>
    <span class="token string">&quot;MIN_SALARY&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">and</span>
    <span class="token string">&quot;MAX_SALARY&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">and</span>
    ROWID <span class="token operator">=</span> <span class="token string">&#39;AAAHSeAABAAAY+CAAX&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u542F\u7528PRINT_PRETTY_SQL\u9009\u9879\u65F6\u91CD\u5EFA\u7684SQL\u8BED\u53E5\u662F\u4E0D\u53EF\u6267\u884C\u7684\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u4E0D\u4F7F\u7528\u6807\u51C6\u7684SQL\u8BED\u6CD5\u3002</p><h2 id="reapplying-ddl-statements-returned-to-v-logmnr-contents" tabindex="-1"><a class="header-anchor" href="#reapplying-ddl-statements-returned-to-v-logmnr-contents" aria-hidden="true">#</a> Reapplying DDL Statements Returned to V$LOGMNR_CONTENTS</h2><p>\u60A8\u53D1\u51FA\u7684\u4E00\u4E9BDDL\u8BED\u53E5\u4F1A\u5BFC\u81F4Oracle\u5728\u5185\u90E8\u6267\u884C\u4E00\u4E2A\u6216\u591A\u4E2A\u5176\u4ED6DDL\u8BED\u53E5\u3002</p><p>\u8981\u4ECE<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684SQL_REDO\u6216SQL_UNDO\u5217\u91CD\u65B0\u5E94\u7528\u6700\u521D\u5E94\u7528\u4E8E\u6570\u636E\u5E93\u7684SQL DDL\uFF0C\u8BF7\u4E0D\u8981\u6267\u884COracle\u5185\u90E8\u6267\u884C\u7684\u8BED\u53E5\u3002</p><p>Note:</p>`,30),Ms=s("If you execute DML statements that were executed internally by Oracle, then you may corrupt your database. See Step 5 of "),Ds={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-90944343-46BB-4BD5-A0C6-7A4B79D9BEF0",target:"_blank",rel:"noopener noreferrer"},qs=s("Example 4: Using the LogMiner Dictionary in the Redo Log Files"),ys=s(" for an example."),Is=t(`<p>\u8981\u533A\u5206\u7528\u6237\u53D1\u51FA\u7684DDL\u8BED\u53E5\u548COracle\u5185\u90E8\u53D1\u51FA\u7684DDL\u8BED\u53E5\uFF0C\u8BF7\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u7684INFO\u5217\u3002INFO\u5217\u7684\u503C\u6307\u793ADDL\u662F\u7531\u7528\u6237\u6267\u884C\u8FD8\u662F\u7531Oracle\u6267\u884C\u3002</p><h2 id="calling-dbms-logmnr-start-logmnr-multiple-times" tabindex="-1"><a class="header-anchor" href="#calling-dbms-logmnr-start-logmnr-multiple-times" aria-hidden="true">#</a> Calling DBMS_LOGMNR.START_LOGMNR Multiple Times</h2><p>\u5373\u4F7F\u60A8\u5DF2\u7ECF\u6210\u529F\u5730\u8C03\u7528\u4E86DBMS_LOGMNR.START_LOGMNR\u5E76\u4ECE<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u4E2D\u5F00\u59CB\u67E5\u8BE2\u3002\u4F60\u4E5F\u80FD\u591F\u518D\u6B21\u4EE5\u4E0D\u540C\u7684\u53C2\u6570\u914D\u7F6E\u8C03\u7528START_LOGMNR\u5207\u4ECD\u7136\u4E0D\u7ED3\u675F\u5F53\u524DLogMiner\u4F1A\u8BDD\u3002\u4E0B\u9762\u5217\u51FA\u4E86\u4F60\u53EF\u80FD\u60F3\u8981\u8FD9\u6837\u505A\u7684\u539F\u56E0:</p><ul><li>\u60A8\u5E0C\u671B\u9650\u5236LogMiner\u5FC5\u987B\u5206\u6790\u7684\u91CD\u505A\u6570\u636E\u7684\u6570\u91CF\u3002</li><li>\u60A8\u5E0C\u671B\u6307\u5B9A\u4E0D\u540C\u7684\u9009\u9879\u3002\u4F8B\u5982\uFF0C\u60A8\u53EF\u80FD\u51B3\u5B9A\u6307\u5B9APRINT_PRETTY_SQL\u9009\u9879\uFF0C\u6216\u8005\u53EA\u5E0C\u671B\u770B\u5230\u63D0\u4EA4\u7684\u4E8B\u52A1(\u56E0\u6B64\u60A8\u53EF\u4EE5\u6307\u5B9ACOMMITTED_DATA_ONLY\u9009\u9879)\u3002</li><li>\u60A8\u5E0C\u671B\u66F4\u6539\u8981\u5206\u6790\u7684\u65F6\u95F4\u6216SCN\u8303\u56F4\u3002</li></ul><p>Examples: Calling DBMS_LOGMNR.START_LOGMNR Multiple Times</p><p>The following are some examples of when it could be useful to call<code> DBMS_LOGMNR.START_LOGMNR</code> multiple times.</p><p>Example 1: Mining Only a Subset of the Data in the Redo Log Files</p><p>Suppose the list of redo log files that LogMiner has to mine include those generated for an entire week. However, you want to analyze only what happened from 12:00 to 1:00 each day. You could do this most efficiently by:</p><ol><li><p>Calling <code>DBMS_LOGMNR.START_LOGMNR</code> with this time range for Monday.</p></li><li><p>Selecting changes from the <code>V$LOGMNR_CONTENTS</code> view.</p></li><li><p>Repeating Steps 1 and 2 for each day of the week.</p></li></ol><p>If the total amount of redo data is large for the week, then this method would make the whole analysis much faster, because only a small subset of each redo log file in the list would be read by LogMiner.</p><p>Example 2: Adjusting the Time Range or SCN Range</p><p>Suppose you specify a redo log file list and specify a time (or SCN) range when you start LogMiner. When you query the <code>V$LOGMNR_CONTENTS</code> view, you find that only part of the data of interest is included in the time range you specified. You can call <code>DBMS_LOGMNR.START_LOGMNR</code> again to expand the time range by an hour (or adjust the SCN range).</p><p>Example 3: Analyzing Redo Log Files As They Arrive at a Remote Database</p><p>Suppose you have written an application to analyze changes or to replicate changes from one database to another database. The source database sends its redo log files to the mining database and drops them into an operating system directory. Your application:</p><ol><li><p>Adds all redo log files currently in the directory to the redo log file list</p></li><li><p>Calls <code>DBMS_LOGMNR.START_LOGMNR</code> with appropriate settings and selects from the <code>V$LOGMNR_CONTENTS</code> view</p></li><li><p>Adds additional redo log files that have newly arrived in the directory</p></li><li><p>Repeats Steps 2 and 3, indefinitely</p></li></ol><h2 id="supplemental-logging" tabindex="-1"><a class="header-anchor" href="#supplemental-logging" aria-hidden="true">#</a> Supplemental Logging</h2><p>\u63CF\u8FF0\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p><p>\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u901A\u5E38\u7528\u4E8E\u5B9E\u4F8B\u6062\u590D\u548C\u5A92\u4F53\u6062\u590D\u3002\u8FD9\u4E9B\u64CD\u4F5C\u6240\u9700\u7684\u6570\u636E\u81EA\u52A8\u8BB0\u5F55\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002\u4F46\u662F\uFF0C\u57FA\u4E8E\u6062\u590D\u7684\u5E94\u7528\u7A0B\u5E8F\u53EF\u80FD\u9700\u8981\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u8BB0\u5F55\u5176\u4ED6\u5217\u3002\u8BB0\u5F55\u8FD9\u4E9B\u9644\u52A0\u5217\u7684\u8FC7\u7A0B\u79F0\u4E3A\u8F85\u52A9\u65E5\u5FD7\u8BB0\u5F55\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0COracle\u6570\u636E\u5E93\u4E0D\u63D0\u4F9B\u4EFB\u4F55\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8FD9\u610F\u5473\u7740\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0BLogMiner\u4E0D\u53EF\u7528\u3002\u56E0\u6B64\uFF0C\u5728\u751F\u6210\u5C06\u7531LogMiner\u5206\u6790\u7684\u65E5\u5FD7\u6587\u4EF6\u4E4B\u524D\uFF0C\u5FC5\u987B\u81F3\u5C11\u542F\u7528\u6700\u5C11\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p><p>\u4EE5\u4E0B\u662F\u53EF\u80FD\u9700\u8981\u589E\u52A0\u5217\u7684\u4F8B\u5B50\uFF1A</p><ul><li><p>\u5C06\u91CD\u65B0\u6784\u9020\u7684SQL\u8BED\u53E5\u5E94\u7528\u4E8E\u4E0D\u540C\u6570\u636E\u5E93\u7684\u5E94\u7528\u7A0B\u5E8F\u5FC5\u987B\u901A\u8FC7\u4E00\u7EC4\u5217\u6765\u6807\u8BC6update\u8BED\u53E5\uFF0C\u8FD9\u4E9B\u5217\u8981\u662F\u552F\u4E00\u5730\u6807\u8BC6\u884C(\u4F8B\u5982\uFF0C\u4E3B\u952E)\uFF0C\u4E0D\u662F\u7531<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u8FD4\u56DE\u7684\u91CD\u6784SQL\u4E2D\u663E\u793A\u7684ROWID\uFF0C\u56E0\u4E3A\u4E0D\u540C\u6570\u636E\u5E93\u7684ROWID\u662F\u4E0D\u540C\u7684\uFF0C\u56E0\u6B64\u5728\u53E6\u4E00\u4E2A\u6570\u636E\u5E93\u4E2D\u6CA1\u6709\u610F\u4E49\u3002</p></li><li><p>\u5E94\u7528\u7A0B\u5E8F\u53EF\u80FD\u8981\u6C42\u8BB0\u5F55\u6574\u4E2A\u884C\u7684\u524D\u6620\u50CF\uFF0C\u800C\u4E0D\u53EA\u662F\u8BB0\u5F55\u4FEE\u6539\u540E\u7684\u5217\uFF0C\u4EE5\u4FBF\u66F4\u6709\u6548\u5730\u8DDF\u8E2A\u884C\u66F4\u6539\u3002</p></li></ul><p>\u8865\u5145\u65E5\u5FD7\u7EC4\u662F\u542F\u7528\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u65F6\u8981\u8BB0\u5F55\u7684\u4E00\u7EC4\u9644\u52A0\u5217\u3002\u6709\u4E24\u79CD\u7C7B\u578B\u7684\u8865\u5145\u65E5\u5FD7\u7EC4\uFF0C\u5B83\u4EEC\u51B3\u5B9A\u4E86\u65E5\u5FD7\u7EC4\u4E2D\u7684\u5217\u4F55\u65F6\u88AB\u8BB0\u5F55:</p><ul><li>Unconditional supplemental log groups:\u65E0\u8BBA\u66F4\u65B0\u662F\u5426\u5F71\u54CD\u4EFB\u4F55\u6307\u5B9A\u5217\uFF0C\u5728\u66F4\u65B0\u884C\u65F6\u90FD\u4F1A\u8BB0\u5F55\u6307\u5B9A\u5217\u7684\u524D\u6620\u50CF\u3002\u8FD9\u6709\u65F6\u88AB\u79F0\u4E3A\u603B\u662F\u65E5\u5FD7\u7EC4\u3002</li><li>Conditional supplemental log groups: \u53EA\u6709\u66F4\u65B0\u65E5\u5FD7\u7EC4\u4E2D\u7684\u81F3\u5C11\u4E00\u5217\u65F6\uFF0C\u624D\u4F1A\u8BB0\u5F55\u6240\u6709\u6307\u5B9A\u5217\u7684\u524D\u6620\u50CF\u3002</li></ul><p>\u8865\u5145\u65E5\u5FD7\u7EC4\u53EF\u4EE5\u7531\u7CFB\u7EDF\u751F\u6210\uFF0C\u4E5F\u53EF\u4EE5\u7531\u7528\u6237\u5B9A\u4E49\u3002</p><h3 id="database-level-supplemental-logging" tabindex="-1"><a class="header-anchor" href="#database-level-supplemental-logging" aria-hidden="true">#</a> Database-Level Supplemental Logging</h3><p>LogMiner\u63D0\u4F9B\u4E0D\u540C\u7C7B\u578B\u7684\u6570\u636E\u5E93\u7EA7\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55:\u6700\u5C0F\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3001\u6807\u8BC6\u952E\u65E5\u5FD7\u8BB0\u5F55\u548C\u8FC7\u7A0B\u6027\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u5982\u672C\u90E8\u5206\u6240\u8FF0\u3002</p><p>\u6700\u5C0F\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u4E0D\u4F1A\u7ED9\u751F\u6210\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6570\u636E\u5E93\u5E26\u6765\u5F88\u5927\u7684\u5F00\u9500\u3002\u4F46\u662F\uFF0C\u542F\u7528\u6570\u636E\u5E93\u8303\u56F4\u7684\u6807\u8BC6\u952E\u65E5\u5FD7\u8BB0\u5F55\u4F1A\u7ED9\u751F\u6210\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6570\u636E\u5E93\u5E26\u6765\u5F00\u9500\u3002Oracle\u5EFA\u8BAE\u60A8\u81F3\u5C11\u4E3ALogMiner\u542F\u7528\u6700\u4F4E\u9650\u5EA6\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p><h4 id="minimal-supplemental-logging" tabindex="-1"><a class="header-anchor" href="#minimal-supplemental-logging" aria-hidden="true">#</a> Minimal Supplemental Logging</h4><p>\u6700\u4F4E\u9650\u5EA6\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55LogMiner\u8BC6\u522B\u3001\u5206\u7EC4\u548C\u5408\u5E76\u4E0EDML\u66F4\u6539\u76F8\u5173\u7684\u91CD\u505A\u64CD\u4F5C\u6240\u9700\u7684\u6700\u4F4E\u9650\u5EA6\u7684\u4FE1\u606F\u3002</p><p>\u5B83\u786E\u4FDDLogMiner(\u4EE5\u53CA\u4EFB\u4F55\u57FA\u4E8ELogMiner\u6280\u672F\u7684\u4EA7\u54C1)\u6709\u8DB3\u591F\u7684\u4FE1\u606F\u6765\u652F\u6301\u94FE\u5F0F\u884C\u548C\u5404\u79CD\u5B58\u50A8\u5B89\u6392\uFF0C\u6BD4\u5982\u96C6\u7FA4\u8868\u548C\u7D22\u5F15\u7EC4\u7EC7\u7684\u8868\u3002\u8981\u542F\u7528\u6700\u5C0F\u7684\u8F85\u52A9\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8BF7\u6267\u884C\u4EE5\u4E0BSQL\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="database-level-identification-key-logging" tabindex="-1"><a class="header-anchor" href="#database-level-identification-key-logging" aria-hidden="true">#</a> Database-Level Identification Key Logging</h4><p>\u5F53\u6E90\u6570\u636E\u5E93\u5B9E\u4F8B\u4E0A\u4E0D\u4F1A\u6316\u6398\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u65F6(\u4F8B\u5982\uFF0C\u5F53\u5728\u903B\u8F91\u5907\u7528\u6570\u636E\u5E93\u4E0A\u6316\u6398\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u65F6)\uFF0C\u6807\u8BC6\u952E\u65E5\u5FD7\u8BB0\u5F55\u662F\u5FC5\u8981\u7684\u3002</p><p>\u4F7F\u7528\u6570\u636E\u5E93\u6807\u8BC6\u952E\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u4E3ASQL ALTER database ADD additional LOG\u8BED\u53E5\u6307\u5B9A\u4EE5\u4E0B\u4E00\u4E2A\u6216\u591A\u4E2A\u9009\u9879\u6765\u4E3A\u6240\u6709\u66F4\u65B0\u542F\u7528\u6570\u636E\u5E93\u8303\u56F4\u7684before-image\u65E5\u5FD7\u8BB0\u5F55:</p><ul><li><p>\u8FD9\u4E2A\u9009\u9879\u6307\u5B9A\u5F53\u66F4\u65B0\u4E00\u884C\u65F6\uFF0C\u8BE5\u884C\u7684\u6240\u6709\u5217(lob\u3001long\u548Cadt\u9664\u5916)\u90FD\u653E\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002\u8981\u542F\u7528\u6570\u636E\u5E93\u7EA7\u522B\u7684\u6240\u6709\u5217\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8BF7\u6267\u884C\u4EE5\u4E0B\u8BED\u53E5:\u8FD9\u4E2A\u9009\u9879\u6307\u5B9A\u5F53\u66F4\u65B0\u4E00\u884C\u65F6\uFF0C\u8BE5\u884C\u7684\u6240\u6709\u5217(lob\u3001long\u548Cadt\u9664\u5916)\u90FD\u653E\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002\u8981\u542F\u7528\u6570\u636E\u5E93\u7EA7\u522B\u7684\u6240\u6709\u5217\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8BF7\u6267\u884C\u4EE5\u4E0B\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>   <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">ALL</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u4E3B\u5BC6\u94A5\u7CFB\u7EDF\u751F\u6210\u7684\u65E0\u6761\u4EF6\u8865\u5145\u65E5\u5FD7\u7EC4 \u6B64\u9009\u9879\u4F7F\u6570\u636E\u5E93\u5728\u66F4\u65B0\u5305\u542B\u4E3B\u952E\u7684\u884C(\u5373\u4F7F\u4E3B\u952E\u4E2D\u7684\u503C\u6CA1\u6709\u6539\u53D8)\u65F6\uFF0C\u5C06\u884C\u4E3B\u952E\u7684\u6240\u6709\u5217\u653E\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002 \u5982\u679C\u4E00\u4E2A\u8868\u6CA1\u6709\u4E3B\u952E\uFF0C\u4F46\u662F\u6709\u4E00\u4E2A\u6216\u591A\u4E2A\u975E\u7A7A\u60DF\u4E00\u7D22\u5F15\u952E\u7EA6\u675F\u6216\u7D22\u5F15\u952E\uFF0C\u90A3\u4E48\u5C06\u9009\u62E9\u5176\u4E2D\u4E00\u4E2A\u60DF\u4E00\u7D22\u5F15\u952E\u8FDB\u884C\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u4F5C\u4E3A\u60DF\u4E00\u6807\u8BC6\u66F4\u65B0\u884C\u7684\u4E00\u79CD\u65B9\u6CD5\u3002 \u5982\u679C\u8868\u65E2\u6CA1\u6709\u4E3B\u952E\u4E5F\u6CA1\u6709\u975E\u7A7A\u7684\u60DF\u4E00\u7D22\u5F15\u952E\uFF0C\u90A3\u4E48\u9664\u4E86LONG\u548CLOB\u4E4B\u5916\u7684\u6240\u6709\u5217\u90FD\u88AB\u8BB0\u5F55;\u8FD9\u76F8\u5F53\u4E8E\u4E3A\u8BE5\u884C\u6307\u5B9A\u6240\u6709\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002\u56E0\u6B64\uFF0COracle\u5EFA\u8BAE\u5728\u4F7F\u7528\u6570\u636E\u5E93\u7EA7\u4E3B\u952E\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u65F6\uFF0C\u5C06\u6240\u6709\u6216\u5927\u591A\u6570\u8868\u5B9A\u4E49\u4E3A\u5177\u6709\u4E3B\u952E\u6216\u60DF\u4E00\u7D22\u5F15\u952E\u3002 \u82E5\u8981\u5728\u6570\u636E\u5E93\u7EA7\u522B\u542F\u7528\u4E3B\u952E\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8BF7\u6267\u884C\u4EE5\u4E0B\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u5982\u679C\u5C5E\u4E8E\u590D\u5408\u552F\u4E00\u952E\u6216\u4F4D\u56FE\u7D22\u5F15\u7684\u4EFB\u4F55\u5217\u88AB\u4FEE\u6539\uFF0C\u5219\u6B64\u9009\u9879\u4F1A\u5BFC\u81F4\u6570\u636E\u5E93\u5C06\u884C\u7684\u590D\u5408\u552F\u4E00\u952E\u6216\u4F4D\u56FE\u7D22\u5F15\u7684\u6240\u6709\u5217\u653E\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002\u60DF\u4E00\u952E\u53EF\u4EE5\u7531\u60DF\u4E00\u7EA6\u675F\u6216\u60DF\u4E00\u7D22\u5F15\u51B3\u5B9A\u3002\u8981\u5728\u6570\u636E\u5E93\u7EA7\u522B\u542F\u7528\u552F\u4E00\u7D22\u5F15\u952E\u548C\u4F4D\u56FE\u7D22\u5F15\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8BF7\u6267\u884C\u4EE5\u4E0B\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">UNIQUE</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u5916\u952E\u7CFB\u7EDF\u751F\u6210\u7684\u6761\u4EF6\u8865\u5145\u65E5\u5FD7groupThis\u9009\u9879\u4F7F\u6570\u636E\u5E93\u5728\u4EFB\u4F55\u5C5E\u4E8E\u5916\u952E\u7684\u5217\u88AB\u4FEE\u6539\u65F6\u5C06\u884C\u5916\u952E\u7684\u6240\u6709\u5217\u653E\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002\u8981\u5728\u6570\u636E\u5E93\u7EA7\u522B\u542F\u7528\u5916\u952E\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u8BF7\u6267\u884C\u4EE5\u4E0BSQL\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>Note:</p>`,36),fs=s("Regardless of whether identification key logging is enabled, the SQL statements returned by LogMiner always contain the "),Cs=n("code",null,"ROWID",-1),ws=s(" clause. You can filter out the "),Gs=n("code",null,"ROWID",-1),Us=s(" clause by using the "),xs=n("code",null,"NO_ROWID_IN_STMT",-1),Ps=s(" option to the "),Bs=n("code",null,"DBMS_LOGMNR.START_LOGMNR",-1),Ys=s(" procedure call. See "),Fs={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-C2B8C741-9544-4A46-818E-16B233570599",title:"By default, a ROWID clause is included in the reconstructed SQL_REDO and SQL_UNDO statements and the statements are ended with a semicolon.",target:"_blank",rel:"noopener noreferrer"},Vs=s("Formatting Reconstructed SQL Statements for Re-execution"),Hs=s(" for details."),Qs=t(`<p>\u5F53\u60A8\u4F7F\u7528\u8BC6\u522B\u952E\u8BB0\u5F55\u65F6\uFF0C\u8BF7\u8BB0\u4F4F\u4EE5\u4E0B\u51E0\u70B9:</p><ul><li>\u5982\u679C\u542F\u7528\u6807\u8BC6\u952E\u8BB0\u5F55\u65F6\u6570\u636E\u5E93\u5904\u4E8E\u6253\u5F00\u72B6\u6001\uFF0C\u90A3\u4E48\u6E38\u6807\u7F13\u5B58\u4E2D\u7684\u6240\u6709DML\u6E38\u6807\u90FD\u5C06\u65E0\u6548\u3002\u8FD9\u4F1A\u5F71\u54CD\u6027\u80FD\uFF0C\u76F4\u5230\u91CD\u65B0\u586B\u5145\u6E38\u6807\u7F13\u5B58\u3002</li><li>\u5F53\u60A8\u5728\u6570\u636E\u5E93\u7EA7\u522B\u542F\u7528\u6807\u8BC6\u952E\u65E5\u5FD7\u8BB0\u5F55\u65F6\uFF0C\u5C06\u9690\u5F0F\u542F\u7528\u6700\u4F4E\u9650\u5EA6\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</li><li>\u8865\u5145\u7684\u65E5\u5FD7\u8BED\u53E5\u662F\u7D2F\u79EF\u7684\u3002\u5982\u679C\u60A8\u53D1\u51FA\u4EE5\u4E0BSQL\u8BED\u53E5\uFF0C\u90A3\u4E48\u4E3B\u952E\u548C\u552F\u4E00\u952E\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u90FD\u662F\u542F\u7528\u7684:<div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">UNIQUE</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>\u8981\u91CD\u65B0\u5E94\u7528\u6700\u521D\u5E94\u7528\u7684SQL DDL\uFF0C\u91CD\u65B0\u6267\u884C<code>V$LOGMNR_CONTENTS</code>INFO\u5217\u5305\u542BUSER_DDL\u503C\u7684SQL_REDO\u6216SQL_UNDO\u5217\u4E2D\u5305\u542B\u7684DDL SQL\u3002</p><h4 id="procedural-supplemental-logging" tabindex="-1"><a class="header-anchor" href="#procedural-supplemental-logging" aria-hidden="true">#</a> Procedural Supplemental Logging</h4><p>\u8FC7\u7A0B\u6027\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u4F1A\u5BFC\u81F4LogMiner\u8BB0\u5F55\u67D0\u4E9B\u8FC7\u7A0B\u6027\u8C03\u7528\u6765\u91CD\u505A\uFF0C\u4EE5\u4FBF\u901A\u8FC7\u6EDA\u52A8\u5347\u7EA7\u6216Oracle GoldenGate\u6765\u590D\u5236\u5B83\u4EEC\u3002</p><p>\u5BF9\u4E8E\u6EDA\u52A8\u5347\u7EA7\u548COracle GoldenGate\u5FC5\u987B\u542F\u7528\u8FC7\u7A0B\u6027\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u4EE5\u652F\u6301\u590D\u5236AQ\u961F\u5217\u8868\u3001\u542F\u7528\u5206\u5C42\u7ED3\u6784\u7684\u8868\u4EE5\u53CA\u5177\u6709SDO_TOPO_GEOMETRY\u6216SDO_GEORASTER\u5217\u7684\u8868\u3002\u4F7F\u7528\u4EE5\u4E0BSQL\u8BED\u53E5\u6765\u542F\u7528\u8FC7\u7A0B\u6027\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token keyword">FOR</span> PROCEDURAL <span class="token keyword">REPLICATION</span> <span class="token keyword">END</span> SUBHEADING
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u542F\u7528\u4E86\u8FC7\u7A0B\u6027\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u5219\u9664\u975E\u9996\u5148\u5220\u9664\u8FC7\u7A0B\u6027\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u5426\u5219\u65E0\u6CD5\u5220\u9664\u6700\u4F4E\u9650\u5EA6\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p><h3 id="disabling-database-level-supplemental-logging" tabindex="-1"><a class="header-anchor" href="#disabling-database-level-supplemental-logging" aria-hidden="true">#</a> Disabling Database-Level Supplemental Logging</h3><p>\u4F7F\u7528\u5E26\u6709DROP\u8865\u5145\u65E5\u5FD7\u5B50\u53E5\u7684SQL ALTER DATABASE\u8BED\u53E5\u7981\u7528\u6570\u636E\u5E93\u7EA7\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p><p>\u60A8\u53EF\u4EE5\u589E\u91CF\u5730\u5220\u9664\u9644\u52A0\u7684\u65E5\u5FD7\u5C5E\u6027\u3002\u4F8B\u5982\uFF0C\u5047\u8BBE\u60A8\u6309\u4EE5\u4E0B\u987A\u5E8F\u53D1\u51FA\u4EE5\u4E0BSQL\u8BED\u53E5:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">UNIQUE</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">DROP</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">DROP</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E9B\u58F0\u660E\u5C06\u4EA7\u751F\u4E0B\u5217\u5F71\u54CD:</p><ul><li><p>\u5728\u7B2C\u4E00\u4E2A\u8BED\u53E5\u4E4B\u540E\uFF0C\u542F\u7528\u4E3B\u952E\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p></li><li><p>\u5728\u7B2C\u4E8C\u4E2A\u8BED\u53E5\u4E4B\u540E\uFF0C\u5C06\u542F\u7528\u4E3B\u952E\u548C\u60DF\u4E00\u952E\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p></li><li><p>\u5728\u7B2C\u4E09\u6761\u8BED\u53E5\u4E4B\u540E\uFF0C\u53EA\u542F\u7528\u60DF\u4E00\u7684\u952E\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002</p></li><li><p>\u5728\u7B2C\u56DB\u4E2A\u8BED\u53E5\u4E4B\u540E\uFF0C\u6CA1\u6709\u7981\u7528\u6240\u6709\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002\u8FD4\u56DE\u4EE5\u4E0B\u9519\u8BEF: <code>ORA-32589: unable to drop minimal supplemental logging</code>.</p></li></ul><p>\u8981\u7981\u7528\u6240\u6709\u6570\u636E\u5E93\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u5FC5\u987B\u9996\u5148\u7981\u7528\u5DF2\u542F\u7528\u7684\u4EFB\u4F55\u6807\u8BC6\u952E\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u7136\u540E\u7981\u7528\u6700\u5C0F\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002\u4E0B\u9762\u7684\u4F8B\u5B50\u663E\u793A\u4E86\u6B63\u786E\u7684\u987A\u5E8F:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">UNIQUE</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">DROP</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">DROP</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">UNIQUE</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">DROP</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EA\u6709\u5728\u4E0D\u542F\u7528\u6570\u636E\u5E93\u7EA7\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u7684\u5176\u4ED6\u53D8\u4F53\u7684\u60C5\u51B5\u4E0B\uFF0C\u624D\u5141\u8BB8\u5220\u9664\u6700\u5C0F\u7684\u8865\u5145\u65E5\u5FD7\u6570\u636E\u3002</p><h3 id="table-level-supplemental-logging" tabindex="-1"><a class="header-anchor" href="#table-level-supplemental-logging" aria-hidden="true">#</a> Table-Level Supplemental Logging</h3><p>\uFF08\u8868\u7EA7\u522B\u7684\u4E00\u822C\u5C31\u4E0D\u5173\u5FC3\u4E86\uFF0C\u5C31\u4E0D\u9010\u4E00\u5206\u6790\u4E86\uFF09 \u5728\u8868\u7EA7\uFF0C\u7EA7\u522B\u7684\u8865\u5145\u65E5\u5FD7\u6307\u5B9A\u54EA\u4E9B\u5217\u5C06\u88AB\u8865\u5145\u5230\u65E5\u5FD7\u4E2D\u3002</p><h4 id="table-level-identification-key-logging" tabindex="-1"><a class="header-anchor" href="#table-level-identification-key-logging" aria-hidden="true">#</a> Table-Level Identification Key Logging</h4><p>Identification key logging at the table level offers the same options as those provided at the database level: all, primary key, foreign key, and unique key.</p><p>However, when you specify identification key logging at the table level, only the specified table is affected. For example, if you enter the following SQL statement (specifying database-level supplemental logging), then whenever a column in any database table is changed, the entire row containing that column (except columns for LOBs, <code>LONG</code>s, and <code>ADT</code>s) will be placed in the redo log file:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">ALL</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>However, if you enter the following SQL statement (specifying table-level supplemental logging) instead, then only when a column in the <code>employees</code> table is changed will the entire row (except for LOB, <code>LONG</code>s, and <code>ADT</code>s) of the table be placed in the redo log file. If a column changes in the <code>departments</code> table, then only the changed column will be placed in the redo log file.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> HR<span class="token punctuation">.</span>EMPLOYEES <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">ALL</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Keep the following in mind when you use table-level identification key logging:</p><ul><li><p>If the database is open when you enable identification key logging on a table, then all DML cursors for that table in the cursor cache are invalidated. This can affect performance until the cursor cache is repopulated.</p></li><li><p>Supplemental logging statements are cumulative. If you issue the following SQL statements, then both primary key and unique index key table-level supplemental logging is enabled:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> HR<span class="token punctuation">.</span>EMPLOYEES 
  <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> HR<span class="token punctuation">.</span>EMPLOYEES 
  <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span> <span class="token punctuation">(</span><span class="token keyword">UNIQUE</span><span class="token punctuation">)</span> <span class="token keyword">COLUMNS</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,27),Xs=s("See "),Ws={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-E3E015C4-B0EB-4072-92A6-FD3079C68242",title:"Identification key logging is necessary when redo log files will not be mined at the source database instance, for example, when the redo log files will be mined at a logical standby database.",target:"_blank",rel:"noopener noreferrer"},$s=s("Database-Level Identification Key Logging"),Js=s(" for a description of each of the identification key logging options."),Ks=t(`<h4 id="table-level-user-defined-supplemental-log-groups" tabindex="-1"><a class="header-anchor" href="#table-level-user-defined-supplemental-log-groups" aria-hidden="true">#</a> Table-Level User-Defined Supplemental Log Groups</h4><p>In addition to table-level identification key logging, Oracle supports user-defined supplemental log groups.</p><p>With user-defined supplemental log groups, you can specify which columns are supplementally logged. You can specify conditional or unconditional log groups, as follows:</p><ul><li><p>User-defined unconditional log groups</p><p>To enable supplemental logging that uses user-defined unconditional log groups, use the <code>ALWAYS</code> clause as shown in the following example:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> HR<span class="token punctuation">.</span>EMPLOYEES
   <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">GROUP</span> emp_parttime <span class="token punctuation">(</span>EMPLOYEE_ID<span class="token punctuation">,</span> LAST_NAME<span class="token punctuation">,</span> 
   DEPARTMENT_ID<span class="token punctuation">)</span> ALWAYS<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This creates a log group named <code>emp_parttime</code> on the <code>hr.employees</code> table that consists of the columns <code>employee_id</code>, <code>last_name</code>, and <code>department_id</code>. These columns are logged every time an <code>UPDATE</code> statement is executed on the <code>hr.employees</code> table, regardless of whether the update affected these columns. (To have the entire row image logged any time an update is made, use table-level <code>ALL</code> identification key logging, as described previously).</p><p>Note:</p><p>LOB, <code>LONG</code>, and <code>ADT</code> columns cannot be supplementally logged.</p></li><li><p>User-defined conditional supplemental log groups</p><p>To enable supplemental logging that uses user-defined conditional log groups, omit the <code>ALWAYS</code> clause from the SQL <code>ALTER</code> <code>TABLE</code> statement, as shown in the following example:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> HR<span class="token punctuation">.</span>EMPLOYEES
   <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">GROUP</span> emp_fulltime <span class="token punctuation">(</span>EMPLOYEE_ID<span class="token punctuation">,</span> LAST_NAME<span class="token punctuation">,</span> 
   DEPARTMENT_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This creates a log group named <code>emp_fulltime</code> on table <code>hr.employees</code>. As in the previous example, it consists of the columns <code>employee_id</code>, <code>last_name</code>, and <code>department_id</code>. But because the <code>ALWAYS</code> clause was omitted, before-images of the columns are logged only if at least one of the columns is updated.</p></li></ul><p>For both unconditional and conditional user-defined supplemental log groups, you can explicitly specify that a column in the log group be excluded from supplemental logging by specifying the <code>NO LOG</code> option. When you specify a log group and use the <code>NO LOG</code> option, you must specify at least one column in the log group without the <code>NO LOG</code> option, as shown in the following example:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> HR<span class="token punctuation">.</span>EMPLOYEES
   <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">GROUP</span> emp_parttime<span class="token punctuation">(</span>
   DEPARTMENT_ID <span class="token keyword">NO</span> LOG<span class="token punctuation">,</span> EMPLOYEE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This enables you to associate this column with other columns in the named supplemental log group such that any modification to the <code>NO LOG</code> column causes the other columns in the supplemental log group to be placed in the redo log file. This might be useful, for example, for logging certain columns in a group if a <code>LONG</code> column changes. You cannot supplementally log the <code>LONG</code> column itself; however, you can use changes to that column to trigger supplemental logging of other columns in the same row.</p><h4 id="usage-notes-for-user-defined-supplemental-log-groups" tabindex="-1"><a class="header-anchor" href="#usage-notes-for-user-defined-supplemental-log-groups" aria-hidden="true">#</a> Usage Notes for User-Defined Supplemental Log Groups</h4><p>Hints for using user-defined supplemental log groups.</p><p>Keep the following in mind when you specify user-defined supplemental log groups:</p><ul><li><p>A column can belong to more than one supplemental log group. However, the before-image of the columns gets logged only once.</p></li><li><p>If you specify the same columns to be logged both conditionally and unconditionally, then the columns are logged unconditionally.</p></li></ul><h3 id="tracking-ddl-statements-in-the-logminer-dictionary" tabindex="-1"><a class="header-anchor" href="#tracking-ddl-statements-in-the-logminer-dictionary" aria-hidden="true">#</a> Tracking DDL Statements in the LogMiner Dictionary</h3><p>LogMiner\u4ECELogMiner\u5B57\u5178\u81EA\u52A8\u6784\u5EFA\u81EA\u5DF1\u7684\u5185\u90E8\u5B57\u5178\uFF0C\u8BE5\u5B57\u5178\u662F\u5728\u542F\u52A8LogMiner\u65F6\u6307\u5B9A\u7684(\u5728\u7EBF\u76EE\u5F55\u3001\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u7684\u5B57\u5178\u6216\u5E73\u9762\u6587\u4EF6)\u3002</p><p>\u6B64\u5B57\u5178\u63D0\u4F9B\u6570\u636E\u5E93\u5BF9\u8C61\u53CA\u5176\u5B9A\u4E49\u7684\u5FEB\u7167\u3002</p><p>\u5982\u679CLogMiner\u5B57\u5178\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u6216\u8005\u662F\u5E73\u9762\u6587\u4EF6\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528PL/SQL DBMS_LOGMNR.START_LOGMNR\u8FC7\u7A0B\u7684DDL_DICT_TRACKING\u9009\u9879\uFF0C\u7528\u4E8E\u6307\u793ALogMiner\u8DDF\u8E2A\u6570\u636E\u5B9A\u4E49\u8BED\u8A00(DDL)\u8BED\u53E5\u3002DDL\u8DDF\u8E2A\u4F7FLogMiner\u80FD\u591F\u6210\u529F\u5730\u8DDF\u8E2A\u5BF9\u6570\u636E\u5E93\u5BF9\u8C61\u6240\u505A\u7684\u7ED3\u6784\u66F4\u6539\uFF0C\u6BD4\u5982\u4ECE\u8868\u4E2D\u6DFB\u52A0\u6216\u5220\u9664\u5217\u3002\u4F8B\u5982:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXECUTE</span> DBMS_LOGMNR<span class="token punctuation">.</span>START_LOGMNR<span class="token punctuation">(</span>OPTIONS <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">-</span>
   DBMS_LOGMNR<span class="token punctuation">.</span>DDL_DICT_TRACKING <span class="token operator">+</span> DBMS_LOGMNR<span class="token punctuation">.</span>DICT_FROM_REDO_LOGS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FC7\u8BBE\u7F6E\u8FD9\u4E2A\u9009\u9879\uFF0CLogMiner\u5C06\u5728\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u770B\u5230\u7684\u4EFB\u4F55DDL\u8BED\u53E5\u5E94\u7528\u5230\u5B83\u7684\u5185\u90E8\u5B57\u5178\u4E2D\u3002</p><p>\u6CE8\u610F:\u4E00\u822C\u6765\u8BF4\uFF0C\u6700\u597D\u542F\u7528\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u548CDDL\u8DDF\u8E2A\u529F\u80FD\uFF0C\u56E0\u4E3A\u5982\u679C\u6CA1\u6709\u542F\u7528\u8FD9\u4E9B\u529F\u80FD\uFF0C\u5E76\u4E14\u53D1\u751F\u4E86DDL\u4E8B\u4EF6\uFF0C\u90A3\u4E48LogMiner\u5C06\u4E00\u4E9B\u91CD\u505A\u6570\u636E\u4F5C\u4E3A\u4E8C\u8FDB\u5236\u6570\u636E\u8FD4\u56DE\u3002\u6B64\u5916\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u5143\u6570\u636E\u7248\u672C\u4E0D\u5339\u914D\u3002</p><p>\u542F\u7528DDL_DICT_TRACKING\u65F6\uFF0C\u53EF\u4EE5\u6B63\u786E\u663E\u793A\u5728\u63D0\u53D6LogMiner\u5B57\u5178\u540E\u521B\u5EFA\u7684\u8868\u4E0A\u6267\u884C\u7684\u6570\u636E\u64CD\u4F5C\u8BED\u8A00(DML)\u64CD\u4F5C\u3002</p><p>\u4F8B\u5982\uFF0C\u5982\u679C\u901A\u8FC7\u4E24\u4E2A\u8FDE\u7EED\u7684DDL\u64CD\u4F5C\u66F4\u65B0\u4E00\u4E2A\u8868employees\uFF0C\u6BD4\u5982\u5728\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u6DFB\u52A0\u5217gender\uFF0C\u5728\u4E0B\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u5220\u9664\u5217commiton_pct\uFF0C\u90A3\u4E48LogMiner\u5C06\u4E3A\u6BCF\u4E2A\u8FD9\u4E9B\u66F4\u6539\u4FDD\u7559\u96C7\u5458\u7684\u7248\u672C\u4FE1\u606F\u3002\u8FD9\u610F\u5473\u7740LogMiner\u53EF\u4EE5\u6210\u529F\u5730\u6316\u6398\u6765\u81EA\u8FD9\u4E9BDDL\u66F4\u6539\u4E4B\u524D\u548C\u4E4B\u540E\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\uFF0C\u5E76\u4E14\u4E0D\u4F1A\u4E3ASQL_REDO\u6216SQL_UNDO\u5217\u663E\u793A\u4E8C\u8FDB\u5236\u6570\u636E\u3002</p><p>\u56E0\u4E3ALogMiner\u81EA\u52A8\u5C06\u7248\u672C\u5206\u914D\u7ED9\u6570\u636E\u5E93\u5143\u6570\u636E\uFF0C\u6240\u4EE5\u5B83\u5C06\u68C0\u6D4B\u5E76\u901A\u77E5\u60A8\u5176\u5185\u90E8\u5B57\u5178\u4E0E\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E2D\u7684\u5B57\u5178\u4E4B\u95F4\u7684\u4EFB\u4F55\u4E0D\u5339\u914D\u3002\u5982\u679CLogMiner\u68C0\u6D4B\u5230\u4E0D\u5339\u914D\uFF0C\u90A3\u4E48\u5B83\u5C06\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684SQL_REDO\u5217\u4E2D\u751F\u6210\u4E8C\u8FDB\u5236\u6570\u636E\uFF0CINFO\u5217\u5305\u542B\u5B57\u7B26\u4E32\u201CDictionary Version mismatch\u201D\uFF0CSTATUS\u5217\u5C06\u5305\u542B\u503C2\u3002</p><p>\u6CE8\u610F:LogMiner\u5185\u90E8\u5B57\u5178\u4E0E\u5E73\u9762\u6587\u4EF6\u3001\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u6216\u5728\u7EBF\u76EE\u5F55\u4E2D\u5305\u542B\u7684LogMiner\u5B57\u5178\u4E0D\u540C\uFF0C\u7406\u89E3\u8FD9\u4E00\u70B9\u5F88\u91CD\u8981\u3002LogMiner\u4F1A\u66F4\u65B0\u5B83\u7684\u5185\u90E8\u5B57\u5178\uFF0C\u4F46\u5B83\u4E0D\u4F1A\u66F4\u65B0\u5E73\u9762\u6587\u4EF6\u3001\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u6216\u5728\u7EBF\u76EE\u5F55\u4E2D\u5305\u542B\u7684\u5B57\u5178\u3002</p><p>\u4E0B\u9762\u7684\u5217\u8868\u63CF\u8FF0\u4E86\u4F7F\u7528DBMS_LOGMNR.START_LOGMNR\u8FC7\u7A0B\u6307\u5B9ADDL_DICT_TRACKING\u9009\u9879\u7684\u8981\u6C42\u3002</p><ul><li>DDL_DICT_TRACKING\u9009\u9879\u5BF9\u4E8EDICT_FROM_ONLINE_CATALOG\u9009\u9879\u65E0\u6548\u3002</li><li>DDL_DICT_TRACKING\u9009\u9879\u8981\u6C42\u6570\u636E\u5E93\u6253\u5F00\u3002</li><li>\u5FC5\u987B\u5728\u6574\u4E2A\u6570\u636E\u5E93\u8303\u56F4\u5185\u542F\u7528\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u6216\u8005\u5FC5\u987B\u4E3A\u611F\u5174\u8DA3\u7684\u8868\u521B\u5EFA\u65E5\u5FD7\u7EC4\u3002</li></ul><h3 id="ddl-dict-tracking-and-supplemental-logging-settings" tabindex="-1"><a class="header-anchor" href="#ddl-dict-tracking-and-supplemental-logging-settings" aria-hidden="true">#</a> DDL_DICT_TRACKING and Supplemental Logging Settings</h3><p>\u63CF\u8FF0\u5408\u5E76\u5B57\u5178\u8DDF\u8E2A\u548C\u8F85\u52A9\u65E5\u5FD7\u8BB0\u5F55\u7684\u5404\u79CD\u8BBE\u7F6E\u65F6\u53D1\u751F\u7684\u4EA4\u4E92\u3002</p><p>Note the following:</p><ul><li><p>If <code>DDL_DICT_TRACKING</code> is enabled, but supplemental logging is not enabled and:</p><ul><li><p>A DDL transaction is encountered in the redo log file, then a query of <code>V$LOGMNR_CONTENTS</code> will terminate with the ORA-01347 error.</p></li><li><p>A DML transaction is encountered in the redo log file, then LogMiner will not assume that the current version of the table (underlying the DML) in its dictionary is correct, and columns in <code>V$LOGMNR_CONTENTS</code> will be set as follows:</p><ul><li><p>The <code>SQL_REDO</code> column will contain binary data.</p></li><li><p>The <code>STATUS</code> column will contain a value of <code>2</code> (which indicates that the SQL is not valid).</p></li><li><p>The <code>INFO</code> column will contain the string &#39;Dictionary Mismatch&#39;.</p></li></ul></li></ul></li><li><p>If <code>DDL_DICT_TRACKING</code> is not enabled and supplemental logging is not enabled, and the columns referenced in a DML operation match the columns in the LogMiner dictionary, then LogMiner assumes that the latest version in its dictionary is correct, and columns in <code>V$LOGMNR_CONTENTS</code> will be set as follows:</p><ul><li><p>LogMiner will use the definition of the object in its dictionary to generate values for the <code>SQL_REDO</code> and <code>SQL_UNDO</code> columns.</p></li><li><p>The status column will contain a value of <code>3</code> (which indicates that the SQL is not guaranteed to be accurate).</p></li><li><p>The <code>INFO</code> column will contain the string &#39;no supplemental log data found&#39;.</p></li></ul></li><li><p>If <code>DDL_DICT_TRACKING</code> is not enabled and supplemental logging is not enabled and there are more modified columns in the redo log file for a table than the LogMiner dictionary definition for the table defines, then:</p><ul><li><p>The <code>SQL_REDO</code> and <code>SQL_UNDO</code> columns will contain the string &#39;Dictionary Version Mismatch&#39;.</p></li><li><p>The <code>STATUS</code> column will contain a value of <code>2</code> (which indicates that the SQL is not valid).</p></li><li><p>The <code>INFO</code> column will contain the string &#39;Dictionary Mismatch&#39;.</p></li></ul><p>Also be aware that it is possible to get unpredictable behavior if the dictionary definition of a column indicates one type but the column is really another type.</p></li></ul><h3 id="ddl-dict-tracking-and-specified-time-or-scn-ranges" tabindex="-1"><a class="header-anchor" href="#ddl-dict-tracking-and-specified-time-or-scn-ranges" aria-hidden="true">#</a> DDL_DICT_TRACKING and Specified Time or SCN Ranges</h3><p>Because LogMiner must not miss a DDL statement if it is to ensure the consistency of its dictionary, LogMiner may start reading redo log files before your requested starting time or SCN (as specified with <code>DBMS_LOGMNR.START_LOGMNR</code>) when the <code>DDL_DICT_TRACKING</code> option is enabled.</p><p>The actual time or SCN at which LogMiner starts reading redo log files is referred to as the required starting time or the required starting SCN.</p><p>No missing redo log files (based on sequence numbers) are allowed from the required starting time or the required starting SCN.</p><p>LogMiner determines where it will start reading redo log data as follows:</p><ul><li><p>After the dictionary is loaded, the first time that you call <code>DBMS_LOGMNR.START_LOGMNR</code>, LogMiner begins reading as determined by one of the following, whichever causes it to begin earlier:</p><ul><li><p>Your requested starting time or SCN value</p></li><li><p>The commit SCN of the dictionary dump</p></li></ul></li><li><p>On subsequent calls to <code>DBMS_LOGMNR.START_LOGMNR</code>, LogMiner begins reading as determined for one of the following, whichever causes it to begin earliest:</p><ul><li><p>Your requested starting time or SCN value</p></li><li><p>The start of the earliest DDL transaction where the <code>COMMIT</code> statement has not yet been read by LogMiner</p></li><li><p>The highest SCN read by LogMiner</p></li></ul></li></ul><p>The following scenario helps illustrate this:</p><p>Suppose you create a redo log file list containing five redo log files. Assume that a dictionary is contained in the first redo file, and the changes that you have indicated you want to see (using <code>DBMS_LOGMNR.START_LOGMNR</code>) are recorded in the third redo log file. You then do the following:</p><ol><li><p>Call <code>DBMS_LOGMNR.START_LOGMNR</code>. LogMiner will read:</p><ol><li><p>The first log file to load the dictionary</p></li><li><p>The second redo log file to pick up any possible DDLs contained within it</p></li><li><p>The third log file to retrieve the data of interest</p></li></ol></li><li><p>Call <code>DBMS_LOGMNR.START_LOGMNR</code> again with the same requested range.</p><p>LogMiner will begin with redo log file 3; it no longer needs to read redo log file 2, because it has already processed any DDL statements contained within it.</p></li><li><p>Call <code>DBMS_LOGMNR.START_LOGMNR</code> again, this time specifying parameters that require data to be read from redo log file 5.</p><p>LogMiner will start reading from redo log file 4 to pick up any DDL statements that may be contained within it.</p></li></ol><p>Query the <code>REQUIRED_START_DATE</code> or the <code>REQUIRED_START_SCN</code> columns of the <code>V$LOGMNR_PARAMETERS</code> view to see where LogMiner will actually start reading. Regardless of where LogMiner starts reading, only rows in your requested range will be returned from the <code>V$LOGMNR_CONTENTS</code> view.</p><h2 id="accessing-logminer-operational-information-in-views" tabindex="-1"><a class="header-anchor" href="#accessing-logminer-operational-information-in-views" aria-hidden="true">#</a> Accessing LogMiner Operational Information in Views</h2><p>LogMiner\u64CD\u4F5C\u4FE1\u606F(\u76F8\u5BF9\u4E8E\u91CD\u505A\u6570\u636E)\u5305\u542B\u5728\u89C6\u56FE\u4E2D\u3002</p><p>\u53EF\u4EE5\u50CF\u67E5\u8BE2\u5176\u4ED6\u89C6\u56FE\u4E00\u6837\u4F7F\u7528SQL\u67E5\u8BE2\u5B83\u4EEC\u3002</p>`,41),js=n("li",null,[n("p",null,[n("code",null,"V$LOGMNR_DICTIONARY")]),n("p",null,[s("Shows information about a LogMiner dictionary file that was created using the "),n("code",null,"STORE_IN_FLAT_FILE"),s(" option to "),n("code",null,"DBMS_LOGMNR.START_LOGMNR"),s(". The information shown includes information about the database from which the LogMiner dictionary was created.")])],-1),zs=n("p",null,[n("code",null,"V$LOGMNR_LOGS")],-1),Zs=s("Shows information about specified redo log files, as described in "),ne={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-A4779AA3-EE5B-43CA-A64A-0A6B8CFC5D4F",title:"You can query the V$LOGMNR_LOGS view to determine which redo log files have been manually or automatically added to the list of redo log files for LogMiner to analyze.",target:"_blank",rel:"noopener noreferrer"},se=s("Querying "),ee=n("code",null,"V$LOGMNR_LOGS",-1),ae=s("."),te=t("<li><p><code>V$LOGMNR_PARAMETERS</code></p><p>Shows information about optional LogMiner parameters, including starting and ending system change numbers (SCNs) and starting and ending times.</p></li><li><p><code>V$DATABASE</code>, <code>DBA_LOG_GROUPS</code>, <code>ALL_LOG_GROUPS</code>, <code>USER_LOG_GROUPS</code>, <code>DBA_LOG_GROUP_COLUMNS</code>, <code>ALL_LOG_GROUP_COLUMNS</code>, <code>USER_LOG_GROUP_COLUMNS</code></p></li>",2),oe=t('<h3 id="querying-v-logmnr-logs" tabindex="-1"><a class="header-anchor" href="#querying-v-logmnr-logs" aria-hidden="true">#</a> Querying V$LOGMNR_LOGS</h3><p>\u60A8\u53EF\u4EE5\u67E5\u8BE2<code>V$LOGMNR_LOGS</code>\u89C6\u56FE\uFF0C\u4EE5\u786E\u5B9A\u54EA\u4E9B\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5DF2\u624B\u52A8\u6216\u81EA\u52A8\u6DFB\u52A0\u5230\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u4E2D\uFF0C\u4EE5\u4FBFLogMiner\u8FDB\u884C\u5206\u6790\u3002</p><p>\u6B64\u89C6\u56FE\u5305\u542B\u6BCF\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u4E00\u884C\u3002\u5B83\u63D0\u4F9B\u5173\u4E8E\u6BCF\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u6709\u4EF7\u503C\u7684\u4FE1\u606F\uFF0C\u5305\u62EC\u6587\u4EF6\u540D\u3001SCN\u548C\u65F6\u95F4\u8303\u56F4\uFF0C\u4EE5\u53CA\u5B83\u662F\u5426\u5305\u542BLogMiner\u5B57\u5178\u7684\u5168\u90E8\u6216\u90E8\u5206\u5185\u5BB9\u3002 \u6210\u529F\u8C03\u7528DBMS_LOGMNR.START_LOGMNR\u4E4B\u540E, <code>V$LOGMNR_LOGS</code>\u89C6\u56FE\u7684STATUS \u5217\u5305\u542B\u4EE5\u4E0B\u503C\u4E4B\u4E00:</p><ol><li><p><code>0</code></p><p>\u6307\u793A\u5C06\u5728<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u7684\u67E5\u8BE2\u671F\u95F4\u5904\u7406\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002</p></li><li><p><code>1</code></p><p>\u6307\u793A\u8FD9\u5C06\u662FLogMiner\u5728\u5BF9<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u6267\u884C\u9009\u62E9\u64CD\u4F5C\u671F\u95F4\u8981\u5904\u7406\u7684\u7B2C\u4E00\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002</p></li><li><p><code>2</code></p><p>\u6307\u793A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5DF2\u88AB\u5220\u9664\uFF0C\u56E0\u6B64\u5728\u67E5\u8BE2<code>V$LOGMNR_CONTENTS</code>\u89C6\u56FE\u671F\u95F4LogMiner\u4E0D\u4F1A\u5904\u7406\u8BE5\u6587\u4EF6\u3002\u5B83\u5DF2\u7ECF\u4FEE\u526A\uFF0C\u56E0\u4E3A\u5B83\u4E0D\u9700\u8981\u6EE1\u8DB3\u60A8\u6240\u8981\u6C42\u7684\u65F6\u95F4\u6216SCN\u8303\u56F4\u3002.</p></li><li><p><code>4</code></p><p>\u6307\u793A\u5728LogMiner\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u4E2D\u7F3A\u5C11\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6(\u57FA\u4E8E\u5E8F\u5217\u53F7)\u3002</p></li></ol><p><code>V$LOGMNR_LOGS</code>\u89C6\u56FE\u5305\u542B\u5217\u8868\u4E2D\u7F3A\u5C11\u7684\u6BCF\u4E2A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u7684\u884C\uFF0C\u5982\u4E0B\u6240\u793A:</p><ol><li><p>FILENAME\u5217\u5C06\u5305\u542B\u5E8F\u5217\u53F7\u7684\u8FDE\u7EED\u8303\u56F4\u548C\u603BSCN\u8303\u56F4\u95F4\u9694\u3002</p><p>\u4F8B\u5982:\u7EBF\u7A0B1\u7684\u65E5\u5FD7\u6587\u4EF6\u4E22\u5931\uFF0C\u5E8F\u5217\u53F7\u4ECE100\u5230102&#39;\u3002</p></li><li><p>NFO\u5217\u5C06\u5305\u542B\u5B57\u7B26\u4E32&#39;MISSING_LOGFILE&#39;\u3002</p></li></ol><p>\u5173\u4E8E\u4ECE\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\u4E2D\u4E22\u5931\u7684\u6587\u4EF6\u7684\u4FE1\u606F\u662F\u6709\u7528\u7684\uFF0C\u539F\u56E0\u5982\u4E0B:</p><ol><li><p>The <code>DDL_DICT_TRACKING</code> option that can be specified when you call <code>DBMS_LOGMNR.START_LOGMNR</code> will not allow redo log files to be missing from the LogMiner redo log file list for the requested time or SCN range. If a call to <code>DBMS_LOGMNR.START_LOGMNR</code> fails, then you can query the <code>STATUS</code> column in the <code>V$LOGMNR_LOGS</code> view to determine which redo log files are missing from the list. You can then find and manually add these redo log files and attempt to call <code>DBMS_LOGMNR.START_LOGMNR</code> again.</p><p>Note:The <code>continuous_mine</code> option for the <code>dbms_logmnr.start_logmnr</code> package is desupported in Oracle Database 19c (19.1), and is no longer available.</p></li><li><p>Although all other options that can be specified when you call <code>DBMS_LOGMNR.START_LOGMNR</code> allow files to be missing from the LogMiner redo log file list, you may not want to have missing files. You can query the <code>V$LOGMNR_LOGS</code> view before querying the <code>V$LOGMNR_CONTENTS</code> view to ensure that all required files are in the list. If the list is left with missing files and you query the <code>V$LOGMNR_CONTENTS</code> view, then a row is returned in <code>V$LOGMNR_CONTENTS</code> with the following column values:</p><ul><li><p>In the <code>OPERATION</code> column, a value of &#39;MISSING_SCN&#39;</p></li><li><p>In the <code>STATUS</code> column, a value of <code>1291</code></p></li><li><p>In the <code>INFO</code> column, a string indicating the missing SCN range (for example, &#39;Missing SCN 100 - 200&#39;)</p></li></ul></li></ol><h3 id="querying-views-for-supplemental-logging-settings" tabindex="-1"><a class="header-anchor" href="#querying-views-for-supplemental-logging-settings" aria-hidden="true">#</a> Querying Views for Supplemental Logging Settings</h3><p>\u63CF\u8FF0\u5982\u4F55\u67E5\u8BE2\u591A\u4E2A\u89C6\u56FE\u4EE5\u786E\u5B9A\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u7684\u5F53\u524D\u8BBE\u7F6E\u3002</p><p>Specificallyt:</p><ul><li><p><code>V$DATABASE</code> view</p><ul><li><p><code>SUPPLEMENTAL_LOG_DATA_FK</code> column</p><p>This column contains one of the following values:</p><ul><li><p><code>NO</code> - if database-level identification key logging with the <code>FOREIGN KEY</code> option is not enabled</p></li><li><p><code>YES</code> - if database-level identification key logging with the <code>FOREIGN KEY</code> option is enabled</p></li></ul></li><li><p><code>SUPPLEMENTAL_LOG_DATA_ALL</code> column</p><p>This column contains one of the following values:</p><ul><li><p><code>NO</code> - if database-level identification key logging with the <code>ALL</code> option is not enabled</p></li><li><p><code>YES</code> - if database-level identification key logging with the <code>ALL</code> option is enabled</p></li></ul></li><li><p><code>SUPPLEMENTAL_LOG_DATA_UI</code> column</p><ul><li><p><code>NO</code> - if database-level identification key logging with the <code>UNIQUE</code> option is not enabled</p></li><li><p><code>YES</code> - if database-level identification key logging with the <code>UNIQUE</code> option is enabled</p></li></ul></li><li><p><code>SUPPLEMENTAL_LOG_DATA_MIN</code> column</p><p>This column contains one of the following values:</p><ul><li><p><code>NO</code> - if no database-level supplemental logging is enabled</p></li><li><p><code>IMPLICIT</code> - if minimal supplemental logging is enabled because database-level identification key logging options is enabled</p></li><li><p><code>YES</code> - if minimal supplemental logging is enabled because the SQL <code>ALTER</code> <code>DATABASE</code> <code>ADD</code> <code>SUPPLEMENTAL</code> <code>LOG</code> <code>DATA</code> statement was issued</p></li></ul></li></ul></li><li><p><code>DBA_LOG_GROUPS</code>, <code>ALL_LOG_GROUPS</code>, and <code>USER_LOG_GROUPS</code> views</p><ul><li><p><code>ALWAYS</code> column</p><p>This column contains one of the following values:</p><ul><li><p><code>ALWAYS</code> - indicates that the columns in this log group will be supplementally logged if any column in the associated row is updated</p></li><li><p><code>CONDITIONAL</code> - indicates that the columns in this group will be supplementally logged only if a column in the log group is updated</p></li></ul></li><li><p><code>GENERATED</code> column</p><p>This column contains one of the following values:</p><ul><li><p><code>GENERATED NAME</code> - if the <code>LOG_GROUP</code> name was system-generated</p></li><li><p><code>USER NAME</code> - if the <code>LOG_GROUP</code> name was user-defined</p></li></ul></li><li><p><code>LOG_GROUP_TYPE</code> column</p><p>This column contains one of the following values to indicate the type of logging defined for this log group. <code>USER LOG GROUP</code> indicates that the log group was user-defined (as opposed to system-generated).</p><ul><li><p><code>ALL COLUMN LOGGING</code></p></li><li><p><code>FOREIGN KEY LOGGING</code></p></li><li><p><code>PRIMARY KEY LOGGING</code></p></li><li><p><code>UNIQUE KEY LOGGING</code></p></li><li><p><code>USER LOG GROUP</code></p></li></ul></li></ul></li><li><p><code>DBA_LOG_GROUP_COLUMNS</code>, <code>ALL_LOG_GROUP_COLUMNS</code>, and <code>USER_LOG_GROUP_COLUMNS</code> views</p><ul><li><p>The <code>LOGGING_PROPERTY</code> column</p><p>This column contains one of the following values:</p><ul><li><p><code>LOG</code> - indicates that this column in the log group will be supplementally logged</p></li><li><p><code>NO</code> <code>LOG</code> - indicates that this column in the log group will not be supplementally logged</p></li></ul></li></ul></li></ul><h2 id="steps-in-a-typical-logminer-session" tabindex="-1"><a class="header-anchor" href="#steps-in-a-typical-logminer-session" aria-hidden="true">#</a> Steps in a Typical LogMiner Session</h2><p>\u63CF\u8FF0\u5178\u578BLogMiner\u4F1A\u8BDD\u4E2D\u7684\u6B65\u9AA4\u3002</p><p>\u8981\u8FD0\u884CLogMiner\uFF0C\u53EF\u4EE5\u4F7F\u7528DBMS_LOGMNR PL/SQL\u5305\u3002\u6B64\u5916\uFF0C\u5982\u679C\u9009\u62E9\u63D0\u53D6LogMiner\u5B57\u5178\u800C\u4E0D\u662F\u4F7F\u7528\u8054\u673A\u7F16\u76EE\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528DBMS_LOGMNR_D\u5305\u3002</p><p>DBMS_LOGMNR\u5305\u5305\u542B\u7528\u4E8E\u521D\u59CB\u5316\u548C\u8FD0\u884CLogMiner\u7684\u8FC7\u7A0B\uFF0C\u5305\u62EC\u7528\u4E8E\u6307\u5B9A\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u540D\u79F0\u3001\u7B5B\u9009\u6761\u4EF6\u548C\u4F1A\u8BDD\u7279\u5F81\u7684\u63A5\u53E3\u3002DBMS_LOGMNR_D\u5305\u67E5\u8BE2\u5F53\u524D\u6570\u636E\u5E93\u7684\u6570\u636E\u5E93\u5B57\u5178\u8868\uFF0C\u4EE5\u521B\u5EFALogMiner\u5B57\u5178\u6587\u4EF6\u3002</p><p>ogMiner PL/SQL\u5305\u5C5E\u4E8ESYS\u6A21\u5F0F\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u60A8\u6CA1\u6709\u4F5C\u4E3A\u7528\u6237\u7CFB\u7EDF\u8FDE\u63A5\uFF0C\u5219:</p>',17),ie=t('<li><p>You must include <code>SYS</code> in your call. For example:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE SYS.DBMS_LOGMNR.END_LOGMNR\n```;\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>',1),le=n("p",null,[s("You must have been granted the "),n("code",null,"EXECUTE_CATALOG_ROLE"),s(" role.")],-1),pe=n("p",null,"See Also:",-1),ce={href:"https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&id=ARPLS022",target:"_blank",rel:"noopener noreferrer"},re=s("Oracle Database PL/SQL Packages and Types Reference"),de=s(" for details about syntax and parameters for these LogMiner packages"),ue={href:"https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&id=ADFNS1398",target:"_blank",rel:"noopener noreferrer"},ve=s("Oracle Database Development Guide"),me=s(" for more information about PL/SQL packages"),ke=t(`<h3 id="typical-logminer-session-task-1-enable-supplemental-logging" tabindex="-1"><a class="header-anchor" href="#typical-logminer-session-task-1-enable-supplemental-logging" aria-hidden="true">#</a> Typical LogMiner Session Task 1: Enable Supplemental Logging</h3><p>\u4F7F\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\u3002\u542F\u7528\u8981\u4F7F\u7528\u7684\u8F85\u52A9\u65E5\u5FD7\u8BB0\u5F55\u7C7B\u578B\u3002\u81F3\u5C11\uFF0C\u60A8\u5FC5\u987B\u542F\u7528\u6700\u4F4E\u9650\u5EA6\u7684\u8865\u5145\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> <span class="token keyword">ADD</span> SUPPLEMENTAL LOG <span class="token keyword">DATA</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="typical-logminer-session-task-2-extract-a-logminer-dictionary" tabindex="-1"><a class="header-anchor" href="#typical-logminer-session-task-2-extract-a-logminer-dictionary" aria-hidden="true">#</a> Typical LogMiner Session Task 2: Extract a LogMiner Dictionary</h3><p>\u63D0\u53D6LogMiner\u5B57\u5178\u3002\u8981\u4F7F\u7528LogMiner\uFF0C\u60A8\u5FC5\u987B\u901A\u8FC7\u4EE5\u4E0B\u64CD\u4F5C\u4E4B\u4E00\u4E3A\u5B83\u63D0\u4F9B\u4E00\u4E2A\u5B57\u5178:</p>`,5),be=s("Specify use of the online catalog by using the "),ge=n("code",null,"DICT_FROM_ONLINE_CATALOG",-1),he=s(" option when you start LogMiner. See "),Ee={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-1D510A2F-4CE8-4D69-AB18-CDD58FB3458C",title:"To direct LogMiner to use the dictionary currently in use for the database, specify the online catalog as your dictionary source when you start LogMiner.",target:"_blank",rel:"noopener noreferrer"},_e=s("Using the Online Catalog"),Le=s("."),Oe=s("Extract database dictionary information to the redo log files. See "),Te={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-A0D89906-C787-4EB4-BA47-171A457445EC",title:"To extract a LogMiner dictionary to the redo log files, the database must be open and in ARCHIVELOG mode and archiving must be enabled.",target:"_blank",rel:"noopener noreferrer"},Ne=s("Extracting a LogMiner Dictionary to the Redo Log Files"),Ae=s("."),Re=s("Extract database dictionary information to a flat file. See "),Se={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-DA37874F-6637-4205-AB5C-A8AC1914D018",title:"When the LogMiner dictionary is in a flat file, fewer system resources are used than when it is contained in the redo log files. Oracle recommends that you regularly back up the dictionary extract to ensure correct analysis of older redo log files.",target:"_blank",rel:"noopener noreferrer"},Me=s("Extracting the LogMiner Dictionary to a Flat File "),De=s("."),qe=t(`<h3 id="typical-logminer-session-task-3-specify-redo-log-files-for-analysis" tabindex="-1"><a class="header-anchor" href="#typical-logminer-session-task-3-specify-redo-log-files-for-analysis" aria-hidden="true">#</a> Typical LogMiner Session Task 3: Specify Redo Log Files for Analysis</h3><p>\u6307\u5B9A\u7528\u4E8E\u5206\u6790\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002\u5728\u542F\u52A8LogMiner\u4E4B\u524D\uFF0C\u5FC5\u987B\u6307\u5B9A\u8981\u5206\u6790\u7684\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002\u4E3A\u6B64\uFF0C\u6267\u884CDBMS_LOGMNR\u3002ADD_LOGFILE\u8FC7\u7A0B\uFF0C\u5982\u4E0B\u9762\u7684\u6B65\u9AA4\u6240\u793A\u3002\u60A8\u53EF\u4EE5\u6309\u4EFB\u4F55\u987A\u5E8F\u6DFB\u52A0\u548C\u5220\u9664\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u3002</p><p>Note:</p><p>If you are mining in the database instance that is generating the redo log files, then you only need to specify one of the following when you start LogMiner:</p><ul><li><p>The <code>STARTSCN</code> parameter</p></li><li><p>The <code>STARTTIME</code> parameter</p></li></ul><ol><li><p>Use SQL*Plus to start an Oracle instance, with the database either mounted or unmounted. For example, enter the <code>STARTUP</code> statement at the SQL prompt:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>STARTUP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Create a list of redo log files. Specify the <code>NEW</code> option of the <code>DBMS_LOGMNR.ADD_LOGFILE</code> PL/SQL procedure to signal that this is the beginning of a new list. For example, enter the following to specify the <code>/oracle/logs/log1.f</code> redo log file:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
   LOGFILENAME =&gt; &#39;/oracle/logs/log1.f&#39;, -
   OPTIONS =&gt; DBMS_LOGMNR.NEW);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>If desired, add more redo log files by specifying the <code>ADDFILE</code> option of the <code>DBMS_LOGMNR.ADD_LOGFILE</code> PL/SQL procedure. For example, enter the following to add the <code>/oracle/logs/log2.f</code> redo log file:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
   LOGFILENAME =&gt; &#39;/oracle/logs/log2.f&#39;, -
   OPTIONS =&gt; DBMS_LOGMNR.ADDFILE);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>OPTIONS</code> parameter is optional when you are adding additional redo log files. For example, you could simply enter the following:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
   LOGFILENAME=&gt;&#39;/oracle/logs/log2.f&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>If desired, remove redo log files by using the <code>DBMS_LOGMNR.REMOVE_LOGFILE </code>PL/SQL procedure. For example, enter the following to remove the <code>/oracle/logs/log2.f</code> redo log file:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.REMOVE_LOGFILE( -
   LOGFILENAME =&gt; &#39;/oracle/logs/log2.f&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="typical-logminer-session-task-4-start-logminer" tabindex="-1"><a class="header-anchor" href="#typical-logminer-session-task-4-start-logminer" aria-hidden="true">#</a> Typical LogMiner Session Task 4: Start LogMiner</h3><p>LogMiner\u5F00\u59CB\u3002\u521B\u5EFALogMiner\u5B57\u5178\u6587\u4EF6\u5E76\u6307\u5B9A\u8981\u5206\u6790\u54EA\u4E9B\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u4E4B\u540E\uFF0C\u5FC5\u987B\u542F\u52A8LogMiner\u3002\u91C7\u53D6\u4EE5\u4E0B\u6B65\u9AA4:</p>`,8),ye=t(`<p>Execute the <code>DBMS_LOGMNR.START_LOGMNR</code> procedure to start LogMiner.</p><p>Oracle recommends that you specify a LogMiner dictionary option. If you do not, then LogMiner cannot translate internal object identifiers and data types to object names and external data formats. Therefore, it would return internal object IDs and present data as binary data. Additionally, the <code>MINE_VALUE</code> and <code>COLUMN_PRESENT</code> functions cannot be used without a dictionary.</p><p>If you are specifying the name of a flat file LogMiner dictionary, then you must supply a fully qualified file name for the dictionary file. For example, to start LogMiner using <code>/oracle/database/dictionary.ora</code>, issue the following statement:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR( -
   DICTFILENAME =&gt;&#39;/oracle/database/dictionary.ora&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>If you are not specifying a flat file dictionary name, then use the <code>OPTIONS</code> parameter to specify either the <code>DICT_FROM_REDO_LOGS</code> or <code>DICT_FROM_ONLINE_CATALOG</code> option.</p>`,5),Ie=s("If you specify "),fe=n("code",null,"DICT_FROM_REDO_LOGS",-1),Ce=s(", then LogMiner expects to find a dictionary in the redo log files that you specified with the "),we=n("code",null,"DBMS_LOGMNR.ADD_LOGFILE",-1),Ge=s(" procedure. To determine which redo log files contain a dictionary, look at the "),Ue=n("code",null,"V$ARCHIVED_LOG",-1),xe=s(" view. See "),Pe={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-A0D89906-C787-4EB4-BA47-171A457445EC",title:"To extract a LogMiner dictionary to the redo log files, the database must be open and in ARCHIVELOG mode and archiving must be enabled.",target:"_blank",rel:"noopener noreferrer"},Be=s("Extracting a LogMiner Dictionary to the Redo Log Files"),Ye=s(" for an example."),Fe=n("p",null,"Note:",-1),Ve=n("p",null,[s("If you add additional redo log files after LogMiner has been started, you must restart LogMiner. LogMiner will not retain options that were included in the previous call to "),n("code",null,"DBMS_LOGMNR.START_LOGMNR"),s("; you must respecify the options you want to use. However, LogMiner will retain the dictionary specification from the previous call if you do not specify a dictionary in the current call to "),n("code",null,"DBMS_LOGMNR.START_LOGMNR"),s(".")],-1),He=s("For more information about the "),Qe=n("code",null,"DICT_FROM_ONLINE_CATALOG",-1),Xe=s(" option, see "),We={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-1D510A2F-4CE8-4D69-AB18-CDD58FB3458C",title:"To direct LogMiner to use the dictionary currently in use for the database, specify the online catalog as your dictionary source when you start LogMiner.",target:"_blank",rel:"noopener noreferrer"},$e=s("Using the Online Catalog"),Je=s("."),Ke=s("Optionally, you can filter your query by time or by SCN. See "),je={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-0AA13EFD-8118-4061-A215-9D3AF9EEB1D5",title:"To filter data by time, set the STARTTIME and ENDTIME parameters in the DBMS_LOGMNR.START_LOGMNR procedure.",target:"_blank",rel:"noopener noreferrer"},ze=s("Filtering Data by Time"),Ze=s(" or "),na={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-011AA230-32A7-4DE7-9DC0-CE1FF55CFAF3",title:"To filter data by SCN (system change number), use the STARTSCN and ENDSCN parameters to the PL/SQL DBMS_LOGMNR.START_LOGMNR procedure.",target:"_blank",rel:"noopener noreferrer"},sa=s("Filtering Data by SCN"),ea=s("."),aa=t(`<p>You can also use the <code>OPTIONS</code> parameter to specify additional characteristics of your LogMiner session. For example, you might decide to use the online catalog as your LogMiner dictionary and to have only committed transactions shown in the <code>V$LOGMNR_CONTENTS</code> view, as follows:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(OPTIONS =&gt; -
   DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG + -
   DBMS_LOGMNR.COMMITTED_DATA_ONLY);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),ta=s("For more information about "),oa=n("code",null,"DBMS_LOGMNR.START_LOGMNR",-1),ia=s(" options, see "),la={href:"https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&id=ARPLS022",target:"_blank",rel:"noopener noreferrer"},pa=s("Oracle Database PL/SQL Packages and Types Reference"),ca=s("."),ra=n("p",null,[s("You can execute the "),n("code",null,"DBMS_LOGMNR"),s("."),n("code",null,"START_LOGMNR"),s(" procedure multiple times, specifying different options each time. This can be useful, for example, if you did not get the desired results from a query of "),n("code",null,"V$LOGMNR_CONTENTS"),s(", and want to restart LogMiner with different options. Unless you need to respecify the LogMiner dictionary, you do not need to add redo log files if they were already added with a previous call to "),n("code",null,"DBMS_LOGMNR"),s("."),n("code",null,"START_LOGMNR"),s(".")],-1),da=n("h3",{id:"typical-logminer-session-task-5-query-v-logmnr-contents",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#typical-logminer-session-task-5-query-v-logmnr-contents","aria-hidden":"true"},"#"),s(" Typical LogMiner Session Task 5: Query V$LOGMNR_CONTENTS")],-1),ua=n("p",null,[s("Querying the "),n("code",null,"V$LOGMNR_CONTENTS"),s(" view.")],-1),va=s("At this point, LogMiner is started. You can perform queries against the "),ma=n("code",null,"V$LOGMNR_CONTENTS",-1),ka=s(" view. See"),ba={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-C659DAB0-03D0-4958-BB2F-E81C2928BE24",title:"LogMiner can potentially deal with large amounts of information. You can limit the information that is returned to the V$LOGMNR_CONTENTS view, and the speed at which it is returned.",target:"_blank",rel:"noopener noreferrer"},ga=s("Filtering and Formatting Data Returned to "),ha=n("code",null,"V$LOGMNR_CONTENTS",-1),Ea=s(" for examples of this."),_a=t(`<h3 id="typical-logminer-session-task-6-end-the-logminer-session" tabindex="-1"><a class="header-anchor" href="#typical-logminer-session-task-6-end-the-logminer-session" aria-hidden="true">#</a> Typical LogMiner Session Task 6: End the LogMiner Session</h3><p>Ending the LogMiner session.</p><p>To properly end a LogMiner session, use the <code>DBMS_LOGMNR.END_LOGMNR</code> PL/SQL procedure, as follows:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This procedure closes all the redo log files and allows all the database and system resources allocated by LogMiner to be released.</p><p>If this procedure is not executed, then LogMiner retains all its allocated resources until the end of the Oracle session in which it was called. It is particularly important to use this procedure to end the LogMiner session if either the <code>DDL_DICT_TRACKING</code> option or the <code>DICT_FROM_REDO_LOGS</code> option was used.</p><h2 id="examples-using-logminer" tabindex="-1"><a class="header-anchor" href="#examples-using-logminer" aria-hidden="true">#</a> Examples Using LogMiner</h2><p>This section provides several examples of using LogMiner.</p><p>Note:</p><p>All examples in this section assume that minimal supplemental logging has been enabled:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SQL&gt; ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,11),La=s("See "),Oa={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-D857AF96-AC24-4CA1-B620-8EA3DF30D72E",title:"Describes supplemental logging.",target:"_blank",rel:"noopener noreferrer"},Ta=s("Supplemental Logging"),Na=s(" for more information."),Aa=s("All examples, except "),Ra={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-97F5B369-A905-4BCF-AA7F-E9F932D3D14A",target:"_blank",rel:"noopener noreferrer"},Sa=s("Example 2: Mining the Redo Log Files in a Given SCN Range"),Ma=s(" and the "),Da={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-143798E2-B0E0-4E9D-A70C-08593A117027",title:"Examples of how to use LogMiner for typical scenarios.",target:"_blank",rel:"noopener noreferrer"},qa=s("Example Scenarios"),ya=s(", assume that the "),Ia=n("code",null,"NLS_DATE_FORMAT",-1),fa=s(" parameter has been set as follows:"),Ca=t(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SQL&gt;  ALTER SESSION SET NLS_DATE_FORMAT = &#39;dd-mon-yyyy hh24:mi:ss&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Because LogMiner displays date data using the setting for the <code>NLS_DATE_FORMAT</code> parameter that is active for the user session, this step is optional. However, setting the parameter explicitly lets you predict the date format.</p><h3 id="examples-of-mining-by-explicitly-specifying-the-redo-log-files-of-interest" tabindex="-1"><a class="header-anchor" href="#examples-of-mining-by-explicitly-specifying-the-redo-log-files-of-interest" aria-hidden="true">#</a> Examples of Mining by Explicitly Specifying the Redo Log Files of Interest</h3><p>Examples specifying redo log files.</p><p>These examples demonstrate how to use LogMiner when you know which redo log files contain the data of interest. These examples are best read sequentially, because each example builds on the example or examples that precede it.</p><p>The SQL output formatting may be different on your display than that shown in these examples.</p><h4 id="example-1-finding-all-modifications-in-the-last-archived-redo-log-file" tabindex="-1"><a class="header-anchor" href="#example-1-finding-all-modifications-in-the-last-archived-redo-log-file" aria-hidden="true">#</a> Example 1: Finding All Modifications in the Last Archived Redo Log File</h4><p>The easiest way to examine the modification history of a database is to mine at the source database and use the online catalog to translate the redo log files. This example shows how to do the simplest analysis using LogMiner.</p><p>This example assumes that you know you want to mine the redo log file that was most recently archived. It finds all modifications that are contained in the last archived redo log generated by the database (assuming that the database is not an Oracle Real Application Clusters (Oracle RAC) database).</p><ol><li>Determine which redo log file was most recently archived.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    SELECT NAME FROM V$ARCHIVED_LOG
       WHERE FIRST_TIME = (SELECT MAX(FIRST_TIME) FROM V$ARCHIVED_LOG);   
    NAME                            
    -------------------------------------------
    /usr/oracle/data/db1arch_1_16_482701534.dbf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Specify the list of redo log files to be analyzed. In this case, it is the redo log file that was returned by the query in Step 1.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
      LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_16_482701534.dbf&#39;, -
      OPTIONS =&gt; DBMS_LOGMNR.NEW);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Start LogMiner and specify the dictionary to use.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    EXECUTE DBMS_LOGMNR.START_LOGMNR( -
       OPTIONS =&gt; DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><p>Note that there are four transactions (two of them were committed within the redo log file being analyzed, and two were not). The output shows the DML statements in the order in which they were executed; thus transactions interleave among themselves.</p></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    SELECT username AS USR, (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; ||  XIDSQN) AS XID, 
       SQL_REDO, SQL_UNDO FROM V$LOGMNR_CONTENTS WHERE username IN (&#39;HR&#39;, &#39;OE&#39;);

    USR    XID          SQL_REDO                        SQL_UNDO
    ----   ---------  ----------------------------------------------------
    HR     1.11.1476  set transaction read write;

    HR     1.11.1476  insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;(     delete from &quot;HR&quot;.&quot;EMPLOYEES&quot; 
                      &quot;EMPLOYEE_ID&quot;,&quot;FIRST_NAME&quot;,       where &quot;EMPLOYEE_ID&quot; = &#39;306&#39;
                      &quot;LAST_NAME&quot;,&quot;EMAIL&quot;,              and &quot;FIRST_NAME&quot; = &#39;Nandini&#39;
                      &quot;PHONE_NUMBER&quot;,&quot;HIRE_DATE&quot;,       and &quot;LAST_NAME&quot; = &#39;Shastry&#39;
                      &quot;JOB_ID&quot;,&quot;SALARY&quot;,                and &quot;EMAIL&quot; = &#39;NSHASTRY&#39;
                      &quot;COMMISSION_PCT&quot;,&quot;MANAGER_ID&quot;,    and &quot;PHONE_NUMBER&quot; = &#39;1234567890&#39;
                      &quot;DEPARTMENT_ID&quot;) values           and &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-JAN-2012
                      (&#39;306&#39;,&#39;Nandini&#39;,&#39;Shastry&#39;,       13:34:43&#39;, &#39;dd-mon-yyyy hh24:mi:ss&#39;) 
                      &#39;NSHASTRY&#39;, &#39;1234567890&#39;,         and &quot;JOB_ID&quot; = &#39;HR_REP&#39; and 
                      TO_DATE(&#39;10-jan-2012 13:34:43&#39;,   &quot;SALARY&quot; = &#39;120000&#39; and 
                      &#39;dd-mon-yyyy hh24:mi:ss&#39;),         &quot;COMMISSION_PCT&quot; = &#39;.05&#39; and
                      &#39;HR_REP&#39;,&#39;120000&#39;, &#39;.05&#39;,         &quot;DEPARTMENT_ID&quot; = &#39;10&#39; and
                      &#39;105&#39;,&#39;10&#39;);                      ROWID = &#39;AAAHSkAABAAAY6rAAO&#39;;

    OE     1.1.1484   set transaction read write;

    OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot; 
                      set &quot;WARRANTY_PERIOD&quot; =            set &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+05-00&#39;) where      TO_YMINTERVAL(&#39;+01-00&#39;) where
                      &quot;PRODUCT_ID&quot; = &#39;1799&#39; and          &quot;PRODUCT_ID&quot; = &#39;1799&#39; and
                      &quot;WARRANTY_PERIOD&quot; =                &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+01-00&#39;) and        TO_YMINTERVAL(&#39;+05-00&#39;) and
                      ROWID = &#39;AAAHTKAABAAAY9mAAB&#39;;      ROWID = &#39;AAAHTKAABAAAY9mAAB&#39;; 

    OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                      set &quot;WARRANTY_PERIOD&quot; =            set &quot;WARRANTY_PERIOD&quot; =
                      TO_YMINTERVAL(&#39;+05-00&#39;) where      TO_YMINTERVAL(&#39;+01-00&#39;) where
                      &quot;PRODUCT_ID&quot; = &#39;1801&#39; and          &quot;PRODUCT_ID&quot; = &#39;1801&#39; and
                      &quot;WARRANTY_PERIOD&quot; =                &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+01-00&#39;) and        TO_YMINTERVAL(&#39;+05-00&#39;) and
                      ROWID = &#39;AAAHTKAABAAAY9mAAC&#39;;      ROWID =&#39;AAAHTKAABAAAY9mAAC&#39;;

    HR     1.11.1476  insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;(     delete from &quot;HR&quot;.&quot;EMPLOYEES&quot;
                      &quot;EMPLOYEE_ID&quot;,&quot;FIRST_NAME&quot;,       &quot;EMPLOYEE_ID&quot; = &#39;307&#39; and 
                      &quot;LAST_NAME&quot;,&quot;EMAIL&quot;,              &quot;FIRST_NAME&quot; = &#39;John&#39; and
                      &quot;PHONE_NUMBER&quot;,&quot;HIRE_DATE&quot;,       &quot;LAST_NAME&quot; = &#39;Silver&#39; and
                      &quot;JOB_ID&quot;,&quot;SALARY&quot;,                &quot;EMAIL&quot; = &#39;JSILVER&#39; and 
                      &quot;COMMISSION_PCT&quot;,&quot;MANAGER_ID&quot;,    &quot;PHONE_NUMBER&quot; = &#39;5551112222&#39;
                      &quot;DEPARTMENT_ID&quot;) values           and &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-jan-2012
                      (&#39;307&#39;,&#39;John&#39;,&#39;Silver&#39;,           13:41:03&#39;, &#39;dd-mon-yyyy hh24:mi:ss&#39;) 
                       &#39;JSILVER&#39;, &#39;5551112222&#39;,         and &quot;JOB_ID&quot; =&#39;105&#39; and &quot;DEPARTMENT_ID&quot; 
                      TO_DATE(&#39;10-jan-2012 13:41:03&#39;,   = &#39;50&#39; and ROWID = &#39;AAAHSkAABAAAY6rAAP&#39;; 
                      &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                      &#39;SH_CLERK&#39;,&#39;110000&#39;, &#39;.05&#39;,
                      &#39;105&#39;,&#39;50&#39;);                

    OE     1.1.1484   commit;

    HR     1.15.1481   set transaction read write;

    HR     1.15.1481  delete from &quot;HR&quot;.&quot;EMPLOYEES&quot;      insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;(
                      where &quot;EMPLOYEE_ID&quot; = &#39;205&#39; and   &quot;EMPLOYEE_ID&quot;,&quot;FIRST_NAME&quot;,
                      &quot;FIRST_NAME&quot; = &#39;Shelley&#39; and      &quot;LAST_NAME&quot;,&quot;EMAIL&quot;,&quot;PHONE_NUMBER&quot;,
                      &quot;LAST_NAME&quot; = &#39;Higgins&#39; and       &quot;HIRE_DATE&quot;, &quot;JOB_ID&quot;,&quot;SALARY&quot;,
                      &quot;EMAIL&quot; = &#39;SHIGGINS&#39; and          &quot;COMMISSION_PCT&quot;,&quot;MANAGER_ID&quot;,
                      &quot;PHONE_NUMBER&quot; = &#39;515.123.8080&#39;   &quot;DEPARTMENT_ID&quot;) values
                      and &quot;HIRE_DATE&quot; = TO_DATE(        (&#39;205&#39;,&#39;Shelley&#39;,&#39;Higgins&#39;,
                      &#39;07-jun-1994 10:05:01&#39;,           and     &#39;SHIGGINS&#39;,&#39;515.123.8080&#39;,
                      &#39;dd-mon-yyyy hh24:mi:ss&#39;)         TO_DATE(&#39;07-jun-1994 10:05:01&#39;,
                      and &quot;JOB_ID&quot; = &#39;AC_MGR&#39;           &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                      and &quot;SALARY&quot;= &#39;12000&#39;            &#39;AC_MGR&#39;,&#39;12000&#39;,NULL,&#39;101&#39;,&#39;110&#39;); 
                      and &quot;COMMISSION_PCT&quot; IS NULL 
                      and &quot;MANAGER_ID&quot; 
                      = &#39;101&#39; and &quot;DEPARTMENT_ID&quot; = 
                      &#39;110&#39; and ROWID = 
                      &#39;AAAHSkAABAAAY6rAAM&#39;;

    OE     1.8.1484   set transaction read write;

    OE     1.8.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                      set &quot;WARRANTY_PERIOD&quot; =            set &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+12-06&#39;) where      TO_YMINTERVAL(&#39;+20-00&#39;) where
                      &quot;PRODUCT_ID&quot; = &#39;2350&#39; and          &quot;PRODUCT_ID&quot; = &#39;2350&#39; and
                      &quot;WARRANTY_PERIOD&quot; =                &quot;WARRANTY_PERIOD&quot; =
                      TO_YMINTERVAL(&#39;+20-00&#39;) and        TO_YMINTERVAL(&#39;+20-00&#39;) and
                      ROWID = &#39;AAAHTKAABAAAY9tAAD&#39;;       ROWID =&#39;AAAHTKAABAAAY9tAAD&#39;; 

    HR     1.11.1476  commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>End the LogMiner session.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    SQL&gt; EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="example-2-grouping-dml-statements-into-committed-transactions" tabindex="-1"><a class="header-anchor" href="#example-2-grouping-dml-statements-into-committed-transactions" aria-hidden="true">#</a> Example 2: Grouping DML Statements into Committed Transactions</h4>`,21),wa=s("As shown in the first example, "),Ga={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-E3820793-B482-48C4-9F44-C0D7A062E318",target:"_blank",rel:"noopener noreferrer"},Ua=s("Example 1: Finding All Modifications in the Last Archived Redo Log File"),xa=s(", LogMiner displays all modifications it finds in the redo log files that it analyzes by default, regardless of whether the transaction has been committed or not. In addition, LogMiner shows modifications in the same order in which they were executed. Because DML statements that belong to the same transaction are not grouped together, visual inspection of the output can be difficult. Although you can use SQL to group transactions, LogMiner provides an easier way. In this example, the latest archived redo log file will again be analyzed, but it will return only committed transactions."),Pa=t(`<ol><li>Determine which redo log file was most recently archived by the database.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    SELECT NAME FROM V$ARCHIVED_LOG
       WHERE FIRST_TIME = (SELECT MAX(FIRST_TIME) FROM V$ARCHIVED_LOG);

    NAME                            
    -------------------------------------------
    /usr/oracle/data/db1arch_1_16_482701534.dbf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Specify the redo log file that was returned by the query in Step 1. The list will consist of one redo log file.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
       LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_16_482701534.dbf&#39;, -
       OPTIONS =&gt; DBMS_LOGMNR.NEW);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Start LogMiner by specifying the dictionary to use and the <code>COMMITTED_DATA_ONLY</code> option.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
       LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_16_482701534.dbf&#39;, -
       OPTIONS =&gt; DBMS_LOGMNR.NEW);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),Ba={start:"4"},Ya=n("p",null,[s("Query the "),n("code",null,"V$LOGMNR_CONTENTS"),s(" view.")],-1),Fa=s("Although transaction 1.11.1476 was started before transaction 1.1.1484 (as revealed in "),Va={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-E3820793-B482-48C4-9F44-C0D7A062E318",target:"_blank",rel:"noopener noreferrer"},Ha=s("Example 1: Finding All Modifications in the Last Archived Redo Log File"),Qa=s("), it committed after transaction 1.1.1484 committed. In this example, therefore, transaction 1.1.1484 is shown in its entirety before transaction 1.11.1476. The two transactions that did not commit within the redo log file being analyzed are not returned."),Xa=t(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    SELECT username AS USR, (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; ||  XIDSQN) AS XID, SQL_REDO, 
       SQL_UNDO FROM V$LOGMNR_CONTENTS WHERE username IN (&#39;HR&#39;, &#39;OE&#39;);
    ;
    USR    XID          SQL_REDO                        SQL_UNDO
    ----   ---------    ------------------------------- ---------------------------------

    OE     1.1.1484   set transaction read write;

    OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot; 
                      set &quot;WARRANTY_PERIOD&quot; =            set &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+05-00&#39;) where      TO_YMINTERVAL(&#39;+01-00&#39;) where
                      &quot;PRODUCT_ID&quot; = &#39;1799&#39; and          &quot;PRODUCT_ID&quot; = &#39;1799&#39; and
                      &quot;WARRANTY_PERIOD&quot; =                &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+01-00&#39;) and        TO_YMINTERVAL(&#39;+05-00&#39;) and
                      ROWID = &#39;AAAHTKAABAAAY9mAAB&#39;;      ROWID = &#39;AAAHTKAABAAAY9mAAB&#39;; 

    OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                      set &quot;WARRANTY_PERIOD&quot; =            set &quot;WARRANTY_PERIOD&quot; =
                      TO_YMINTERVAL(&#39;+05-00&#39;) where      TO_YMINTERVAL(&#39;+01-00&#39;) where
                      &quot;PRODUCT_ID&quot; = &#39;1801&#39; and          &quot;PRODUCT_ID&quot; = &#39;1801&#39; and
                      &quot;WARRANTY_PERIOD&quot; =                &quot;WARRANTY_PERIOD&quot; = 
                      TO_YMINTERVAL(&#39;+01-00&#39;) and        TO_YMINTERVAL(&#39;+05-00&#39;) and
                      ROWID = &#39;AAAHTKAABAAAY9mAAC&#39;;      ROWID =&#39;AAAHTKAABAAAY9mAAC&#39;;

    OE     1.1.1484   commit;

    HR     1.11.1476  set transaction read write;

    HR     1.11.1476  insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;(     delete from &quot;HR&quot;.&quot;EMPLOYEES&quot; 
                      &quot;EMPLOYEE_ID&quot;,&quot;FIRST_NAME&quot;,       where &quot;EMPLOYEE_ID&quot; = &#39;306&#39;
                      &quot;LAST_NAME&quot;,&quot;EMAIL&quot;,              and &quot;FIRST_NAME&quot; = &#39;Nandini&#39;
                      &quot;PHONE_NUMBER&quot;,&quot;HIRE_DATE&quot;,       and &quot;LAST_NAME&quot; = &#39;Shastry&#39;
                      &quot;JOB_ID&quot;,&quot;SALARY&quot;,                and &quot;EMAIL&quot; = &#39;NSHASTRY&#39;
                      &quot;COMMISSION_PCT&quot;,&quot;MANAGER_ID&quot;,    and &quot;PHONE_NUMBER&quot; = &#39;1234567890&#39;
                      &quot;DEPARTMENT_ID&quot;) values           and &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-JAN-2012
                      (&#39;306&#39;,&#39;Nandini&#39;,&#39;Shastry&#39;,       13:34:43&#39;, &#39;dd-mon-yyyy hh24:mi:ss&#39;) 
                      &#39;NSHASTRY&#39;, &#39;1234567890&#39;,         and &quot;JOB_ID&quot; = &#39;HR_REP&#39; and 
                      TO_DATE(&#39;10-jan-2012 13:34:43&#39;,   &quot;SALARY&quot; = &#39;120000&#39; and 
                      &#39;dd-mon-yyy hh24:mi:ss&#39;),         &quot;COMMISSION_PCT&quot; = &#39;.05&#39; and
                      &#39;HR_REP&#39;,&#39;120000&#39;, &#39;.05&#39;,         &quot;DEPARTMENT_ID&quot; = &#39;10&#39; and
                      &#39;105&#39;,&#39;10&#39;);                      ROWID = &#39;AAAHSkAABAAAY6rAAO&#39;;

    HR     1.11.1476  insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;(     delete from &quot;HR&quot;.&quot;EMPLOYEES&quot;
                      &quot;EMPLOYEE_ID&quot;,&quot;FIRST_NAME&quot;,       &quot;EMPLOYEE_ID&quot; = &#39;307&#39; and 
                      &quot;LAST_NAME&quot;,&quot;EMAIL&quot;,              &quot;FIRST_NAME&quot; = &#39;John&#39; and
                      &quot;PHONE_NUMBER&quot;,&quot;HIRE_DATE&quot;,       &quot;LAST_NAME&quot; = &#39;Silver&#39; and
                      &quot;JOB_ID&quot;,&quot;SALARY&quot;,                &quot;EMAIL&quot; = &#39;JSILVER&#39; and 
                      &quot;COMMISSION_PCT&quot;,&quot;MANAGER_ID&quot;,    &quot;PHONE_NUMBER&quot; = &#39;5551112222&#39;
                      &quot;DEPARTMENT_ID&quot;) values           and &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-jan-2012
                      (&#39;307&#39;,&#39;John&#39;,&#39;Silver&#39;,           13:41:03&#39;, &#39;dd-mon-yyyy hh24:mi:ss&#39;) 
                       &#39;JSILVER&#39;, &#39;5551112222&#39;,         and &quot;JOB_ID&quot; =&#39;105&#39; and &quot;DEPARTMENT_ID&quot; 
                      TO_DATE(&#39;10-jan-2012 13:41:03&#39;,   = &#39;50&#39; and ROWID = &#39;AAAHSkAABAAAY6rAAP&#39;; 
                      &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                      &#39;SH_CLERK&#39;,&#39;110000&#39;, &#39;.05&#39;,
                      &#39;105&#39;,&#39;50&#39;);                

    HR     1.11.1476  commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>End the LogMiner session.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="example-3-formatting-the-reconstructed-sql" tabindex="-1"><a class="header-anchor" href="#example-3-formatting-the-reconstructed-sql" aria-hidden="true">#</a> Example 3: Formatting the Reconstructed SQL</h4>`,4),Wa=s("As shown in "),$a={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-9CCAC3BD-EF59-4370-BAA8-5451082577A0",target:"_blank",rel:"noopener noreferrer"},Ja=s("Example 2: Grouping DML Statements into Committed Transactions "),Ka=s(", using the "),ja=n("code",null,"COMMITTED_DATA_ONLY",-1),za=s(" option with the dictionary in the online redo log file is an easy way to focus on committed transactions. However, one aspect remains that makes visual inspection difficult: the association between the column names and their respective values in an "),Za=n("code",null,"INSERT",-1),nt=s(" statement are not apparent. This can be addressed by specifying the "),st=n("code",null,"PRINT_PRETTY_SQL",-1),et=s(" option. Note that specifying this option will make some of the reconstructed SQL statements nonexecutable."),at=t(`<ol><li>Determine which redo log file was most recently archived.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    SELECT NAME FROM V$ARCHIVED_LOG
       WHERE FIRST_TIME = (SELECT MAX(FIRST_TIME) FROM V$ARCHIVED_LOG);

    NAME                            
    -------------------------------------------
    /usr/oracle/data/db1arch_1_16_482701534.dbf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Specify the redo log file that was returned by the query in Step 1.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
       LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_16_482701534.dbf&#39;, -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><p>Start LogMiner by specifying the dictionary to use and the <code>COMMITTED_DATA_ONLY</code> and <code>PRINT_PRETTY_SQL</code> options.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
   OPTIONS =&gt; DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG + -
              DBMS_LOGMNR.COMMITTED_DATA_ONLY + -
              DBMS_LOGMNR.PRINT_PRETTY_SQL);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>DBMS_LOGMNR.PRINT_PRETTY_SQL</code> option changes only the format of the reconstructed SQL, and therefore is useful for generating reports for visual inspection.</p></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view for <code>SQL_REDO</code> statements.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT username AS USR, (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; ||  XIDSQN) AS XID, SQL_REDO 
   FROM V$LOGMNR_CONTENTS;

USR    XID          SQL_REDO                     
----   ---------  -----------------------------------------------------

OE     1.1.1484   set transaction read write;

OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  
                    set 
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) 
                    where
                      &quot;PRODUCT_ID&quot; = &#39;1799&#39; and          
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+01-00&#39;) and        
                      ROWID = &#39;AAAHTKAABAAAY9mAAB&#39;;  

OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                    set 
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) 
                    where
                      &quot;PRODUCT_ID&quot; = &#39;1801&#39; and
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+01-00&#39;) and   
                      ROWID = &#39;AAAHTKAABAAAY9mAAC&#39;; 

OE     1.1.1484   commit;

HR     1.11.1476  set transaction read write;

HR     1.11.1476  insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;
                   values
                     &quot;EMPLOYEE_ID&quot; = 306,
                     &quot;FIRST_NAME&quot; = &#39;Nandini&#39;,
                     &quot;LAST_NAME&quot; = &#39;Shastry&#39;,
                     &quot;EMAIL&quot; = &#39;NSHASTRY&#39;,
                     &quot;PHONE_NUMBER&quot; = &#39;1234567890&#39;,
                     &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-jan-2012 13:34:43&#39;, 
                     &#39;dd-mon-yyyy hh24:mi:ss&#39;,
                     &quot;JOB_ID&quot; = &#39;HR_REP&#39;,
                     &quot;SALARY&quot; = 120000,
                     &quot;COMMISSION_PCT&quot; = .05,
                     &quot;MANAGER_ID&quot; = 105,
                     &quot;DEPARTMENT_ID&quot; = 10;

HR     1.11.1476   insert into &quot;HR&quot;.&quot;EMPLOYEES&quot;
                    values
                       &quot;EMPLOYEE_ID&quot; = 307,
                       &quot;FIRST_NAME&quot; = &#39;John&#39;,
                       &quot;LAST_NAME&quot; = &#39;Silver&#39;,
                       &quot;EMAIL&quot; = &#39;JSILVER&#39;,
                       &quot;PHONE_NUMBER&quot; = &#39;5551112222&#39;,
                       &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-jan-2012 13:41:03&#39;,
                       &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                       &quot;JOB_ID&quot; = &#39;SH_CLERK&#39;,
                       &quot;SALARY&quot; = 110000,
                       &quot;COMMISSION_PCT&quot; = .05,
                       &quot;MANAGER_ID&quot; = 105,
                       &quot;DEPARTMENT_ID&quot; = 50;
HR     1.11.1476    commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view for reconstructed <code>SQL_UNDO</code> statements.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT username AS USR, (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; ||  XIDSQN) AS XID, SQL_UNDO 
   FROM V$LOGMNR_CONTENTS;

USR   XID        SQL_UNDO                     
----   ---------  -----------------------------------------------------


OE     1.1.1484   set transaction read write;

OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;  
                    set 
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+01-00&#39;) 
                    where
                      &quot;PRODUCT_ID&quot; = &#39;1799&#39; and          
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and        
                      ROWID = &#39;AAAHTKAABAAAY9mAAB&#39;;  

OE     1.1.1484   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                    set 
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+01-00&#39;) 
                    where
                      &quot;PRODUCT_ID&quot; = &#39;1801&#39; and
                      &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and   
                      ROWID = &#39;AAAHTKAABAAAY9mAAC&#39;; 

OE     1.1.1484   commit;

HR     1.11.1476  set transaction read write;

HR     1.11.1476  delete from &quot;HR&quot;.&quot;EMPLOYEES&quot;
                  where
                     &quot;EMPLOYEE_ID&quot; = 306 and
                     &quot;FIRST_NAME&quot; = &#39;Nandini&#39; and
                     &quot;LAST_NAME&quot; = &#39;Shastry&#39; and
                     &quot;EMAIL&quot; = &#39;NSHASTRY&#39; and
                     &quot;PHONE_NUMBER&quot; = &#39;1234567890&#39; and
                     &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-jan-2012 13:34:43&#39;,
                     &#39;dd-mon-yyyy hh24:mi:ss&#39;) and
                     &quot;JOB_ID&quot; = &#39;HR_REP&#39; and 
                     &quot;SALARY&quot; = 120000 and
                     &quot;COMMISSION_PCT&quot; = .05 and
                     &quot;MANAGER_ID&quot; = 105 and
                     &quot;DEPARTMENT_ID&quot; = 10 and
                     ROWID = &#39;AAAHSkAABAAAY6rAAO&#39;;

HR     1.11.1476   delete from &quot;HR&quot;.&quot;EMPLOYEES&quot;
                   where
                       &quot;EMPLOYEE_ID&quot; = 307 and
                       &quot;FIRST_NAME&quot; = &#39;John&#39; and
                       &quot;LAST_NAME&quot; = &#39;Silver&#39; and
                       &quot;EMAIL&quot; = &#39;JSILVER&#39; and
                       &quot;PHONE_NUMBER&quot; = &#39;555122122&#39; and
                       &quot;HIRE_DATE&quot; = TO_DATE(&#39;10-jan-2012 13:41:03&#39;,
                       &#39;dd-mon-yyyy hh24:mi:ss&#39;) and
                       &quot;JOB_ID&quot; = &#39;SH_CLERK&#39; and
                       &quot;SALARY&quot; = 110000 and
                       &quot;COMMISSION_PCT&quot; = .05 and
                       &quot;MANAGER_ID&quot; = 105 and
                       &quot;DEPARTMENT_ID&quot; = 50 and
                       ROWID = &#39;AAAHSkAABAAAY6rAAP&#39;; 
HR     1.11.1476    commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h4 id="example-4-using-the-logminer-dictionary-in-the-redo-log-files" tabindex="-1"><a class="header-anchor" href="#example-4-using-the-logminer-dictionary-in-the-redo-log-files" aria-hidden="true">#</a> Example 4: Using the LogMiner Dictionary in the Redo Log Files</h4><p>This example shows how to use the dictionary that has been extracted to the redo log files. When you use the dictionary in the online catalog, you must mine the redo log files in the same database that generated them. Using the dictionary contained in the redo log files enables you to mine redo log files in a different database.</p><ol><li><p>Determine which redo log file was most recently archived by the database.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, SEQUENCE# FROM V$ARCHIVED_LOG
   WHERE FIRST_TIME = (SELECT MAX(FIRST_TIME) FROM V$ARCHIVED_LOG);

NAME                                           SEQUENCE#
--------------------------------------------   --------------
/usr/oracle/data/db1arch_1_210_482701534.dbf   210
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>The dictionary may be contained in more than one redo log file. Therefore, you need to determine which redo log files contain the start and end of the dictionary. Query the <code>V$ARCHIVED_LOG</code> view, as follows:</p><ol><li><p>Find a redo log file that contains the end of the dictionary extract. This redo log file must have been created before the redo log file that you want to analyze, but should be as recent as possible.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, SEQUENCE#, DICTIONARY_BEGIN d_beg, DICTIONARY_END d_end
   FROM V$ARCHIVED_LOG
   WHERE SEQUENCE# = (SELECT MAX (SEQUENCE#) FROM V$ARCHIVED_LOG
   WHERE DICTIONARY_END = &#39;YES&#39; and SEQUENCE# &lt;= 210);

NAME                                           SEQUENCE#    D_BEG  D_END
--------------------------------------------   ----------   -----  ------
/usr/oracle/data/db1arch_1_208_482701534.dbf   208          NO     YES
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Find the redo log file that contains the start of the data dictionary extract that matches the end of the dictionary found in the previous step:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, SEQUENCE#, DICTIONARY_BEGIN d_beg, DICTIONARY_END d_end
   FROM V$ARCHIVED_LOG
   WHERE SEQUENCE# = (SELECT MAX (SEQUENCE#) FROM V$ARCHIVED_LOG
   WHERE DICTIONARY_BEGIN = &#39;YES&#39; and SEQUENCE# &lt;= 208);

NAME                                           SEQUENCE#    D_BEG  D_END
--------------------------------------------   ----------   -----  ------
/usr/oracle/data/db1arch_1_207_482701534.dbf   207          YES     NO
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Specify the list of the redo log files of interest. Add the redo log files that contain the start and end of the dictionary and the redo log file that you want to analyze. You can add the redo log files in any order.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_210_482701534.dbf&#39;, -
       OPTIONS =&gt; DBMS_LOGMNR.NEW);
EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_208_482701534.dbf&#39;);
EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_207_482701534.dbf&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_LOGS</code> view to display the list of redo log files to be analyzed, including their timestamps.</p><p>In the output, LogMiner flags a missing redo log file. LogMiner lets you proceed with mining, provided that you do not specify an option that requires the missing redo log file for proper functioning.</p></li></ol></li><li><p>Start LogMiner by specifying the dictionary to use and the <code>COMMITTED_DATA_ONLY</code> and <code>PRINT_PRETTY_SQL</code> options.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
   OPTIONS =&gt; DBMS_LOGMNR.DICT_FROM_REDO_LOGS + -
              DBMS_LOGMNR.COMMITTED_DATA_ONLY + -
              DBMS_LOGMNR.PRINT_PRETTY_SQL);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><p>To reduce the number of rows returned by the query, exclude from the query all DML statements done in the <code>SYS</code> or <code>SYSTEM</code> schemas. (This query specifies a timestamp to exclude transactions that were involved in the dictionary extraction.)</p><p>The output shows three transactions: two DDL transactions and one DML transaction. The DDL transactions, 1.2.1594 and 1.18.1602, create the table <code>oe.product_tracking</code> and create a trigger on table <code>oe.product_information</code>, respectively. In both transactions, the DML statements done to the system tables (tables owned by <code>SYS</code>) are filtered out because of the query predicate.</p><p>The DML transaction, 1.9.1598, updates the <code>oe.product_information</code> table. The update operation in this transaction is fully translated. However, the query output also contains some untranslated reconstructed SQL statements. Most likely, these statements were done on the <code>oe.product_tracking</code> table that was created after the data dictionary was extracted to the redo log files.</p><p>(The next example shows how to run LogMiner with the <code>DDL_DICT_TRACKING</code> option so that all SQL statements are fully translated; no binary data is returned.)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT USERNAME AS usr, SQL_REDO FROM V$LOGMNR_CONTENTS 
   WHERE SEG_OWNER IS NULL OR SEG_OWNER NOT IN (&#39;SYS&#39;, &#39;SYSTEM&#39;) AND
   TIMESTAMP &gt; &#39;10-jan-2012 15:59:53&#39;;

USR             XID         SQL_REDO
---             --------    -----------------------------------
SYS             1.2.1594    set transaction read write;
SYS             1.2.1594    create table oe.product_tracking (product_id number not null,
                            modified_time date,
                            old_list_price number(8,2),
                            old_warranty_period interval year(2) to month);
SYS             1.2.1594    commit;

SYS             1.18.1602   set transaction read write;
SYS             1.18.1602   create or replace trigger oe.product_tracking_trigger
                            before update on oe.product_information
                            for each row
                            when (new.list_price &lt;&gt; old.list_price or
                                  new.warranty_period &lt;&gt; old.warranty_period)
                            declare
                            begin
                            insert into oe.product_tracking values 
                               (:old.product_id, sysdate,
                                :old.list_price, :old.warranty_period);
                            end;
SYS             1.18.1602   commit;

OE              1.9.1598    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                              set
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+08-00&#39;),
                                &quot;LIST_PRICE&quot; = 100
                              where
                                &quot;PRODUCT_ID&quot; = 1729 and
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and
                                &quot;LIST_PRICE&quot; = 80 and
                                ROWID = &#39;AAAHTKAABAAAY9yAAA&#39;;

OE              1.9.1598    insert into &quot;UNKNOWN&quot;.&quot;OBJ# 33415&quot;
                              values
                                &quot;COL 1&quot; = HEXTORAW(&#39;c2121e&#39;),
                                &quot;COL 2&quot; = HEXTORAW(&#39;7867010d110804&#39;),
                                &quot;COL 3&quot; = HEXTORAW(&#39;c151&#39;),
                                &quot;COL 4&quot; = HEXTORAW(&#39;800000053c&#39;);

OE              1.9.1598    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                              set
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+08-00&#39;),
                                &quot;LIST_PRICE&quot; = 92
                              where
                                &quot;PRODUCT_ID&quot; = 2340 and
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and
                                &quot;LIST_PRICE&quot; = 72 and
                                ROWID = &#39;AAAHTKAABAAAY9zAAA&#39;;

OE              1.9.1598    insert into &quot;UNKNOWN&quot;.&quot;OBJ# 33415&quot;
                              values
                                &quot;COL 1&quot; = HEXTORAW(&#39;c21829&#39;),
                                &quot;COL 2&quot; = HEXTORAW(&#39;7867010d110808&#39;),
                                &quot;COL 3&quot; = HEXTORAW(&#39;c149&#39;),
                                &quot;COL 4&quot; = HEXTORAW(&#39;800000053c&#39;);

OE              1.9.1598     commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Issue additional queries, if desired.</p><p>Display all the DML statements that were executed as part of the <code>CREATE TABLE</code> DDL statement. This includes statements executed by users and internally by Oracle.</p><p>Note:</p><p>If you choose to reapply statements displayed by a query such as the one shown here, then reapply DDL statements only. Do not reapply DML statements that were executed internally by Oracle, or you risk corrupting your database. In the following output, the only statement that you should use in a reapply operation is the <code>CREATE TABLE OE.PRODUCT_TRACKING</code> statement.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> SQL_REDO <span class="token keyword">FROM</span> V$LOGMNR_CONTENTS
   <span class="token keyword">WHERE</span> XIDUSN  <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span> XIDSLT <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">and</span> XIDSQN <span class="token operator">=</span> <span class="token number">1594</span><span class="token punctuation">;</span>

SQL_REDO
<span class="token comment">--------------------------------------------------------------------------------</span>
<span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">read</span> <span class="token keyword">write</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;OBJ$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DATAOBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OWNER#&quot;</span> <span class="token operator">=</span> <span class="token number">37</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAME&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;PRODUCT_TRACKING&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAMESPACE&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SUBNAME&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CTIME&quot;</span> <span class="token operator">=</span> TO_DATE<span class="token punctuation">(</span><span class="token string">&#39;13-jan-2012 14:01:03&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dd-mon-yyyy hh24:mi:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MTIME&quot;</span> <span class="token operator">=</span> TO_DATE<span class="token punctuation">(</span><span class="token string">&#39;13-jan-2012 14:01:03&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dd-mon-yyyy hh24:mi:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;STIME&quot;</span> <span class="token operator">=</span> TO_DATE<span class="token punctuation">(</span><span class="token string">&#39;13-jan-2012 14:01:03&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dd-mon-yyyy hh24:mi:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;STATUS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;REMOTEOWNER&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LINKNAME&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FLAGS&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OID$&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;TAB$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DATAOBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TS#&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FILE#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BLOCK#&quot;</span> <span class="token operator">=</span> <span class="token number">121034</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BOBJ#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TAB#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COLS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CLUCOLS&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PCTFREE$&quot;</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PCTUSED$&quot;</span> <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INITRANS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MAXTRANS&quot;</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FLAGS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;AUDIT$&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;--------------------------------------&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ROWCNT&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BLKCNT&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;EMPCNT&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;AVGSPC&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHNCNT&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;AVGRLN&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;AVGSPC_FLB&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FLBCNT&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ANALYZETIME&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SAMPLESIZE&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEGREE&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INSTANCES&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOLS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;KERNELCOLS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PROPERTY&quot;</span> <span class="token operator">=</span> <span class="token number">536870912</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TRIGFLAG&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">178</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">=</span> TO_DATE<span class="token punctuation">(</span><span class="token string">&#39;13-jan-2012 14:01:05&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dd-mon-yyyy hh24:mi:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;COL$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COL#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOLLENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OFFSET&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAME&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;PRODUCT_ID&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FIXEDSTORAGE&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PRECISION#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SCALE&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NULL$&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFLENGTH&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PROPERTY&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETID&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETFORM&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFAULT$&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;COL$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COL#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOLLENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OFFSET&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAME&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;MODIFIED_TIME&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FIXEDSTORAGE&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PRECISION#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SCALE&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NULL$&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFLENGTH&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PROPERTY&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETID&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETFORM&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFAULT$&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;COL$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COL#&quot;</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOLLENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OFFSET&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAME&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;OLD_LIST_PRICE&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FIXEDSTORAGE&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PRECISION#&quot;</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SCALE&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NULL$&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFLENGTH&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PROPERTY&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETID&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETFORM&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFAULT$&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;COL$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COL#&quot;</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SEGCOLLENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;OFFSET&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAME&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;OLD_WARRANTY_PERIOD&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">182</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FIXEDSTORAGE&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PRECISION#&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SCALE&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NULL$&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFLENGTH&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PROPERTY&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETID&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CHARSETFORM&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFAULT$&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CCOL$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CON#&quot;</span> <span class="token operator">=</span> <span class="token number">2090</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COL#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;POS#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOL#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CDEF$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OBJ#&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CON#&quot;</span> <span class="token operator">=</span> <span class="token number">2090</span><span class="token punctuation">,</span>
    <span class="token string">&quot;COLS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ROBJ#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RCON#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RRULES&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MATCH#&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;REFACT&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ENABLED&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CONDLENGTH&quot;</span> <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INTCOLS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MTIME&quot;</span> <span class="token operator">=</span> TO_DATE<span class="token punctuation">(</span><span class="token string">&#39;13-jan-2012 14:01:08&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dd-mon-yyyy hh24:mi:ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFER&quot;</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CONDITION&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;&quot;PRODUCT_ID&quot; IS NOT NULL&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> oe<span class="token punctuation">.</span>product_tracking <span class="token punctuation">(</span>product_id number <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  modified_time <span class="token keyword">date</span><span class="token punctuation">,</span>
  old_product_description varchar2<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  old_list_price number<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  old_warranty_period <span class="token keyword">interval</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">to</span> <span class="token keyword">month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">update</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;SEG$&quot;</span>
  <span class="token keyword">set</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BLOCKS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;EXTENTS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;INIEXTS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MINEXTS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MAXEXTS&quot;</span> <span class="token operator">=</span> <span class="token number">121</span><span class="token punctuation">,</span>
    <span class="token string">&quot;EXTSIZE&quot;</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;EXTPCT&quot;</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token string">&quot;USER#&quot;</span> <span class="token operator">=</span> <span class="token number">37</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LISTS&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;GROUPS&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CACHEHINT&quot;</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;HWMINCR&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">1024</span>
  <span class="token keyword">where</span>
    <span class="token string">&quot;TS#&quot;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token string">&quot;FILE#&quot;</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span>
    <span class="token string">&quot;BLOCK#&quot;</span> <span class="token operator">=</span> <span class="token number">121034</span> <span class="token operator">and</span>
    <span class="token string">&quot;TYPE#&quot;</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">and</span>
    <span class="token string">&quot;BLOCKS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">and</span>
    <span class="token string">&quot;EXTENTS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span>
    <span class="token string">&quot;INIEXTS&quot;</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">and</span>
    <span class="token string">&quot;MINEXTS&quot;</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span>
    <span class="token string">&quot;MAXEXTS&quot;</span> <span class="token operator">=</span> <span class="token number">121</span> <span class="token operator">and</span>
    <span class="token string">&quot;EXTSIZE&quot;</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">and</span>
    <span class="token string">&quot;EXTPCT&quot;</span> <span class="token operator">=</span> <span class="token number">50</span> <span class="token operator">and</span>
    <span class="token string">&quot;USER#&quot;</span> <span class="token operator">=</span> <span class="token number">37</span> <span class="token operator">and</span>
    <span class="token string">&quot;LISTS&quot;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token string">&quot;GROUPS&quot;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token string">&quot;BITMAPRANGES&quot;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token string">&quot;CACHEHINT&quot;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token string">&quot;SCANHINT&quot;</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token string">&quot;HWMINCR&quot;</span> <span class="token operator">=</span> <span class="token number">33415</span> <span class="token operator">and</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">and</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">and</span>
    ROWID <span class="token operator">=</span> <span class="token string">&#39;AAAAAIAABAAAdMOAAB&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token string">&quot;SYS&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;CON$&quot;</span>
 <span class="token keyword">values</span>
    <span class="token string">&quot;OWNER#&quot;</span> <span class="token operator">=</span> <span class="token number">37</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NAME&quot;</span> <span class="token operator">=</span> <span class="token string">&#39;SYS_C002090&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CON#&quot;</span> <span class="token operator">=</span> <span class="token number">2090</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE1&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE2&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE3&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE4&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE5&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SPARE6&quot;</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">commit</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
1.  End the LogMiner session.

  \`\`\`sql
    EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="example-5-tracking-ddl-statements-in-the-internal-dictionary" tabindex="-1"><a class="header-anchor" href="#example-5-tracking-ddl-statements-in-the-internal-dictionary" aria-hidden="true">#</a> Example 5: Tracking DDL Statements in the Internal Dictionary</h4><p>By using the <code>DBMS_LOGMNR.DDL_DICT_TRACKING</code> option, this example ensures that the LogMiner internal dictionary is updated with the DDL statements encountered in the redo log files.</p><ol><li><p>Determine which redo log file was most recently archived by the database.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, SEQUENCE# FROM V$ARCHIVED_LOG 
   WHERE FIRST_TIME = (SELECT MAX(FIRST_TIME) FROM V$ARCHIVED_LOG);

NAME                                           SEQUENCE#
--------------------------------------------   --------------
/usr/oracle/data/db1arch_1_210_482701534.dbf   210
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Because the dictionary may be contained in more than one redo log file, you need to determine which redo log files contain the start and end of the data dictionary. Query the <code>V$ARCHIVED_LOG</code> view, as follows:</p><ol><li><p>Find a redo log that contains the end of the data dictionary extract. This redo log file must have been created before the redo log files that you want to analyze, but should be as recent as possible.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, SEQUENCE#, DICTIONARY_BEGIN d_beg, DICTIONARY_END d_end
   FROM V$ARCHIVED_LOG
   WHERE SEQUENCE# = (SELECT MAX (SEQUENCE#) FROM V$ARCHIVED_LOG
   WHERE DICTIONARY_END = &#39;YES&#39; and SEQUENCE# &lt; 210);

NAME                                           SEQUENCE#    D_BEG  D_END
--------------------------------------------   ----------   -----  ------
/usr/oracle/data/db1arch_1_208_482701534.dbf   208          NO     YES
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Find the redo log file that contains the start of the data dictionary extract that matches the end of the dictionary found by the previous SQL statement:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, SEQUENCE#, DICTIONARY_BEGIN d_beg, DICTIONARY_END d_end
   FROM V$ARCHIVED_LOG
   WHERE SEQUENCE# = (SELECT MAX (SEQUENCE#) FROM V$ARCHIVED_LOG
   WHERE DICTIONARY_BEGIN = &#39;YES&#39; and SEQUENCE# &lt;= 208);

NAME                                           SEQUENCE#    D_BEG  D_END
--------------------------------------------   ----------   -----  ------
/usr/oracle/data/db1arch_1_208_482701534.dbf   207          YES     NO
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>Ensure that you have a complete list of redo log files.</p><p>To successfully apply DDL statements encountered in the redo log files, ensure that all files are included in the list of redo log files to mine. The missing log file corresponding to sequence# 209 must be included in the list. Determine the names of the redo log files that you need to add to the list by issuing the following query:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME FROM V$ARCHIVED_LOG
   WHERE SEQUENCE# &gt;= 207 AND SEQUENCE# &lt;= 210 
   ORDER BY SEQUENCE# ASC;

NAME                                           
--------------------------------------------   
/usr/oracle/data/db1arch_1_207_482701534.dbf  
/usr/oracle/data/db1arch_1_208_482701534.dbf  
/usr/oracle/data/db1arch_1_209_482701534.dbf  
/usr/oracle/data/db1arch_1_210_482701534.dbf  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Specify the list of the redo log files of interest.</p><p>Include the redo log files that contain the beginning and end of the dictionary, the redo log file that you want to mine, and any redo log files required to create a list without gaps. You can add the redo log files in any order.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_210_482701534.dbf&#39;, -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>      OPTIONS =&gt; DBMS_LOGMNR.NEW);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_209_482701534.dbf&#39;);
EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_208_482701534.dbf&#39;);
EXECUTE DBMS_LOGMNR.ADD_LOGFILE(-
   LOGFILENAME =&gt; &#39;/usr/oracle/data/db1arch_1_207_482701534.dbf&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Start LogMiner by specifying the dictionary to use and the <code>DDL_DICT_TRACKING</code>, <code>COMMITTED_DATA_ONLY</code>, and <code>PRINT_PRETTY_SQL</code> options.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
   OPTIONS =&gt; DBMS_LOGMNR.DICT_FROM_REDO_LOGS + -
              DBMS_LOGMNR.DDL_DICT_TRACKING + -
              DBMS_LOGMNR.COMMITTED_DATA_ONLY + -
              DBMS_LOGMNR.PRINT_PRETTY_SQL);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><p>To reduce the number of rows returned, exclude from the query all DML statements done in the <code>SYS</code> or <code>SYSTEM</code> schemas. (This query specifies a timestamp to exclude transactions that were involved in the dictionary extraction.)</p><p>The query returns all the reconstructed SQL statements correctly translated and the insert operations on the <code>oe.product_tracking</code> table that occurred because of the trigger execution.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT USERNAME AS usr,(XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; || XIDSQN) as XID, SQL_REDO FROM  
   V$LOGMNR_CONTENTS 
   WHERE SEG_OWNER IS NULL OR SEG_OWNER NOT IN (&#39;SYS&#39;, &#39;SYSTEM&#39;) AND
   TIMESTAMP &gt; &#39;10-jan-2012 15:59:53&#39;;

USR             XID         SQL_REDO
-----------     --------    -----------------------------------
SYS             1.2.1594    set transaction read write;
SYS             1.2.1594    create table oe.product_tracking (product_id number not null,
                            modified_time date,
                            old_list_price number(8,2),
                            old_warranty_period interval year(2) to month);
SYS             1.2.1594    commit;

SYS             1.18.1602   set transaction read write;
SYS             1.18.1602   create or replace trigger oe.product_tracking_trigger
                            before update on oe.product_information
                            for each row
                            when (new.list_price &lt;&gt; old.list_price or
                                  new.warranty_period &lt;&gt; old.warranty_period)
                            declare
                            begin
                            insert into oe.product_tracking values 
                               (:old.product_id, sysdate,
                                :old.list_price, :old.warranty_period);
                            end;
SYS             1.18.1602   commit;

OE              1.9.1598    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                              set
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+08-00&#39;),
                                &quot;LIST_PRICE&quot; = 100
                              where
                                &quot;PRODUCT_ID&quot; = 1729 and
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and
                                &quot;LIST_PRICE&quot; = 80 and
                                ROWID = &#39;AAAHTKAABAAAY9yAAA&#39;;
OE              1.9.1598    insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                              values
                                &quot;PRODUCT_ID&quot; = 1729,
                                &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;13-jan-2012 16:07:03&#39;, 
                                &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                                &quot;OLD_LIST_PRICE&quot; = 80,
                                &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;);

OE              1.9.1598    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                              set
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+08-00&#39;),
                                &quot;LIST_PRICE&quot; = 92
                              where
                                &quot;PRODUCT_ID&quot; = 2340 and
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and
                                &quot;LIST_PRICE&quot; = 72 and
                                ROWID = &#39;AAAHTKAABAAAY9zAAA&#39;;

OE              1.9.1598    insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                              values
                                &quot;PRODUCT_ID&quot; = 2340,
                                &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;13-jan-2012 16:07:07&#39;, 
                                &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                                &quot;OLD_LIST_PRICE&quot; = 72,
                                &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;);

OE              1.9.1598     commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h4 id="example-6-filtering-output-by-time-range" tabindex="-1"><a class="header-anchor" href="#example-6-filtering-output-by-time-range" aria-hidden="true">#</a> Example 6: Filtering Output by Time Range</h4><p>In the previous two examples, rows were filtered by specifying a timestamp-based predicate (timestamp &gt; &#39;10-jan-2012 15:59:53&#39;) in the query. However, a more efficient way to filter out redo records based on timestamp values is by specifying the time range in the <code>DBMS_LOGMNR.START_LOGMNR</code> procedure call, as shown in this example.</p><ol><li><p>Create a list of redo log files to mine.</p><p>Suppose you want to mine redo log files generated since a given time. The following procedure creates a list of redo log files based on a specified time. The subsequent SQL <code>EXECUTE</code> statement calls the procedure and specifies the starting time as 2 p.m. on Jan-13-2012.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>--
-- my_add_logfiles
-- Add all archived logs generated after a specified start_time.
--
CREATE OR REPLACE PROCEDURE my_add_logfiles (in_start_time  IN DATE) AS
  CURSOR  c_log IS 
    SELECT NAME FROM V$ARCHIVED_LOG 
      WHERE FIRST_TIME &gt;= in_start_time;

count      pls_integer := 0;
my_option  pls_integer := DBMS_LOGMNR.NEW;

BEGIN
  FOR c_log_rec IN c_log
  LOOP
    DBMS_LOGMNR.ADD_LOGFILE(LOGFILENAME =&gt; c_log_rec.name, 
                            OPTIONS =&gt; my_option);
    my_option := DBMS_LOGMNR.ADDFILE;
    DBMS_OUTPUT.PUT_LINE(&#39;Added logfile &#39; || c_log_rec.name);
  END LOOP;
END;
/

EXECUTE my_add_logfiles(in_start_time =&gt; &#39;13-jan-2012 14:00:00&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_LOGS</code> to see the list of redo log files.</p><p>This example includes the size of the redo log files in the output.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT FILENAME name, LOW_TIME start_time, FILESIZE bytes 
    FROM V$LOGMNR_LOGS;

NAME                                START_TIME            BYTES
----------------------------------- --------------------  ----------------
/usr/orcl/arch1_310_482932022.dbf    13-jan-2012 14:02:35  23683584
/usr/orcl/arch1_311_482932022.dbf    13-jan-2012 14:56:35  2564096
/usr/orcl/arch1_312_482932022.dbf    13-jan-2012 15:10:43  23683584
/usr/orcl/arch1_313_482932022.dbf    13-jan-2012 15:17:52  23683584
/usr/orcl/arch1_314_482932022.dbf    13-jan-2012 15:23:10  23683584
/usr/orcl/arch1_315_482932022.dbf    13-jan-2012 15:43:22  23683584
/usr/orcl/arch1_316_482932022.dbf    13-jan-2012 16:03:10  23683584
/usr/orcl/arch1_317_482932022.dbf    13-jan-2012 16:33:43  23683584
/usr/orcl/arch1_318_482932022.dbf    13-jan-2012 17:23:10  23683584
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Adjust the list of redo log files.</p><p>Suppose you realize that you want to mine just the redo log files generated between 3 p.m. and 4 p.m.</p><p>You could use the query predicate (<code>timestamp &gt; &#39;13-jan-2012 15:00:00&#39; and timestamp &lt; &#39;13-jan-2012 16:00:00&#39;</code>) to accomplish this. However, the query predicate is evaluated on each row returned by LogMiner, and the internal mining engine does not filter rows based on the query predicate. Thus, although you only wanted to get rows out of redo log files <code>arch1_311_482932022.dbf</code> to <code>arch1_315_482932022.dbf,</code> your query would result in mining all redo log files registered to the LogMiner session.</p><p>Furthermore, although you could use the query predicate and manually remove the redo log files that do not fall inside the time range of interest, the simplest solution is to specify the time range of interest in the <code>DBMS_LOGMNR.START_LOGMNR</code> procedure call.</p><p>Although this does not change the list of redo log files, LogMiner will mine only those redo log files that fall in the time range specified.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
   STARTTIME =&gt; &#39;13-jan-2012 15:00:00&#39;, -
   ENDTIME   =&gt; &#39;13-jan-2012 16:00:00&#39;, -
   OPTIONS   =&gt; DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG + -
                DBMS_LOGMNR.COMMITTED_DATA_ONLY + -
                DBMS_LOGMNR.PRINT_PRETTY_SQL);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT TIMESTAMP, (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; || XIDSQN) AS XID,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SQL_REDO FROM V$LOGMNR_CONTENTS WHERE SEG_OWNER = &#39;OE&#39;;

TIMESTAMP              XID          SQL_REDO
---------------------  -----------  --------------------------------
13-jan-2012 15:29:31   1.17.2376    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                                      set
                                        &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;)
                                      where
                                        &quot;PRODUCT_ID&quot; = 3399 and
                                        &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;) and
                                        ROWID = &#39;AAAHTKAABAAAY9TAAE&#39;;
13-jan-2012 15:29:34   1.17.2376      insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                                        values
                                        &quot;PRODUCT_ID&quot; = 3399,
                                        &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;13-jan-2012 15:29:34&#39;, 
                                        &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                                        &quot;OLD_LIST_PRICE&quot; = 815,
                                        &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;);

13-jan-2012 15:52:43   1.15.1756      update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                                        set
                                          &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;)
                                        where
                                          &quot;PRODUCT_ID&quot; = 1768 and
                                          &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;) and
                                          ROWID = &#39;AAAHTKAABAAAY9UAAB&#39;;

13-jan-2012 15:52:43   1.15.1756      insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                                        values
                                        &quot;PRODUCT_ID&quot; = 1768,
                                        &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;13-jan-2012 16:52:43&#39;, 
                                        &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                                        &quot;OLD_LIST_PRICE&quot; = 715,
                                        &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h3 id="examples-of-mining-without-specifying-the-list-of-redo-log-files-explicitly" tabindex="-1"><a class="header-anchor" href="#examples-of-mining-without-specifying-the-list-of-redo-log-files-explicitly" aria-hidden="true">#</a> Examples of Mining Without Specifying the List of Redo Log Files Explicitly</h3><p>Examples that do not specify redo log files.</p><p>The previous set of examples explicitly specified the redo log file or files to be mined. However, if you are mining in the same database that generated the redo log files, then you can mine the appropriate list of redo log files by just specifying the time (or SCN) range of interest. To mine a set of redo log files without explicitly specifying them, specify either a time range or an SCN range of interest.</p><p>Note:The <code>continuous_mine</code> option for the <code>dbms_logmnr.start_logmnr</code> package is desupported in Oracle Database 19c (19.1), and is no longer available.</p><p>This section contains the following list of examples; these examples are best read in sequential order, because each example builds on the example or examples that precede it:</p><p>The SQL output formatting may be different on your display than that shown in these examples.</p><h4 id="example-1-mining-redo-log-files-in-a-given-time-range" tabindex="-1"><a class="header-anchor" href="#example-1-mining-redo-log-files-in-a-given-time-range" aria-hidden="true">#</a> Example 1: Mining Redo Log Files in a Given Time Range</h4><p>This example is similar to Example 4: Using the LogMiner Dictionary in the Redo Log Files, except the list of redo log files are not specified explicitly. This example assumes that you want to use the data dictionary extracted to the redo log files.</p><ol><li><p>Determine the timestamp of the redo log file that contains the start of the data dictionary.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME, FIRST_TIME FROM V$ARCHIVED_LOG
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>   WHERE SEQUENCE# = (SELECT MAX(SEQUENCE#) FROM V$ARCHIVED_LOG 
    WHERE DICTIONARY_BEGIN = &#39;YES&#39;);

NAME                                          FIRST_TIME
--------------------------------------------  --------------------
/usr/oracle/data/db1arch_1_207_482701534.dbf  10-jan-2012 12:01:34
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Display all the redo log files that have been generated so far.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT FILENAME name FROM V$LOGMNR_LOGS
   WHERE LOW_TIME &gt; &#39;10-jan-2012 12:01:34&#39;;

NAME
----------------------------------------------
/usr/oracle/data/db1arch_1_207_482701534.dbf
/usr/oracle/data/db1arch_1_208_482701534.dbf
/usr/oracle/data/db1arch_1_209_482701534.dbf
/usr/oracle/data/db1arch_1_210_482701534.dbf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Start LogMiner by specifying the dictionary to use and the <code>COMMITTED_DATA_ONLY</code> and <code>PRINT_PRETTY_SQL</code> options.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
   STARTTIME =&gt; &#39;10-jan-2012 12:01:34&#39;, -
     ENDTIME =&gt; SYSDATE, -
     OPTIONS =&gt; DBMS_LOGMNR.DICT_FROM_REDO_LOGS + -
                DBMS_LOGMNR.COMMITTED_DATA_ONLY + -
                DBMS_LOGMNR.PRINT_PRETTY_SQL + -
                    );
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_LOGS</code> view.</p><p>This step shows that the <code>DBMS_LOGMNR.START_LOGMNR</code> procedure includes all of the redo log files that have been generated so far, as expected. (Compare the output in this step to the output in Step 2.)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT FILENAME name FROM V$LOGMNR_LOGS;

NAME
------------------------------------------------------
/usr/oracle/data/db1arch_1_207_482701534.dbf
/usr/oracle/data/db1arch_1_208_482701534.dbf
/usr/oracle/data/db1arch_1_209_482701534.dbf
/usr/oracle/data/db1arch_1_210_482701534.dbf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><p>To reduce the number of rows returned by the query, exclude all DML statements done in the <code>SYS</code> or <code>SYSTEM</code> schema. (This query specifies a timestamp to exclude transactions that were involved in the dictionary extraction.)</p><p>Note that all reconstructed SQL statements returned by the query are correctly translated.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT USERNAME AS usr,(XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; || XIDSQN) as XID, 
   SQL_REDO FROM V$LOGMNR_CONTENTS 
   WHERE SEG_OWNER IS NULL OR SEG_OWNER NOT IN (&#39;SYS&#39;, &#39;SYSTEM&#39;) AND
   TIMESTAMP &gt; &#39;10-jan-2012 15:59:53&#39;;

USR             XID         SQL_REDO
-----------     --------    -----------------------------------
SYS             1.2.1594    set transaction read write;
SYS             1.2.1594    create table oe.product_tracking (product_id number not null,
                            modified_time date,
                            old_list_price number(8,2),
                            old_warranty_period interval year(2) to month);
SYS             1.2.1594    commit;

SYS             1.18.1602   set transaction read write;
SYS             1.18.1602   create or replace trigger oe.product_tracking_trigger
                            before update on oe.product_information
                            for each row
                            when (new.list_price &lt;&gt; old.list_price or
                                  new.warranty_period &lt;&gt; old.warranty_period)
                            declare
                            begin
                            insert into oe.product_tracking values 
                               (:old.product_id, sysdate,
                                :old.list_price, :old.warranty_period);
                            end;
SYS             1.18.1602   commit;

OE              1.9.1598    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                              set
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+08-00&#39;),
                                &quot;LIST_PRICE&quot; = 100
                              where
                                &quot;PRODUCT_ID&quot; = 1729 and
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and
                                &quot;LIST_PRICE&quot; = 80 and
                                ROWID = &#39;AAAHTKAABAAAY9yAAA&#39;;
OE              1.9.1598    insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                              values
                                &quot;PRODUCT_ID&quot; = 1729,
                                &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;13-jan-2012 16:07:03&#39;, 
                                &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                                &quot;OLD_LIST_PRICE&quot; = 80,
                                &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;);

OE              1.9.1598    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                              set
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+08-00&#39;),
                                &quot;LIST_PRICE&quot; = 92
                              where
                                &quot;PRODUCT_ID&quot; = 2340 and
                                &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;) and
                                &quot;LIST_PRICE&quot; = 72 and
                                ROWID = &#39;AAAHTKAABAAAY9zAAA&#39;;

OE              1.9.1598    insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                              values
                                &quot;PRODUCT_ID&quot; = 2340,
                                &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;13-jan-2012 16:07:07&#39;, 
                                &#39;dd-mon-yyyy hh24:mi:ss&#39;),
                                &quot;OLD_LIST_PRICE&quot; = 72,
                                &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;);

OE              1.9.1598     commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h4 id="example-2-mining-the-redo-log-files-in-a-given-scn-range" tabindex="-1"><a class="header-anchor" href="#example-2-mining-the-redo-log-files-in-a-given-scn-range" aria-hidden="true">#</a> Example 2: Mining the Redo Log Files in a Given SCN Range</h4><p>This example shows how to specify an SCN range of interest and mine the redo log files that satisfy that range. You can use LogMiner to see all committed DML statements whose effects have not yet been made permanent in the data files.</p><p>Note that in this example (unlike the other examples) it is not assumed that you have set the <code>NLS_DATE_FORMAT</code> parameter.</p><ol><li><p>Determine the SCN of the last checkpoint taken.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT CHECKPOINT_CHANGE#, CURRENT_SCN FROM V$DATABASE;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>CHECKPOINT_CHANGE#  CURRENT_SCN
------------------  ---------------
          56453576         56454208
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Start LogMiner.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  STARTSCN =&gt; 56453576, -
   ENDSCN   =&gt; 56454208, -
   OPTIONS  =&gt; DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG + -
               DBMS_LOGMNR.COMMITTED_DATA_ONLY + -
               DBMS_LOGMNR.PRINT_PRETTY_SQL + -
               );
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Display the list of archived redo log files added by LogMiner.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT FILENAME name, LOW_SCN, NEXT_SCN FROM V$LOGMNR_LOGS;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>NAME                                           LOW_SCN   NEXT_SCN
--------------------------------------------   --------  --------
/usr/oracle/data/db1arch_1_215_482701534.dbf   56316771  56453579
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that the redo log file that LogMiner added does not contain the whole SCN range. LogMiner adds the rest of the SCN range contained in the online redo log files automatically, as needed during the query execution. Use the following query to determine whether the redo log file added is the latest archived redo log file produced.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT NAME FROM V$ARCHIVED_LOG 
   WHERE SEQUENCE# = (SELECT MAX(SEQUENCE#) FROM V$ARCHIVED_LOG);

NAME
-------------------------------------------- 
/usr/oracle/data/db1arch_1_215_482701534.dbf 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view for changes made to the user tables.</p><p>The following query does not return the <code>SET TRANSACTION READ WRITE</code> and <code>COMMIT</code> statements associated with transaction 1.6.1911 because these statements do not have a segment owner (<code>SEG_OWNER</code>) associated with them.</p><p>Note that the default <code>NLS_DATE_FORMAT</code>, &#39;DD-MON-RR&#39;, is used to display the column <code>MODIFIED_TIME</code> of type <code>DATE</code>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT SCN, (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; ||  XIDSQN) as XID, SQL_REDO 
    FROM V$LOGMNR_CONTENTS
    WHERE SEG_OWNER NOT IN (&#39;SYS&#39;, &#39;SYSTEM&#39;);

SCN        XID        SQL_REDO
---------- ---------- -------------
56454198   1.6.1911   update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                        set
                          &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;)
                        where
                          &quot;PRODUCT_ID&quot; = 2430 and
                          &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;) and
                          ROWID = &#39;AAAHTKAABAAAY9AAAC&#39;;

56454199   1.6.1911   insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                        values
                          &quot;PRODUCT_ID&quot; = 2430,
                          &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;17-JAN-03&#39;, &#39;DD-MON-RR&#39;),
                          &quot;OLD_LIST_PRICE&quot; = 175,
                          &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;);

56454204   1.6.1911    update &quot;OE&quot;.&quot;PRODUCT_INFORMATION&quot;
                         set
                           &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+05-00&#39;)
                         where
                           &quot;PRODUCT_ID&quot; = 2302 and
                           &quot;WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;) and
                           ROWID = &#39;AAAHTKAABAAAY9QAAA&#39;;
56454206   1.6.1911    insert into &quot;OE&quot;.&quot;PRODUCT_TRACKING&quot;
                         values
                           &quot;PRODUCT_ID&quot; = 2302,
                           &quot;MODIFIED_TIME&quot; = TO_DATE(&#39;17-JAN-03&#39;, &#39;DD-MON-RR&#39;),
                           &quot;OLD_LIST_PRICE&quot; = 150,
                           &quot;OLD_WARRANTY_PERIOD&quot; = TO_YMINTERVAL(&#39;+02-00&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h4 id="example-3-using-continuous-mining-to-include-future-values-in-a-query" tabindex="-1"><a class="header-anchor" href="#example-3-using-continuous-mining-to-include-future-values-in-a-query" aria-hidden="true">#</a> Example 3: Using Continuous Mining to Include Future Values in a Query</h4><p>To specify that a query not finishes until some future time occurs or SCN is reached, set either the <code>ENDTIME</code> or <code>ENDSCN</code> option in your call to the <code>DBMS_LOGMNR.START_LOGMNR</code> procedure to a time in the future or to an SCN value that has not yet been reached.</p><p>This examples assumes that you want to monitor all changes made to the table <code>hr.employees</code> from now until 5 hours from now, and that you are using the dictionary in the online catalog.</p><ol><li><p>Start LogMiner.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR(-
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  STARTTIME =&gt; SYSDATE, -
   ENDTIME   =&gt; SYSDATE + 5/24, -
   OPTIONS   =&gt; DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><p>This select operation will not complete until it encounters the first redo log file record that is generated after the time range of interest (5 hours from now). You can end the select operation prematurely by pressing Ctrl+C.</p><p>This example specifies the <code>SET</code> <code>ARRAYSIZE</code> statement so that rows are displayed as they are entered in the redo log file. If you do not specify the <code>SET ARRAYSIZE</code> statement, then rows are not returned until the SQL internal buffer is full.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SET ARRAYSIZE 1;
SELECT USERNAME AS usr, SQL_REDO FROM V$LOGMNR_CONTENTS
   WHERE  SEG_OWNER = &#39;HR&#39; AND TABLE_NAME = &#39;EMPLOYEES&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.END_LOGMNR();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h3 id="example-scenarios" tabindex="-1"><a class="header-anchor" href="#example-scenarios" aria-hidden="true">#</a> Example Scenarios</h3><p>Examples of how to use LogMiner for typical scenarios.</p><p>These examples include:</p><h4 id="scenario-1-using-logminer-to-track-changes-made-by-a-specific-user" tabindex="-1"><a class="header-anchor" href="#scenario-1-using-logminer-to-track-changes-made-by-a-specific-user" aria-hidden="true">#</a> Scenario 1: Using LogMiner to Track Changes Made by a Specific User</h4><p>This example shows how to see all changes made to the database in a specific time range by a single user: <code>joedevo</code>. Connect to the database and then take the following steps:</p>`,37),tt=n("p",null,"Create the LogMiner dictionary file.",-1),ot=s("To use LogMiner to analyze "),it=n("code",null,"joedevo",-1),lt=s("'s data, you must either create a LogMiner dictionary file before any table definition changes are made to tables that "),pt=n("code",null,"joedevo",-1),ct=s(" uses or use the online catalog at LogMiner startup. See "),rt={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-8D74F78A-E7D1-48E6-8E65-5E8CC55F0757",title:"Extracting a LogMiner dictionary.",target:"_blank",rel:"noopener noreferrer"},dt=s("Extract a LogMiner Dictionary"),ut=s(" for examples of creating LogMiner dictionaries. This example uses a LogMiner dictionary that has been extracted to the redo log files."),vt=t(`<li><p>Add redo log files.</p><p>Assume that <code>joedevo</code> has made some changes to the database. You can now specify the names of the redo log files that you want to analyze, as follows:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
   LOGFILENAME =&gt; &#39;log1orc1.ora&#39;, -
   OPTIONS =&gt; DBMS_LOGMNR.NEW);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If desired, add additional redo log files, as follows:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.ADD_LOGFILE( -
   LOGFILENAME =&gt; &#39;log2orc1.ora&#39;, -
   OPTIONS =&gt; DBMS_LOGMNR.ADDFILE);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Start LogMiner and limit the search to the specified time range:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR( -
   DICTFILENAME =&gt; &#39;orcldict.ora&#39;, -
   STARTTIME =&gt; TO_DATE(&#39;01-Jan-1998 08:30:00&#39;,&#39;DD-MON-YYYY HH:MI:SS&#39;), -
   ENDTIME =&gt; TO_DATE(&#39;01-Jan-1998 08:45:00&#39;, &#39;DD-MON-YYYY HH:MI:SS&#39;));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view.</p><p>At this point, the <code>V$LOGMNR_CONTENTS</code> view is available for queries. You decide to find all of the changes made by user <code>joedevo</code> to the <code>salary</code> table. Execute the following <code>SELECT</code> statement:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT SQL_REDO, SQL_UNDO FROM V$LOGMNR_CONTENTS 
   WHERE USERNAME = &#39;joedevo&#39; AND SEG_NAME = &#39;salary&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>For both the <code>SQL_REDO</code> and <code>SQL_UNDO</code> columns, two rows are returned (the format of the data display will be different on your screen). You discover that <code>joedevo</code> requested two operations: he deleted his old salary and then inserted a new, higher salary. You now have the data necessary to undo this operation.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SQL_REDO                              SQL_UNDO
--------                              --------
delete from SALARY                    insert into SALARY(NAME, EMPNO, SAL)
where EMPNO = 12345                    values (&#39;JOEDEVO&#39;, 12345, 500)
and NAME=&#39;JOEDEVO&#39;
and SAL=500;

insert into SALARY(NAME, EMPNO, SAL)  delete from SALARY
values(&#39;JOEDEVO&#39;,12345, 2500)         where EMPNO = 12345
                                      and NAME = &#39;JOEDEVO&#39;
2 rows selected                       and SAL = 2500;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>End the LogMiner session.</p><p>Use the <code>DBMS_LOGMNR.END_LOGMNR</code> procedure to finish the LogMiner session properly:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DBMS_LOGMNR.END_LOGMNR( );
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,4),mt=t(`<h4 id="scenario-2-using-logminer-to-calculate-table-access-statistics" tabindex="-1"><a class="header-anchor" href="#scenario-2-using-logminer-to-calculate-table-access-statistics" aria-hidden="true">#</a> Scenario 2: Using LogMiner to Calculate Table Access Statistics</h4><p>This scenario describes how to use LogMiner to calculate table access statistics.</p><p>In this example, assume you manage a direct marketing database and want to determine how productive the customer contacts have been in generating revenue for a 2-week period in January. Assume that you have already created the LogMiner dictionary and added the redo log files that you want to search (as demonstrated in the previous example). Take the following steps:</p><ol><li><p>Start LogMiner and specify a range of times:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>EXECUTE DBMS_LOGMNR.START_LOGMNR( -
   STARTTIME =&gt; TO_DATE(&#39;07-Jan-2012 08:30:00&#39;,&#39;DD-MON-YYYY HH:MI:SS&#39;), -
   ENDTIME =&gt; TO_DATE(&#39;21-Jan-2012 08:45:00&#39;,&#39;DD-MON-YYYY HH:MI:SS&#39;), -
   DICTFILENAME =&gt; &#39;/usr/local/dict.ora&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Query the <code>V$LOGMNR_CONTENTS</code> view to determine which tables were modified in the time range you specified, as shown in the following example. (This query filters out system tables that traditionally have a <code>$</code> in their name.)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT SEG_OWNER, SEG_NAME, COUNT(*) AS Hits FROM
   V$LOGMNR_CONTENTS WHERE SEG_NAME NOT LIKE &#39;%$&#39; GROUP BY
   SEG_OWNER, SEG_NAME ORDER BY Hits DESC;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>The following data is displayed. (The format of your display may be different.)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SEG_OWNER          SEG_NAME          Hits
---------          --------          ----
CUST               ACCOUNT            384
UNIV               EXECDONOR          325
UNIV               DONOR              234
UNIV               MEGADONOR           32
HR                 EMPLOYEES           12
SYS                DONOR               12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The values in the <code>Hits</code> column show the number of times that the named table had an insert, delete, or update operation performed on it during the 2-week period specified in the query. In this example, the <code>cust.account</code> table was modified the most during the specified 2-week period, and the <code>hr.employees</code> and <code>sys.donor</code> tables were modified the least during the same time period.</p></li><li><p>End the LogMiner session.</p><p>Use the <code>DBMS_LOGMNR.END_LOGMNR</code> procedure to finish the LogMiner session properly: <code>DBMS_LOGMNR.END_LOGMNR( );</code></p></li></ol><h2 id="supported-data-types-storage-attributes-and-database-and-redo-log-file-versions" tabindex="-1"><a class="header-anchor" href="#supported-data-types-storage-attributes-and-database-and-redo-log-file-versions" aria-hidden="true">#</a> Supported Data Types, Storage Attributes, and Database and Redo Log File Versions</h2><p>Describes information about data type and storage attribute support and the releases of the database and redo log files that are supported.</p><h3 id="supported-data-types-and-table-storage-attributes" tabindex="-1"><a class="header-anchor" href="#supported-data-types-and-table-storage-attributes" aria-hidden="true">#</a> Supported Data Types and Table Storage Attributes</h3><p>Describes supported data types and table storage attributes.</p><p>Note:</p><p>As of Oracle Database 12c Release 1 (12.1), the maximum size of the <code>VARCHAR2</code>, <code>NVARCHAR2</code>, and <code>RAW</code> data types has been increased to 32 KB when the <code>COMPATIBLE</code> initialization parameter is set to 12.0 or higher and the <code>MAX_STRING_SIZE</code> initialization parameter is set to <code>EXTENDED</code>.</p><p>LogMiner treats 32 KB columns as LOBs for the purposes of supplemental logging.</p><p>A 32 KB column cannot be part of an ALWAYS supplemental logging group.</p>`,12),kt=s("LogMiner supports the following data types and table storage attributes. As described in "),bt={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-8811DF7C-6A84-4DA7-9639-F9509289FA2F",title:"LogMiner support for certain data types and table storage attributes has database compatibility requirements.",target:"_blank",rel:"noopener noreferrer"},gt=s("Compatibility Requirements"),ht=s(", some data types are supported only in certain releases."),Et=t("<p>Data Types</p><ul><li><p><code>BINARY_DOUBLE</code></p></li><li><p><code>BINARY_FLOAT</code></p></li><li><p><code>BLOB</code></p></li><li><p><code>CHAR</code></p></li><li><p><code>CLOB</code> and <code>NCLOB</code></p></li><li><p><code>DATE</code></p></li><li><p><code>INTERVAL YEAR TO MONTH</code></p></li><li><p><code>INTERVAL DAY TO SECOND</code></p></li><li><p>LOBs stored as SecureFiles (requires that the database be run at a compatibility of 11.2 or higher.</p></li><li><p><code>LONG</code></p></li><li><p><code>LONG RAW</code></p></li><li><p><code>NCHAR</code></p></li><li><p><code>NUMBER</code></p></li><li><p><code>NVARCHAR2</code></p></li><li><p>Objects stored as <code>VARRAY</code>s</p></li><li><p>Objects (Simple and Nested ADTs without Collections)</p><p>Object support (including Oracle-supplied types such as <code>SDO_GEOMETRY</code>, <code>ORDIMAGE</code>, and so on) requires that the database be running Oracle Database 12c Release 1 (12.1) or higher with a redo compatibility setting of 12.0.0.0 or higher. The contents of the <code>SQL_REDO</code> column for the XML data-related operations is never valid SQL or PL/SQL.</p></li><li><p>Oracle Text</p></li><li><p><code>RAW</code></p></li><li><p><code>TIMESTAMP</code></p></li><li><p><code>TIMESTAMP WITH TIMEZONE</code></p></li><li><p><code>TIMESTAMP WITH LOCAL TIMEZONE</code></p></li><li><p><code>VARCHAR</code> and <code>VARCHAR2</code></p></li><li><p>XDB</p></li><li><p><code>XMLType</code> data for all storage models, assuming the following primary database compatibility requirements:</p><ul><li><p><code>XMLType</code> stored in <code>CLOB</code> format requires that the database be run at a compatibility setting of 11.0 or higher (<code>XMLType</code> stored as <code>CLOB</code> is deprecated as of Oracle Database 12c Release 1 (12.1).)</p></li><li><p><code>XMLType</code> stored in object-relational format or as binary XML requires that the database be running Oracle Database 11g Release 2 (11.2.0.3) or higher with a redo compatibility setting of 11.2.0.3 or higher. The contents of the <code>SQL_REDO</code> column for the XML data-related operations is never valid SQL or PL/SQL.</p></li></ul></li></ul><p>Table Storage Types</p>",3),_t=n("li",null,[n("p",null,"Cluster tables (including index clusters and heap clusters).")],-1),Lt=n("li",null,[n("p",null,"Index-organized tables (IOTs) (partitioned and nonpartitioned, including overflow segments).")],-1),Ot=n("li",null,[n("p",null,"Heap-organized tables (partitioned and nonpartitioned).")],-1),Tt=n("li",null,[n("p",null,"Advanced row compression and basic table compression. Both of these options require a database compatibility setting of 11.1.0 or higher.")],-1),Nt=n("li",null,[n("p",null,"Tables containing LOB columns stored as SecureFiles, when database compatibility is set to 11.2 or higher.")],-1),At=n("p",null,"Tables using Hybrid Columnar Compression, when database compatibility is set to 11.2.0.2 or higher.",-1),Rt=n("p",null,"See Also:",-1),St={href:"https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&id=CNCPT89198",target:"_blank",rel:"noopener noreferrer"},Mt=s("Oracle Database Concepts"),Dt=s(" for more information about Hybrid Columnar Compression"),qt={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-8811DF7C-6A84-4DA7-9639-F9509289FA2F",target:"_blank",rel:"noopener noreferrer"},yt=s("Compatibility Requirements"),It=n("br",null,null,-1),ft=s(" LogMiner support for certain data types and table storage attributes has database compatibility requirements."),Ct=t('<h4 id="compatibility-requirements" tabindex="-1"><a class="header-anchor" href="#compatibility-requirements" aria-hidden="true">#</a> Compatibility Requirements</h4><p>LogMiner support for certain data types and table storage attributes has database compatibility requirements.</p><p>Specifically:</p><ul><li><p>Multibyte <code>CLOB</code> support requires the database to run at a compatibility of 10.1 or higher.</p></li><li><p>IOT support without <code>LOB</code>s and Overflows requires the database to run at a compatibility of 10.1 or higher.</p></li><li><p>IOT support with <code>LOB</code> and Overflow requires the database to run at a compatibility of 10.2 or higher.</p></li><li><p>TDE and TSE support require the database to run at a compatibility of 11.1 or higher.</p></li><li><p>Basic compression and advanced row compression require the database to run at a compatibility of 11.1 or higher.</p></li><li><p>Hybrid Columnar Compression support is dependent on the underlying storage system and requires the database to run at a compatibility of 11.2 or higher.</p></li></ul><p>See Also:</p>',5),wt={href:"https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&id=CNCPT89198",target:"_blank",rel:"noopener noreferrer"},Gt=s("Oracle Database Concepts"),Ut=s(" for more information about Hybrid Columnar Compression"),xt=t('<h3 id="unsupported-data-types-and-table-storage-attributes" tabindex="-1"><a class="header-anchor" href="#unsupported-data-types-and-table-storage-attributes" aria-hidden="true">#</a> Unsupported Data Types and Table Storage Attributes</h3><p>Describes unsupported data types and table storage attributes.</p><p>LogMiner does not support the following data types and table storage attributes. If a table contains columns having any of these unsupported data types, then the entire table is ignored by LogMiner.</p><ul><li><p><code>BFILE</code></p></li><li><p>Nested tables</p></li><li><p>Objects with nested tables</p></li><li><p>Tables with identity columns</p></li><li><p>Temporal validity columns</p></li><li><p>PKREF columns</p></li><li><p>PKOID columns</p></li><li><p>Nested table attributes and stand-alone nested table columns</p></li></ul><h4 id="_22-14-3-supported-databases-and-redo-log-file-versions" tabindex="-1"><a class="header-anchor" href="#_22-14-3-supported-databases-and-redo-log-file-versions" aria-hidden="true">#</a> 22.14.3 Supported Databases and Redo Log File Versions</h4><p>Describes supported database releases and redo log file versions.</p><p>LogMiner runs only on databases of release 8.1 or later, but you can use it to analyze redo log files from release 8.0 databases. However, the information that LogMiner is able to retrieve from a redo log file depends on the version of the log, not the release of the database in use. For example, redo log files for Oracle9i can be augmented to capture additional information when supplemental logging is enabled. This allows LogMiner functionality to be used to its fullest advantage. Redo log files created with older releases of Oracle will not have that additional data and may therefore have limitations on the operations and data types supported by LogMiner.</p><p>See Also:</p>',8),Pt={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-6609EBA2-B2D7-4EAE-8344-A1F6C0A24760",title:"Describes the steps in a typical LogMiner session.",target:"_blank",rel:"noopener noreferrer"},Bt=s("Steps in a Typical LogMiner Session"),Yt=s(" and "),Ft={href:"https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-D857AF96-AC24-4CA1-B620-8EA3DF30D72E",title:"Describes supplemental logging.",target:"_blank",rel:"noopener noreferrer"},Vt=s("Supplemental Logging"),Ht=t('<h3 id="securefiles-lob-considerations" tabindex="-1"><a class="header-anchor" href="#securefiles-lob-considerations" aria-hidden="true">#</a> SecureFiles LOB Considerations</h3><p>SecureFiles LOBs are supported when database compatibility is set to 11.2 or later.</p><p>Only <code>SQL_REDO</code> columns can be filled in for SecureFiles LOB columns; <code>SQL_UNDO</code> columns are not filled in.</p><p>Transparent Data Encryption (TDE) and data compression can be enabled on SecureFiles LOB columns at the primary database.</p><p>Deduplication of SecureFiles LOB columns is fully supported. Fragment operations are not supported.</p><p>If LogMiner encounters redo generated by unsupported operations, then it generates rows with the <code>OPERATION</code> column set to <code>UNSUPPORTED</code>. No SQL_REDO or SQL_UNDO will be generated for these redo records.</p>',6);function Qt(Xt,Wt){const e=i("ExternalLinkIcon");return l(),p(c,null,[n("p",null,[d,n("a",u,[v,a(e)]),m]),k,b,g,h,n("ul",null,[E,_,L,n("li",null,[n("p",null,[O,n("a",T,[N,a(e)]),A])])]),R,n("p",null,[S,n("a",M,[D,a(e)])]),q,n("p",null,[y,n("a",I,[f,a(e)])]),C,n("p",null,[w,G,U,n("a",x,[P,a(e)]),B]),Y,n("ul",null,[n("li",null,[n("p",null,[n("a",F,[V,a(e)]),H])]),n("li",null,[n("p",null,[n("a",Q,[X,a(e)]),W])]),n("li",null,[n("p",null,[n("a",$,[J,a(e)]),K])])]),j,n("ul",null,[n("li",null,[n("p",null,[n("a",z,[Z,a(e)]),nn,sn,en])]),n("li",null,[n("p",null,[n("a",an,[tn,a(e)]),on,ln])])]),pn,n("ul",null,[n("li",null,[n("p",null,[cn,rn,n("a",dn,[un,a(e)]),vn])]),n("li",null,[n("p",null,[mn,kn,n("a",bn,[gn,a(e)]),hn])]),n("li",null,[n("p",null,[En,_n,n("a",Ln,[On,a(e)]),Tn])]),n("li",null,[n("p",null,[Nn,An,n("a",Rn,[Sn,a(e)]),Mn])]),n("li",null,[n("p",null,[Dn,qn,n("a",yn,[In,a(e)]),fn])]),n("li",null,[n("p",null,[Cn,wn,n("a",Gn,[Un,a(e)]),xn])]),n("li",null,[n("p",null,[Pn,Bn,n("a",Yn,[Fn,a(e)]),Vn])]),n("li",null,[n("p",null,[Hn,Qn,n("a",Xn,[Wn,a(e)]),$n])]),n("li",null,[n("p",null,[Jn,Kn,n("a",jn,[zn,a(e)]),Zn])])]),n("p",null,[ns,ss,es,as,ts,n("a",os,[is,a(e)]),ls]),ps,n("p",null,[cs,n("a",rs,[ds,a(e)]),us]),vs,n("p",null,[n("a",ms,[ks,a(e)]),bs,gs,hs,Es]),_s,n("p",null,[Ls,n("a",Os,[Ts,a(e)]),Ns,As,Rs]),Ss,n("p",null,[Ms,n("a",Ds,[qs,a(e)]),ys]),Is,n("p",null,[fs,Cs,ws,Gs,Us,xs,Ps,Bs,Ys,n("a",Fs,[Vs,a(e)]),Hs]),Qs,n("p",null,[Xs,n("a",Ws,[$s,a(e)]),Js]),Ks,n("ol",null,[js,n("li",null,[zs,n("p",null,[Zs,n("a",ne,[se,ee,a(e)]),ae])]),te]),oe,n("ol",null,[ie,n("li",null,[le,pe,n("ul",null,[n("li",null,[n("p",null,[n("a",ce,[re,a(e)]),de])]),n("li",null,[n("p",null,[n("a",ue,[ve,a(e)]),me])])])])]),ke,n("ol",null,[n("li",null,[n("p",null,[be,ge,he,n("a",Ee,[_e,a(e)]),Le])]),n("li",null,[n("p",null,[Oe,n("a",Te,[Ne,a(e)]),Ae])]),n("li",null,[n("p",null,[Re,n("a",Se,[Me,a(e)]),De])])]),qe,n("ol",null,[n("li",null,[ye,n("p",null,[Ie,fe,Ce,we,Ge,Ue,xe,n("a",Pe,[Be,a(e)]),Ye]),Fe,Ve,n("p",null,[He,Qe,Xe,n("a",We,[$e,a(e)]),Je])]),n("li",null,[n("p",null,[Ke,n("a",je,[ze,a(e)]),Ze,n("a",na,[sa,a(e)]),ea])]),n("li",null,[aa,n("p",null,[ta,oa,ia,n("a",la,[pa,a(e)]),ca]),ra])]),da,ua,n("p",null,[va,ma,ka,n("a",ba,[ga,ha,a(e)]),Ea]),_a,n("p",null,[La,n("a",Oa,[Ta,a(e)]),Na]),n("p",null,[Aa,n("a",Ra,[Sa,a(e)]),Ma,n("a",Da,[qa,a(e)]),ya,Ia,fa]),Ca,n("p",null,[wa,n("a",Ga,[Ua,a(e)]),xa]),Pa,n("ol",Ba,[n("li",null,[Ya,n("p",null,[Fa,n("a",Va,[Ha,a(e)]),Qa])])]),Xa,n("p",null,[Wa,n("a",$a,[Ja,a(e)]),Ka,ja,za,Za,nt,st,et]),at,n("ol",null,[n("li",null,[tt,n("p",null,[ot,it,lt,pt,ct,n("a",rt,[dt,a(e)]),ut])]),vt]),mt,n("p",null,[kt,n("a",bt,[gt,a(e)]),ht]),Et,n("ul",null,[_t,Lt,Ot,Tt,Nt,n("li",null,[At,Rt,n("ul",null,[n("li",null,[n("a",St,[Mt,a(e)]),Dt])])])]),n("ul",null,[n("li",null,[n("a",qt,[yt,a(e)]),It,ft])]),Ct,n("ul",null,[n("li",null,[n("a",wt,[Gt,a(e)]),Ut])]),xt,n("p",null,[n("a",Pt,[Bt,a(e)]),Yt,n("a",Ft,[Vt,a(e)])]),Ht],64)}var Kt=o(r,[["render",Qt],["__file","Oracle12cLogMiner\u5206\u6790Redo\u65E5\u5FD7\u6587\u4EF6.html.vue"]]);export{Kt as default};
